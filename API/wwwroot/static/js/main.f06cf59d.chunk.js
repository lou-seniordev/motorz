/*! For license information please see main.f06cf59d.chunk.js.LICENSE.txt */
(this["webpackJsonpclient-app"]=this["webpackJsonpclient-app"]||[]).push([[0],{435:function(e,t,a){e.exports=a(794)},442:function(e,t,a){},443:function(e,t,a){},673:function(e,t,a){},794:function(e,t,a){"use strict";a.r(t),a.d(t,"history",(function(){return rm}));var n=a(0),r=a.n(n),i=a(39),o=a.n(i),l=a(32),c=a(63),s=(a(440),a(441),a(442),a(804)),m=a(10),u=(a(443),a(16)),d=a(424),b=a(161),h=a(159),p=a(818),g=a(426),y=a(1),E=a(5),f=a(3),O=(a(50),a(46)),j=a.n(O),v=a(22);const w=e=>e.data,C=(e,t)=>{let a=new FormData;return a.append("Id",t.id),a.append("Name",t.name),a.append("BrandName",t.brandName),a.append("Model",t.model),a.append("CubicCentimeters",t.cubicCentimeters),a.append("File",t.file),a.append("Description",t.description),a.append("YearOfProduction",t.yearOfProduction),a.append("DatePublished",t.datePublished),a.append("City",t.city),a.append("Country",t.countryName),a.append("PricePaid",t.pricePaid),a.append("EstimatedValue",t.estimatedValue),a.append("NumberOfKilometers",t.numberOfKilometers),j.a.post(e,a,{headers:{"Content-type":"multipart/form-data"}}).then(w)},S=(e,t)=>{let a=new FormData;return a.append("Id",t.id),a.append("Title",t.title),a.append("Description",t.description),a.append("brand",t.brand),a.append("Model",t.model),a.append("Category",t.category),a.append("File",t.file),a.append("Country",t.countryName),a.append("City",t.city),a.append("Price",t.price),a.append("PhoneNumber",t.phoneNumber),j.a.post(e,a,{headers:{"Content-type":"multipart/form-data"}}).then(w)},k=(e,t)=>{let a=new FormData;return a.append("Id",t.id),a.append("ActivityId",t.activityId),a.append("Body",t.body),a.append("Mood",t.mood),a.append("Road",t.road),a.append("Weather",t.weather),a.append("NumberOfKilometers",String(t.numberOfKilometers)),a.append("File",t.file),a.append("LocationCountry",t.locationCountry),a.append("LocationCity",t.locationCity),j.a.post(e,a,{headers:{"Content-type":"multipart/form-data"}}).then(w)},P=(e,t)=>{let a=String(t.customers[0].isCustomer),n=String(t.customers[0].isOwner),r=String(t.customers[0].customerRecommended),i=new FormData;return i.append("Id",t.id),i.append("MechanicBrands",t.brands),i.append("Name",t.name),i.append("Owner",t.owner),i.append("Description",t.description),i.append("YearOfStart",t.yearOfStart),i.append("Country",t.countryName),i.append("City",t.city),i.append("Address",t.address),i.append("Email",t.email),i.append("Phone",t.phone),i.append("Website",t.website),i.append("Testimonial",t.description),i.append("IsCustomer",a),i.append("IsOwner",n),i.append("CustomerRecommended",r),i.append("File",t.file),j.a.post(e,i,{headers:{"Content-type":"multipart/form-data"}}).then(w)};j.a.defaults.baseURL="/api",j.a.interceptors.request.use(e=>{const t=window.localStorage.getItem("jwt");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),j.a.interceptors.response.use(void 0,e=>{"Network Error"!==e.message||e.response||v.b.error("Network error - API not responsive");const{status:t,data:a,config:n,headers:r}=e.response;throw 404===t&&rm.push("/notfound"),401===t&&r["www-authenticate"].startsWith('Bearer error="invalid_token", error_description="The token expired')&&(window.localStorage.removeItem("jwt"),rm.push("/"),v.b.info("Your session has expired, please login again")),400===t&&"get"===n.method&&a.errors.hasOwnProperty("id")&&rm.push("/notfound"),(404===t||400===t&&"get"===n.method&&a.errors.hasOwnProperty("id"))&&rm.push("/notfound"),500===t&&v.b.error("Server error - check the terminal for more info!"),e.response});const I=e=>e.data,x=e=>j.a.get(e).then(I),M=(e,t)=>j.a.post(e,t).then(I),z=(e,t)=>j.a.put(e,t).then(I),R=e=>j.a.delete(e).then(I),A=(e,t)=>{let a=new FormData;return a.append("File",t),j.a.post(e,a,{headers:{"Content-type":"multipart/form-data"}}).then(I)};var F={list:e=>j.a.get("/activities",{params:e}).then(I),details:e=>x("/activities/".concat(e)),create:e=>M("/activities",e),update:e=>z("/activities/".concat(e.id),e),delete:e=>R("/activities/".concat(e)),deactivate:e=>z("/activities/".concat(e,"/deactivate"),{}),attend:e=>M("/activities/".concat(e,"/attend"),{}),unattend:e=>R("/activities/".concat(e,"/attend"))},N={current:()=>x("/user"),login:e=>M("user/login",e),register:e=>M("user/register",e),verifyEmail:(e,t)=>M("/user/verifyEmail",{token:e,email:t}),resendVerifyEmailConfirm:e=>x("/user/resendEmailVerification?email=".concat(e)),handleForgottenPassword:e=>x("/user/handleForgottenPassword?email=".concat(e)),resendPasswordRequest:e=>x("/user/resendPasswordRequest?email=".concat(e)),resetPassword:(e,t,a)=>M("/user/resetPassword",{token:e,email:t,password:a})},D={list:e=>j.a.get("/motofies",{params:e}).then(I),details:e=>x("/motofies/".concat(e)),create:e=>C("/motofies",e),update:e=>z("/motofies/".concat(e.id),e),delete:e=>R("/motofies/".concat(e)),embrace:e=>M("/motofies/".concat(e,"/embrace"),{}),unembrace:e=>R("/motofies/".concat(e,"/embrace")),rate:(e,t)=>z("/motofies/".concat(e,"/rate"),t)},U={get:e=>x("/profiles/".concat(e)),listPeople:e=>j.a.get("/profiles/people",{params:e}).then(I),uploadPhoto:e=>A("/photos/",e),setMain:e=>M("/photos/".concat(e,"/setMain"),{}),deletePhoto:e=>R("/photos/".concat(e)),updateProfile:e=>z("/profiles",e),follow:e=>M("/profiles/".concat(e,"/follow"),{}),unfollow:e=>R("/profiles/".concat(e,"/follow")),listFollowings:(e,t)=>x("/profiles/".concat(e,"/follow?predicate=").concat(t)),listActivities:(e,t)=>x("/profiles/".concat(e,"/activities?predicate=").concat(t)),listMotofies:(e,t)=>x("/profiles/".concat(e,"/motofies?predicate=").concat(t)),listForumposts:(e,t)=>x("/profiles/".concat(e,"/forumposts?predicate=").concat(t)),listMechanics:(e,t)=>x("/profiles/".concat(e,"/mechanics?predicate=").concat(t)),listProducts:(e,t)=>x("/profiles/".concat(e,"/products?predicate=").concat(t))},T={list:e=>j.a.get("/forumposts",{params:e}).then(I),details:e=>x("/forumposts/".concat(e)),create:e=>M("/forumposts",e),update:e=>z("/forumposts/".concat(e.id),e),delete:e=>R("/forumposts/".concat(e)),rate:e=>z("/forumposts/rate",e)},L={list:e=>j.a.get("/mechanics",{params:e}).then(I),details:e=>x("/mechanics/".concat(e)),create:e=>P("/mechanics",e),update:e=>z("/mechanics/".concat(e.id),e),becomecustomer:e=>M("/mechanics/addcustomer",e),recommend:e=>z("/mechanics/recommend",e),rate:e=>z("/mechanics/rate",e),addtestimonial:e=>z("/mechanics/addtestimonial",e),delete:e=>R("/mechanics/".concat(e))},H={list:()=>x("brands"),details:e=>x("/brand/".concat(e)),create:e=>M("/brands",e)},q={list:e=>j.a.get("/products",{params:e}).then(I),details:e=>x("/products/".concat(e)),create:e=>S("/products",e),update:e=>z("/products/".concat(e.id),e),markSold:e=>z("/products/".concat(e,"/markSold"),{}),delete:e=>R("/products/".concat(e)),follow:e=>z("/products/".concat(e,"/follow"),{}),unfollow:e=>R("/products/".concat(e,"/unfollow")),toogleActivate:e=>z("/products/".concat(e,"/toogleActivate"),{}),visitCounter:e=>z("/products/".concat(e,"/visitCounter"),{})},B={list:()=>x("countries")},G={list:(e,t)=>x("/feeds?limit=".concat(e,"&offset=").concat(t?t*e:0)),addFeedItem:(e,t,a)=>M("/feeds/".concat(e,"/").concat(t,"/").concat(a,"/addFeedItem"),{}),markSeenInDB:e=>z("/feeds/markseenindb",e)},V={createDiaryEntry:e=>k("/diaryentries",e),deleteDiaryEntry:e=>R("/diaryentries/".concat(e)),detailsDiaryEntry:e=>x("/diaryentries/".concat(e)),updateDiaryEntry:e=>console.log(e)},Y={list:(e,t)=>x("/privatemessages?limit=".concat(e,"&offset=").concat(t?t*e:0)),create:e=>M("/privatemessages/",e),checkUnread:()=>x("/privatemessages/checkUnread"),markRead:e=>z("/privatemessages/".concat(e,"/markRead"),{})};const W=(e,t)=>(e.date=new Date(e.date),e.isGoing=e.attendees.some(e=>e.username===t.userName),e.isHost=e.attendees.some(e=>e.username===t.userName&&e.isHost),e),K=(e,t)=>(e.embraced=e.embracers.some(e=>e.username===(null===t||void 0===t?void 0:t.userName)),e.embracers[0].isOwner=e.publisherUsername===t.userName,e),Z=e=>({displayName:e.displayName,isHost:!1,username:e.userName,image:e.image}),$=e=>({displayName:e.displayName,isOwner:!1,username:e.userName,image:e.image});var _,J,Q,X,ee,te,ae,ne,re,ie,oe,le,ce,se,me,ue,de,be,he,pe,ge,ye,Ee,fe,Oe,je,ve,we,Ce,Se,ke,Pe,Ie,xe=a(35);let Me=(_=y.f.ref,J=class{constructor(e){this.rootStore=void 0,Object(E.a)(this,"activityRegistry",Q,this),Object(E.a)(this,"activity",X,this),Object(E.a)(this,"loadingInitial",ee,this),Object(E.a)(this,"submitting",te,this),Object(E.a)(this,"target",ae,this),Object(E.a)(this,"loading",ne,this),Object(E.a)(this,"activityCount",re,this),Object(E.a)(this,"page",ie,this),Object(E.a)(this,"diaryEntry",oe,this),Object(E.a)(this,"predicate",le,this),Object(E.a)(this,"info",ce,this),Object(E.a)(this,"setPredicate",se,this),Object(E.a)(this,"setInfo",me,this),Object(E.a)(this,"setPage",ue,this),Object(E.a)(this,"hubConnection",de,this),Object(E.a)(this,"createHubConnection",be,this),Object(E.a)(this,"stopHubConnection",he,this),Object(E.a)(this,"addComment",pe,this),Object(E.a)(this,"loadActivities",ge,this),Object(E.a)(this,"loadActivity",ye,this),this.getActivity=e=>this.activityRegistry.get(e),Object(E.a)(this,"clearActivity",Ee,this),Object(E.a)(this,"createActivity",fe,this),Object(E.a)(this,"editActivity",Oe,this),Object(E.a)(this,"deleteActivity",je,this),Object(E.a)(this,"deactivateActivity",ve,this),Object(E.a)(this,"attendActivity",we,this),Object(E.a)(this,"cancelAttendance",Ce,this),Object(E.a)(this,"createDiaryEntry",Se,this),Object(E.a)(this,"editDiaryEntry",ke,this),Object(E.a)(this,"loadDiaryEntry",Pe,this),Object(E.a)(this,"deleteDiaryEntry",Ie,this),this.rootStore=e,Object(y.g)(()=>this.predicate.keys(),()=>{this.page=0,this.activityRegistry.clear(),this.loadActivities()})}get axiosParams(){const e=new URLSearchParams;return e.append("limit",String(2)),e.append("offset","".concat(this.page?2*this.page:0)),this.predicate.forEach((t,a)=>{"startDate"===a?e.append(a,t.toISOString()):e.append(a,t)}),e}get totalPages(){return Math.ceil(this.activityCount/2)}get activitiesByDate(){return this.groupActivitiesByDate(Array.from(this.activityRegistry.values()))}groupActivitiesByDate(e){const t=e.sort((e,t)=>e.date.getTime()-t.date.getTime());return Object.entries(t.reduce((e,t)=>{const a=t.date.toISOString().split("T")[0];return e[a]=e[a]?[...e[a],t]:[t],e},{}))}},Q=Object(f.a)(J.prototype,"activityRegistry",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),X=Object(f.a)(J.prototype,"activity",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=Object(f.a)(J.prototype,"loadingInitial",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),te=Object(f.a)(J.prototype,"submitting",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ae=Object(f.a)(J.prototype,"target",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ne=Object(f.a)(J.prototype,"loading",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),re=Object(f.a)(J.prototype,"activityCount",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ie=Object(f.a)(J.prototype,"page",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),oe=Object(f.a)(J.prototype,"diaryEntry",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=Object(f.a)(J.prototype,"predicate",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),ce=Object(f.a)(J.prototype,"info",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),se=Object(f.a)(J.prototype,"setPredicate",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{this.predicate.clear(),"all"!==e&&this.predicate.set(e,t)}}}),me=Object(f.a)(J.prototype,"setInfo",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{Object(y.h)(()=>{this.info=e})}}}),Object(f.a)(J.prototype,"axiosParams",[y.c],Object.getOwnPropertyDescriptor(J.prototype,"axiosParams"),J.prototype),Object(f.a)(J.prototype,"totalPages",[y.c],Object.getOwnPropertyDescriptor(J.prototype,"totalPages"),J.prototype),ue=Object(f.a)(J.prototype,"setPage",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.page=e}}}),de=Object(f.a)(J.prototype,"hubConnection",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=Object(f.a)(J.prototype,"createHubConnection",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.hubConnection=(new xe.b).withUrl("/chat",{accessTokenFactory:()=>this.rootStore.commonStore.token}).configureLogging(xe.c.Information).build(),this.hubConnection.start().then(()=>console.log(this.hubConnection.state)).then(()=>{var t;(console.log("Attempting to join group"),"Connected"===this.hubConnection.state)&&(null===(t=this.hubConnection)||void 0===t||t.invoke("AddToGroup",e))}).catch(e=>console.log("Error establishing connection")),this.hubConnection.on("RecieveComment",e=>{Object(y.h)(()=>{this.activity.comments.push(e)})}),this.hubConnection.on("Send",e=>{console.log(e)})}}}),he=Object(f.a)(J.prototype,"stopHubConnection",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{var e;null===(e=this.hubConnection)||void 0===e||e.invoke("RemoveFromGroup",this.activity.id).then(()=>{var e;null===(e=this.hubConnection)||void 0===e||e.stop()}).then(()=>console.log("Connection stopped!")).catch(e=>console.log(e))}}}),pe=Object(f.a)(J.prototype,"addComment",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{e.activityId=this.activity.id;try{await this.hubConnection.invoke("SendComment",e)}catch(t){console.log(t)}}}}),Object(f.a)(J.prototype,"activitiesByDate",[y.c],Object.getOwnPropertyDescriptor(J.prototype,"activitiesByDate"),J.prototype),ge=Object(f.a)(J.prototype,"loadActivities",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async()=>{this.loadingInitial=!0;try{const e=await F.list(this.axiosParams),{activities:t,activityCount:a}=e;Object(y.h)("loading activities",()=>{t.forEach(e=>{W(e,this.rootStore.userStore.user),this.activityRegistry.set(e.id,e)}),this.activityCount=a,this.loadingInitial=!1})}catch(e){Object(y.h)("load activities error",()=>{this.loadingInitial=!1}),console.log(e)}}}}),ye=Object(f.a)(J.prototype,"loadActivity",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{let t=this.getActivity(e);if(t)return this.activity=t,Object(y.j)(t);this.loadingInitial=!0;try{return t=await F.details(e),Object(y.h)("getting activity",()=>{W(t,this.rootStore.userStore.user),this.activity=t,this.activityRegistry.set(t.id,t),this.loadingInitial=!1}),t}catch(a){Object(y.h)("error get activity",()=>{this.loadingInitial=!1}),console.log(a)}}}}),Ee=Object(f.a)(J.prototype,"clearActivity",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{this.activity=null}}}),fe=Object(f.a)(J.prototype,"createActivity",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{this.submitting=!0;try{await F.create(e);const t=Z(this.rootStore.userStore.user);t.isHost=!0;let a=[];a.push(t),e.attendees=a,e.comments=[],e.isHost=!0,Object(y.h)("creating activity",()=>{this.activityRegistry.set(e.id,e),this.submitting=!1}),rm.push("/activities/".concat(e.id))}catch(t){Object(y.h)("create activity error",()=>{this.submitting=!1}),v.b.error("Problem submitting data!"),console.log(t)}}}}),Oe=Object(f.a)(J.prototype,"editActivity",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{this.submitting=!0;try{await F.update(e),Object(y.h)("editing activity",()=>{this.activityRegistry.set(e.id,e),this.activity=e,this.submitting=!1}),rm.push("/activities/".concat(e.id))}catch(t){Object(y.h)("edit activity error",()=>{this.submitting=!1}),v.b.error("Problem submitting data!"),console.log(t)}}}}),je=Object(f.a)(J.prototype,"deleteActivity",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{this.submitting=!0;try{await F.delete(e),Object(y.h)("editing activity",()=>{this.activityRegistry.delete(e),this.submitting=!1}),rm.push("/activities")}catch(t){Object(y.h)("delete activity error",()=>{this.submitting=!1}),v.b.error("Problem deleting data!"),console.log(t)}}}}),ve=Object(f.a)(J.prototype,"deactivateActivity",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{try{await F.deactivate(e),Object(y.h)("deactivating activity",()=>{this.activityRegistry.delete(e)})}catch(t){Object(y.h)("delete error activity",()=>{console.log(t)})}}}}),we=Object(f.a)(J.prototype,"attendActivity",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async()=>{const e=Z(this.rootStore.userStore.user);this.loading=!0;try{await F.attend(this.activity.id),Object(y.h)(()=>{this.activity&&(this.activity.attendees.push(e),this.activity.isGoing=!0,this.activityRegistry.set(this.activity.id,this.activity),v.b.info("You are now part of this diary"),this.loading=!1)})}catch(t){Object(y.h)(()=>{this.loading=!1}),v.b.error("Problem joining the group at this time")}}}}),Ce=Object(f.a)(J.prototype,"cancelAttendance",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async()=>{this.loading=!0;try{await F.unattend(this.activity.id),Object(y.h)(()=>{this.activity&&(this.activity.attendees=this.activity.attendees.filter(e=>{var t;return e.username!==(null===(t=this.rootStore.userStore.user)||void 0===t?void 0:t.userName)}),this.activity.isGoing=!1,this.activityRegistry.set(this.activity.id,this.activity),v.b.dark("You are not part of this diary anymore"),this.loading=!1)})}catch(e){Object(y.h)(()=>{this.loading=!1}),v.b.error("Problem cancelling attendance at this time")}}}}),Se=Object(f.a)(J.prototype,"createDiaryEntry",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async(e,t)=>{e.dayNumber=String(t.diaryEntries.length+1),e.activityId=t.id,t.diaryEntries.push(e),console.log("diaryEntry",e),this.submitting=!0;try{await V.createDiaryEntry(e),Object(y.h)("creating diary entry",()=>{this.activityRegistry.set(t.id,t),this.submitting=!1}),rm.push("/activities/".concat(t.id))}catch(a){Object(y.h)("create activity error",()=>{this.submitting=!1}),v.b.error("Problem submitting data!"),console.log(a)}}}}),ke=Object(f.a)(J.prototype,"editDiaryEntry",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async(e,t)=>{let a=t.diaryEntries.findIndex(t=>t.id===e.id);t.diaryEntries[a]=e,this.submitting=!0;try{await V.updateDiaryEntry(e),Object(y.h)("updating diary entry",()=>{this.activityRegistry.set(t.id,t),this.submitting=!1}),rm.push("/activities/".concat(t.id))}catch(n){Object(y.h)("create activity error",()=>{this.submitting=!1}),v.b.error("Problem updating data!"),console.log(n)}}}}),Pe=Object(f.a)(J.prototype,"loadDiaryEntry",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{this.loadingInitial=!0;try{let t=await V.detailsDiaryEntry(e);return Object(y.h)("getting activity",()=>{this.diaryEntry=t,this.loadingInitial=!1}),this.diaryEntry}catch(t){Object(y.h)("error get diary entry",()=>{this.loadingInitial=!1}),console.log(t)}}}}),Ie=Object(f.a)(J.prototype,"deleteDiaryEntry",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async(e,t)=>{t.diaryEntries.splice(t.diaryEntries.indexOf(e)),this.submitting=!0;try{await V.deleteDiaryEntry(e.id),Object(y.h)("creating diary entry",()=>{this.activityRegistry.set(t.id,t),this.submitting=!1}),rm.push("/activities/".concat(t.id))}catch(a){Object(y.h)("create activity error",()=>{this.submitting=!1}),v.b.error("Problem submitting data!"),console.log(a)}}}}),J);var ze,Re,Ae,Fe,Ne,De,Ue,Te,Le,He,qe,Be=a(392),Ge=(ze=function e(t){var a=this;Object(Be.a)(this,e),this.rootStore=void 0,Object(E.a)(this,"token",Re,this),Object(E.a)(this,"appLoaded",Ae,this),Object(E.a)(this,"setToken",Fe,this),Object(E.a)(this,"setAppLoaded",Ne,this),this.rootStore=t,Object(y.g)((function(){return a.token}),(function(e){e?window.localStorage.setItem("jwt",e):window.localStorage.removeItem("jwt")}))},Re=Object(f.a)(ze.prototype,"token",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return window.localStorage.getItem("jwt")}}),Ae=Object(f.a)(ze.prototype,"appLoaded",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Fe=Object(f.a)(ze.prototype,"setToken",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.token=t}}}),Ne=Object(f.a)(ze.prototype,"setAppLoaded",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.appLoaded=!0}}}),ze);let Ve=(De=y.f.shallow,Ue=class{constructor(e){this.rootStore=void 0,Object(E.a)(this,"modal",Te,this),Object(E.a)(this,"setSize",Le,this),Object(E.a)(this,"openModal",He,this),Object(E.a)(this,"closeModal",qe,this),this.rootStore=e}},Te=Object(f.a)(Ue.prototype,"modal",[De],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{open:!1,body:null,size:void 0}}}),Le=Object(f.a)(Ue.prototype,"setSize",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{Object(y.h)(()=>{this.modal.size=e})}}}),He=Object(f.a)(Ue.prototype,"openModal",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.modal.open=!0,this.modal.body=e}}}),qe=Object(f.a)(Ue.prototype,"closeModal",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{this.modal.open=!1,this.modal.body=null}}}),Ue);var Ye,We,Ke,Ze,$e,_e,Je,Qe,Xe,et,tt,at,nt,rt,it,ot,lt,ct,st,mt,ut,dt,bt,ht,pt,gt,yt,Et,ft,Ot,jt;let vt=(Ye=class{constructor(e){this.rootStore=void 0,Object(E.a)(this,"profile",We,this),Object(E.a)(this,"loadingProfile",Ke,this),Object(E.a)(this,"uploadingPhoto",Ze,this),Object(E.a)(this,"loading",$e,this),Object(E.a)(this,"followings",_e,this),Object(E.a)(this,"activeTab",Je,this),Object(E.a)(this,"userActivities",Qe,this),Object(E.a)(this,"loadingActivities",Xe,this),Object(E.a)(this,"userMotofies",et,this),Object(E.a)(this,"loadingMotofies",tt,this),Object(E.a)(this,"userForumposts",at,this),Object(E.a)(this,"loadingForumposts",nt,this),Object(E.a)(this,"userMechanics",rt,this),Object(E.a)(this,"loadingMechanics",it,this),Object(E.a)(this,"userProducts",ot,this),Object(E.a)(this,"loadingProducts",lt,this),Object(E.a)(this,"loadUserActivities",ct,this),Object(E.a)(this,"loadUserMotofies",st,this),Object(E.a)(this,"loadUserForumposts",mt,this),Object(E.a)(this,"loadUserMechanics",ut,this),Object(E.a)(this,"loadUserProducts",dt,this),Object(E.a)(this,"setActiveTab",bt,this),Object(E.a)(this,"loadProfile",ht,this),Object(E.a)(this,"uploadPhoto",pt,this),Object(E.a)(this,"setMainPhoto",gt,this),Object(E.a)(this,"deletePhoto",yt,this),Object(E.a)(this,"updateProfile",Et,this),Object(E.a)(this,"follow",ft,this),Object(E.a)(this,"unfollow",Ot,this),Object(E.a)(this,"loadFollowings",jt,this),this.rootStore=e,Object(y.g)(()=>this.activeTab,e=>{if(7===e||8===e){const t=7===e?"followers":"following";this.loadFollowings(t)}else this.followings=[]})}get isCurrentUser(){return!(!this.rootStore.userStore.user||!this.profile)&&this.rootStore.userStore.user.userName===this.profile.username}},We=Object(f.a)(Ye.prototype,"profile",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ke=Object(f.a)(Ye.prototype,"loadingProfile",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ze=Object(f.a)(Ye.prototype,"uploadingPhoto",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$e=Object(f.a)(Ye.prototype,"loading",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_e=Object(f.a)(Ye.prototype,"followings",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Je=Object(f.a)(Ye.prototype,"activeTab",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Qe=Object(f.a)(Ye.prototype,"userActivities",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Xe=Object(f.a)(Ye.prototype,"loadingActivities",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),et=Object(f.a)(Ye.prototype,"userMotofies",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),tt=Object(f.a)(Ye.prototype,"loadingMotofies",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),at=Object(f.a)(Ye.prototype,"userForumposts",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),nt=Object(f.a)(Ye.prototype,"loadingForumposts",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),rt=Object(f.a)(Ye.prototype,"userMechanics",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),it=Object(f.a)(Ye.prototype,"loadingMechanics",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ot=Object(f.a)(Ye.prototype,"userProducts",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),lt=Object(f.a)(Ye.prototype,"loadingProducts",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(f.a)(Ye.prototype,"isCurrentUser",[y.c],Object.getOwnPropertyDescriptor(Ye.prototype,"isCurrentUser"),Ye.prototype),ct=Object(f.a)(Ye.prototype,"loadUserActivities",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async(e,t)=>{this.loadingActivities=!0,void 0===t&&(t="active");try{const a=await U.listActivities(e,t);Object(y.h)(()=>{this.userActivities=a,this.loadingActivities=!1})}catch(a){v.b.error("Problem loading user activities"),Object(y.h)(()=>{this.loadingActivities=!1})}}}}),st=Object(f.a)(Ye.prototype,"loadUserMotofies",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async(e,t)=>{this.loadingMotofies=!0,void 0===t&&(t="iEmbraced");try{const a=await U.listMotofies(e,t);Object(y.h)(()=>{this.userMotofies=a,this.loadingMotofies=!1})}catch(a){v.b.error("Problem loading user activities"),Object(y.h)(()=>{this.loadingMotofies=!1})}}}}),mt=Object(f.a)(Ye.prototype,"loadUserForumposts",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async(e,t)=>{this.loadingForumposts=!0,void 0===t&&(t="iAsked");try{const a=await U.listForumposts(e,t);Object(y.h)(()=>{this.userForumposts=a,this.loadingForumposts=!1})}catch(a){v.b.error("Problem loading user forumposts"),Object(y.h)(()=>{this.loadingForumposts=!1})}}}}),ut=Object(f.a)(Ye.prototype,"loadUserMechanics",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async(e,t)=>{this.loadingMechanics=!0,void 0===t&&(t="iPublished");try{const a=await U.listMechanics(e,t);Object(y.h)(()=>{this.userMechanics=a,this.loadingMechanics=!1})}catch(a){v.b.error("Problem loading user mechanics"),Object(y.h)(()=>{this.loadingMechanics=!1})}}}}),dt=Object(f.a)(Ye.prototype,"loadUserProducts",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async(e,t)=>{this.loadingProducts=!0,void 0===t&&(t="iAmSelling");try{const a=await U.listProducts(e,t);Object(y.h)(()=>{this.userProducts=a,this.loadingProducts=!1})}catch(a){v.b.error("Problem loading user products"),Object(y.h)(()=>{this.loadingProducts=!1})}}}}),bt=Object(f.a)(Ye.prototype,"setActiveTab",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.activeTab=e}}}),ht=Object(f.a)(Ye.prototype,"loadProfile",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{this.loadingProfile=!0;try{const t=await U.get(e);Object(y.h)(()=>{this.profile=t,this.loadingProfile=!1})}catch(t){Object(y.h)(()=>{this.loadingProfile=!1}),console.log(t)}}}}),pt=Object(f.a)(Ye.prototype,"uploadPhoto",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{this.uploadingPhoto=!0;try{const t=await U.uploadPhoto(e);Object(y.h)(()=>{this.profile&&(this.profile.photos.push(t),t.isMain&&this.rootStore.userStore.user&&(this.rootStore.userStore.user.image=t.url,this.profile.image=t.url)),this.uploadingPhoto=!1})}catch(t){console.log(t),v.b.error("Problem uploading photo"),Object(y.h)(()=>{this.uploadingPhoto=!1})}}}}),gt=Object(f.a)(Ye.prototype,"setMainPhoto",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{this.loading=!0;try{await U.setMain(e.id),Object(y.h)(()=>{this.rootStore.userStore.user.image=e.url,this.profile.photos.find(e=>e.isMain).isMain=!1,this.profile.photos.find(t=>t.id===e.id).isMain=!0,this.profile.image=e.url,this.loading=!1})}catch(t){v.b.error("Problem setting photo as main"),Object(y.h)(()=>{this.loading=!1})}}}}),yt=Object(f.a)(Ye.prototype,"deletePhoto",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{this.loading=!0;try{await U.deletePhoto(e.id),Object(y.h)(()=>{this.profile.photos=this.profile.photos.filter(t=>t.id!==e.id),this.loading=!1})}catch(t){v.b.error("Problem deleting the photo"),Object(y.h)(()=>{this.loading=!1})}}}}),Et=Object(f.a)(Ye.prototype,"updateProfile",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{try{await U.updateProfile(e),Object(y.h)(()=>{e.displayName!==this.rootStore.userStore.user.displayName&&(this.rootStore.userStore.user.displayName=e.displayName),this.profile={...this.profile,...e}})}catch(t){v.b.error("Problem updating profile")}}}}),ft=Object(f.a)(Ye.prototype,"follow",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{this.loading=!0;try{await U.follow(e),Object(y.h)(()=>{this.profile.following=!0,this.profile.followersCount++,this.loading=!1})}catch(t){v.b.error("Problem following user"),Object(y.h)(()=>{this.loading=!1})}}}}),Ot=Object(f.a)(Ye.prototype,"unfollow",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{this.loading=!0;try{await U.unfollow(e),Object(y.h)(()=>{this.profile.following=!1,this.profile.followersCount--,this.loading=!1})}catch(t){v.b.error("Problem unfollowing user"),Object(y.h)(()=>{this.loading=!1})}}}}),jt=Object(f.a)(Ye.prototype,"loadFollowings",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{this.loading=!0;try{const t=await U.listFollowings(this.profile.username,e);Object(y.h)(()=>{this.followings=t,this.loading=!1})}catch(t){v.b.error("Problem loading followings"),Object(y.h)(()=>{this.loading=!1})}}}}),Ye);var wt,Ct,St,kt,Pt,It,xt,Mt;let zt=(wt=class{constructor(e){this.rootStore=void 0,Object(E.a)(this,"user",Ct,this),Object(E.a)(this,"login",St,this),Object(E.a)(this,"getUser",kt,this),Object(E.a)(this,"logout",Pt,this),Object(E.a)(this,"register",It,this),Object(E.a)(this,"handleForgottenPassword",xt,this),Object(E.a)(this,"resetPassword",Mt,this),this.rootStore=e}get isLoggedIn(){return!!this.user}},Ct=Object(f.a)(wt.prototype,"user",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(f.a)(wt.prototype,"isLoggedIn",[y.c],Object.getOwnPropertyDescriptor(wt.prototype,"isLoggedIn"),wt.prototype),St=Object(f.a)(wt.prototype,"login",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{try{const t=await N.login(e);Object(y.h)(()=>{this.user=t}),this.rootStore.commonStore.setToken(t.token),this.rootStore.modalStore.closeModal(),this.rootStore.presenceStore.createHubConnection(),rm.push("/activities")}catch(t){throw t}}}}),kt=Object(f.a)(wt.prototype,"getUser",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async()=>{try{const e=await N.current();Object(y.h)(()=>{this.user=e})}catch(e){console.log(e)}}}}),Pt=Object(f.a)(wt.prototype,"logout",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{this.rootStore.commonStore.setToken(null),this.user=null,this.rootStore.presenceStore.stopHubConnection(),rm.push("/")}}}),It=Object(f.a)(wt.prototype,"register",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{try{await N.register(e),this.rootStore.modalStore.closeModal(),rm.push("/user/registerSuccess?email=".concat(e.email))}catch(t){throw t}}}}),xt=Object(f.a)(wt.prototype,"handleForgottenPassword",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{try{await N.handleForgottenPassword(e.email),this.rootStore.modalStore.closeModal(),rm.push("/user/SendRequestResetPasswordSuccess?email=".concat(e.email))}catch(t){throw t}}}}),Mt=Object(f.a)(wt.prototype,"resetPassword",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async(e,t,a)=>{try{await N.resetPassword(e,t,a),rm.push("/")}catch(n){throw n}}}}),wt);var Rt,At,Ft,Nt,Dt,Ut,Tt,Lt,Ht,qt,Bt,Gt,Vt,Yt,Wt,Kt,Zt,$t,_t,Jt,Qt,Xt,ea,ta,aa,na,ra,ia;let oa=(Rt=y.f.ref,At=class{constructor(e){this.rootStore=void 0,Object(E.a)(this,"forumPostRegistry",Ft,this),Object(E.a)(this,"forumposts",Nt,this),Object(E.a)(this,"forumpost",Dt,this),Object(E.a)(this,"loadingInitial",Ut,this),Object(E.a)(this,"editMode",Tt,this),Object(E.a)(this,"submitting",Lt,this),Object(E.a)(this,"rated",Ht,this),Object(E.a)(this,"info",qt,this),Object(E.a)(this,"setRated",Bt,this),Object(E.a)(this,"hubConnection",Gt,this),Object(E.a)(this,"forumPostCount",Vt,this),Object(E.a)(this,"page",Yt,this),Object(E.a)(this,"predicate",Wt,this),Object(E.a)(this,"setPredicate",Kt,this),Object(E.a)(this,"setInfo",Zt,this),Object(E.a)(this,"setPage",$t,this),Object(E.a)(this,"createHubConnection",_t,this),Object(E.a)(this,"stopHubConnection",Jt,this),Object(E.a)(this,"addComment",Qt,this),Object(E.a)(this,"setRating",Xt,this),Object(E.a)(this,"loadForumPosts",ea,this),Object(E.a)(this,"loadForumPost",ta,this),Object(E.a)(this,"clearForumPost",aa,this),this.getForumPost=e=>this.forumPostRegistry.get(e),Object(E.a)(this,"createForumpost",na,this),Object(E.a)(this,"editForumpost",ra,this),Object(E.a)(this,"deleteForumpost",ia,this),this.rootStore=e,Object(y.g)(()=>this.predicate.keys(),()=>{this.page=0,this.forumPostRegistry.clear(),this.forumposts=[],this.loadForumPosts()})}get axiosParams(){const e=new URLSearchParams;return e.append("limit",String(5)),e.append("offset","".concat(this.page?5*this.page:0)),this.predicate.forEach((t,a)=>{e.append(a,t)}),e}get totalPages(){return Math.ceil(this.forumPostCount/5)}get forumpostsByDate(){return this.formatForumpostsDate(Array.from(this.forumPostRegistry.values()))}formatForumpostsDate(e){return Object.entries(e.reduce((e,t)=>{const a=t.dateAdded.split("T")[0];return e[a]=e[a]?[...e[a],t]:[t],e},{}))}summComments(e){return e.commentForumPosts.length}reduceCommenters(e){const t=[],a=new Map;for(const n of e.commentForumPosts)a.has(n.username)||(a.set(n.username,!0),t.push({id:n.id,createdAt:n.createdAt,body:n.body,username:n.username,displayName:n.displayName,image:n.image}));return t}},Ft=Object(f.a)(At.prototype,"forumPostRegistry",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Nt=Object(f.a)(At.prototype,"forumposts",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Dt=Object(f.a)(At.prototype,"forumpost",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ut=Object(f.a)(At.prototype,"loadingInitial",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Tt=Object(f.a)(At.prototype,"editMode",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Lt=Object(f.a)(At.prototype,"submitting",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ht=Object(f.a)(At.prototype,"rated",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qt=Object(f.a)(At.prototype,"info",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Bt=Object(f.a)(At.prototype,"setRated",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{try{Object(y.h)("seting rated",()=>{this.rated=e})}catch(t){console.log(t)}}}}),Gt=Object(f.a)(At.prototype,"hubConnection",[Rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vt=Object(f.a)(At.prototype,"forumPostCount",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Yt=Object(f.a)(At.prototype,"page",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Wt=Object(f.a)(At.prototype,"predicate",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Kt=Object(f.a)(At.prototype,"setPredicate",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{this.predicate.clear(),"all"!==e&&this.predicate.set(e,t)}}}),Zt=Object(f.a)(At.prototype,"setInfo",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{Object(y.h)(()=>{this.info=e})}}}),Object(f.a)(At.prototype,"axiosParams",[y.c],Object.getOwnPropertyDescriptor(At.prototype,"axiosParams"),At.prototype),Object(f.a)(At.prototype,"totalPages",[y.c],Object.getOwnPropertyDescriptor(At.prototype,"totalPages"),At.prototype),$t=Object(f.a)(At.prototype,"setPage",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.page=e}}}),_t=Object(f.a)(At.prototype,"createHubConnection",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{this.hubConnection=(new xe.b).withUrl("/chat",{accessTokenFactory:()=>this.rootStore.commonStore.token}).configureLogging(xe.c.Information).build(),this.hubConnection.start().then(()=>console.log(this.hubConnection.state)).then(()=>{var t;(console.log("Attempting to join group"),"Connected"===this.hubConnection.state)&&(null===(t=this.hubConnection)||void 0===t||t.invoke("AddToGroup",e))}).catch(e=>console.log("Error establishing connection",e)),this.hubConnection.on(t,e=>{Object(y.h)(()=>{this.forumpost.commentForumPosts.push(e),this.forumpost.commenters=this.reduceCommenters(this.forumpost)})}),this.hubConnection.on("Send",e=>{console.log(e)})}}}),Jt=Object(f.a)(At.prototype,"stopHubConnection",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{var e;null===(e=this.hubConnection)||void 0===e||e.invoke("RemoveFromGroup",this.forumpost.id).then(()=>{var e;null===(e=this.hubConnection)||void 0===e||e.stop()}).then(()=>console.log("Connection stopped!")).catch(e=>console.log(e))}}}),Qt=Object(f.a)(At.prototype,"addComment",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{e.id=this.forumpost.id;try{await this.hubConnection.invoke("SendCommentForumPost",e)}catch(t){console.log(t)}}}}),Xt=Object(f.a)(At.prototype,"setRating",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async(e,t)=>{const a={id:e,value:t};try{await T.rate(a)}catch(n){console.log(n)}}}}),Object(f.a)(At.prototype,"forumpostsByDate",[y.c],Object.getOwnPropertyDescriptor(At.prototype,"forumpostsByDate"),At.prototype),ea=Object(f.a)(At.prototype,"loadForumPosts",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async()=>{this.loadingInitial=!0;try{const e=await T.list(this.axiosParams),{forumposts:t,forumpostCount:a}=e;Object(y.h)("loading forumposts",()=>{t.forEach(e=>{e.numberOfComents=this.summComments(e),e.commenters=this.reduceCommenters(e),this.forumPostRegistry.set(e.id,e),this.forumposts.push(e)}),this.forumPostCount=a,this.loadingInitial=!1})}catch(e){Object(y.h)("load forumposts error",()=>{this.loadingInitial=!1}),console.log(e)}}}}),ta=Object(f.a)(At.prototype,"loadForumPost",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{let t=this.getForumPost(e);if(t)return this.forumpost=t,t;this.loadingInitial=!0;try{t=await T.details(e),Object(y.h)("getting forumpost",()=>{t.numberOfComents=this.summComments(t),t.commenters=this.reduceCommenters(t),this.forumpost=t,this.forumPostRegistry.set(t.id,t),this.forumposts.push(t),this.loadingInitial=!1,this.forumpost=t})}catch(a){Object(y.h)("get forumpost error",()=>{this.loadingInitial=!1,console.log(a)})}}}}),aa=Object(f.a)(At.prototype,"clearForumPost",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{this.forumpost=null}}}),na=Object(f.a)(At.prototype,"createForumpost",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{this.submitting=!0,e.forumpostRatings=[];try{await T.create(e),Object(y.h)("creating forumposts",()=>{this.forumPostRegistry.set(e.id,e),this.forumposts.push(e),this.submitting=!1}),rm.push("/forum/".concat(e.id))}catch(t){Object(y.h)("create forumpost error",()=>{this.submitting=!1}),v.b.error("Problem submitting data"),console.log(t)}}}}),ra=Object(f.a)(At.prototype,"editForumpost",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{this.submitting=!0;try{await T.update(e),Object(y.h)("editing forumpost",()=>{this.forumPostRegistry.set(e.id,e),this.forumpost=e,this.editMode=!1,this.submitting=!1}),rm.push("/forum/".concat(e.id))}catch(t){Object(y.h)("edit forumpost error",()=>{this.submitting=!1}),console.log(t)}}}}),ia=Object(f.a)(At.prototype,"deleteForumpost",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{this.submitting=!0;try{await T.delete(e),Object(y.h)("deleting forumpost",()=>{this.forumPostRegistry.delete(e),this.submitting=!1})}catch(t){Object(y.h)("delete forumpost error",()=>{this.submitting=!1}),console.log(t)}}}}),At);var la,ca,sa,ma,ua,da,ba,ha,pa,ga,ya,Ea,fa,Oa,ja,va,wa,Ca,Sa,ka,Pa,Ia,xa,Ma,za,Ra,Aa,Fa,Na;let Da=(la=y.f.ref,ca=class{constructor(e){this.rootStore=void 0,Object(E.a)(this,"motofyRegistry",sa,this),Object(E.a)(this,"motofy",ma,this),Object(E.a)(this,"loadingInitial",ua,this),Object(E.a)(this,"submitting",da,this),Object(E.a)(this,"target",ba,this),Object(E.a)(this,"loading",ha,this),Object(E.a)(this,"info",pa,this),Object(E.a)(this,"hubConnection",ga,this),Object(E.a)(this,"createHubConnection",ya,this),Object(E.a)(this,"stopHubConnection",Ea,this),Object(E.a)(this,"addComment",fa,this),Object(E.a)(this,"mostEmbraced",Oa,this),Object(E.a)(this,"highestRatedMotofy",ja,this),Object(E.a)(this,"motofyCount",va,this),Object(E.a)(this,"page",wa,this),Object(E.a)(this,"predicate",Ca,this),Object(E.a)(this,"setPredicate",Sa,this),Object(E.a)(this,"setInfo",ka,this),Object(E.a)(this,"setPage",Pa,this),Object(E.a)(this,"loadMotofies",Ia,this),Object(E.a)(this,"loadMotofy",xa,this),Object(E.a)(this,"rateMotofy",Ma,this),this.getMotofy=e=>this.motofyRegistry.get(e),Object(E.a)(this,"editMotofy",za,this),Object(E.a)(this,"createMotofy",Ra,this),Object(E.a)(this,"deleteMotofy",Aa,this),Object(E.a)(this,"embraceMotofy",Fa,this),Object(E.a)(this,"unembraceMotofy",Na,this),this.rootStore=e,Object(y.g)(()=>this.predicate.keys(),()=>{this.page=0,this.motofyRegistry.clear(),this.loadMotofies()})}get getMostEmbraced(){return this.mostEmbraced}get getHighestRatedMotofy(){return this.highestRatedMotofy}get axiosParams(){const e=new URLSearchParams;return e.append("limit",String(2)),e.append("offset","".concat(this.page?2*this.page:0)),this.predicate.forEach((t,a)=>{e.append(a,t)}),e}get totalPages(){return Math.ceil(this.motofyCount/2)}get motofiesByDate(){return Array.from(this.motofyRegistry.values()).sort((e,t)=>Date.parse(e.date)-Date.parse(t.date))}},sa=Object(f.a)(ca.prototype,"motofyRegistry",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),ma=Object(f.a)(ca.prototype,"motofy",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ua=Object(f.a)(ca.prototype,"loadingInitial",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),da=Object(f.a)(ca.prototype,"submitting",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ba=Object(f.a)(ca.prototype,"target",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ha=Object(f.a)(ca.prototype,"loading",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),pa=Object(f.a)(ca.prototype,"info",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ga=Object(f.a)(ca.prototype,"hubConnection",[la],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ya=Object(f.a)(ca.prototype,"createHubConnection",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{this.hubConnection=(new xe.b).withUrl("/chat",{accessTokenFactory:()=>this.rootStore.commonStore.token}).configureLogging(xe.c.Information).build(),this.hubConnection.start().then(()=>console.log(this.hubConnection.state)).then(()=>{var t;(console.log("Attempting to join group"),"Connected"===this.hubConnection.state)&&(null===(t=this.hubConnection)||void 0===t||t.invoke("AddToGroup",e))}).catch(e=>console.log("Error establishing connection",e)),this.hubConnection.on(t,e=>{Object(y.h)(()=>{this.motofy.commentMotofies.push(e)})}),this.hubConnection.on("Send",e=>{console.log(e)})}}}),Ea=Object(f.a)(ca.prototype,"stopHubConnection",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{var e;null===(e=this.hubConnection)||void 0===e||e.invoke("RemoveFromGroup",this.motofy.id).then(()=>{var e;null===(e=this.hubConnection)||void 0===e||e.stop()}).then(()=>console.log("Connection stopped!")).catch(e=>console.log(e))}}}),fa=Object(f.a)(ca.prototype,"addComment",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{console.log(e),e.id=this.motofy.id;try{await this.hubConnection.invoke("SendCommentMotofy",e)}catch(t){console.log(t)}}}}),Oa=Object(f.a)(ca.prototype,"mostEmbraced",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(f.a)(ca.prototype,"getMostEmbraced",[y.c],Object.getOwnPropertyDescriptor(ca.prototype,"getMostEmbraced"),ca.prototype),ja=Object(f.a)(ca.prototype,"highestRatedMotofy",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(f.a)(ca.prototype,"getHighestRatedMotofy",[y.c],Object.getOwnPropertyDescriptor(ca.prototype,"getHighestRatedMotofy"),ca.prototype),va=Object(f.a)(ca.prototype,"motofyCount",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),wa=Object(f.a)(ca.prototype,"page",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ca=Object(f.a)(ca.prototype,"predicate",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Sa=Object(f.a)(ca.prototype,"setPredicate",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{this.predicate.clear(),"all"!==e&&this.predicate.set(e,t)}}}),ka=Object(f.a)(ca.prototype,"setInfo",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{Object(y.h)(()=>{this.info=e})}}}),Object(f.a)(ca.prototype,"axiosParams",[y.c],Object.getOwnPropertyDescriptor(ca.prototype,"axiosParams"),ca.prototype),Object(f.a)(ca.prototype,"totalPages",[y.c],Object.getOwnPropertyDescriptor(ca.prototype,"totalPages"),ca.prototype),Pa=Object(f.a)(ca.prototype,"setPage",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.page=e}}}),Object(f.a)(ca.prototype,"motofiesByDate",[y.c],Object.getOwnPropertyDescriptor(ca.prototype,"motofiesByDate"),ca.prototype),Ia=Object(f.a)(ca.prototype,"loadMotofies",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async()=>{this.loadingInitial=!0;try{const e=await D.list(this.axiosParams),{motofies:t,motofyCount:a,mostEmbraced:n,highestRatedMotofy:r}=e;Object(y.h)("loading motofies",()=>{this.mostEmbraced=n,this.highestRatedMotofy=r,t.forEach(e=>{var t;e.datePublished=null===(t=e.datePublished)||void 0===t?void 0:t.split("T")[0],K(e,this.rootStore.userStore.user),this.motofyRegistry.set(e.id,e)}),this.motofyCount=a,this.loadingInitial=!1})}catch(e){Object(y.h)(()=>{this.loadingInitial=!1}),console.log(e)}}}}),xa=Object(f.a)(ca.prototype,"loadMotofy",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{let t=this.getMotofy(e);if(t)return this.motofy=t,t;this.loadingInitial=!0;try{return t=await D.details(e),Object(y.h)("getting motofy",()=>{K(t,this.rootStore.userStore.user),this.motofy=t,this.motofyRegistry.set(t.id,t),this.loadingInitial=!1}),t}catch(a){Object(y.h)("get motofy error",()=>{this.loadingInitial=!1}),console.log(a)}}}}),Ma=Object(f.a)(ca.prototype,"rateMotofy",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async(e,t,a)=>{let n={id:t.id,score:e},r={username:null===a||void 0===a?void 0:a.userName,displayName:null===a||void 0===a?void 0:a.displayName,score:e};try{await D.rate(t.id,n),Object(y.h)("rating motofy",()=>{t.motofyScores.push(r),this.motofyRegistry.set(t.id,t)})}catch(i){Object(y.h)("rating motofy error",()=>{console.log(i)})}}}}),za=Object(f.a)(ca.prototype,"editMotofy",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{this.submitting=!0;try{await D.update(e),Object(y.h)("editing motofy",()=>{this.motofyRegistry.set(e.id,e),this.motofy=e,this.submitting=!1}),rm.push("/gallery/".concat(e.id))}catch(t){Object(y.h)("edit motofy error",()=>{this.submitting=!1}),console.log(t)}}}}),Ra=Object(f.a)(ca.prototype,"createMotofy",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{this.submitting=!0;try{await D.create(e);const t=$(this.rootStore.userStore.user);t.isOwner=!0;let a=[];a.push(t),e.embracers=a,e.isOwner=!0,Object(y.h)("create motofy",()=>{this.motofyRegistry.set(e.id,e),this.submitting=!1}),rm.push("/gallery/".concat(e.id))}catch(t){Object(y.h)(()=>{this.submitting=!1}),v.b.error("Problem submitting data"),console.log(t)}}}}),Aa=Object(f.a)(ca.prototype,"deleteMotofy",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{this.submitting=!0,console.log("this.motofyRegistry out of try",this.motofyRegistry);try{await D.delete(e),Object(y.h)("deleting Motofy",()=>{this.motofyRegistry.delete(e),console.log("this.motofyRegistry",this.motofyRegistry),this.submitting=!1})}catch(t){Object(y.h)("delete motofy error",()=>{this.submitting=!1}),console.log(t)}}}}),Fa=Object(f.a)(ca.prototype,"embraceMotofy",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{const t=$(this.rootStore.userStore.user);this.loading=!0;try{await D.embrace(e),Object(y.h)(()=>{this.motofy&&(this.motofy.embracers.push(t),this.motofy.embraced=!0,this.motofyRegistry.set(this.motofy.id,this.motofy),this.loading=!1)})}catch(a){Object(y.h)(()=>{this.loading=!1}),v.b.error("Problem embracing this motofy")}}}}),Na=Object(f.a)(ca.prototype,"unembraceMotofy",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{this.loading=!0;try{await D.unembrace(e),Object(y.h)(()=>{this.motofy&&(this.motofy.embracers=this.motofy.embracers.filter(e=>e.username!==this.rootStore.userStore.user.userName),this.motofy.embraced=!1,this.motofyRegistry.set(this.motofy.id,this.motofy)),this.loading=!1})}catch(t){Object(y.h)(()=>{this.loading=!1}),v.b.error("Problem embracing this motofy")}}}}),ca);var Ua,Ta,La,Ha,qa,Ba,Ga,Va,Ya,Wa,Ka,Za,$a,_a,Ja,Qa,Xa,en,tn,an,nn,rn,on,ln,cn,sn,mn,un,dn,bn,hn,pn,gn,yn=a(823);let En=(Ua=y.f.ref,Ta=class{constructor(e){this.rootStore=void 0,Object(E.a)(this,"mechanicRegistry",La,this),Object(E.a)(this,"mechanic",Ha,this),Object(E.a)(this,"loadingInitial",qa,this),Object(E.a)(this,"submitting",Ba,this),Object(E.a)(this,"hubConnection",Ga,this),Object(E.a)(this,"mechanicCount",Va,this),Object(E.a)(this,"page",Ya,this),Object(E.a)(this,"predicate",Wa,this),Object(E.a)(this,"info",Ka,this),Object(E.a)(this,"setPredicate",Za,this),Object(E.a)(this,"setInfo",$a,this),Object(E.a)(this,"isCustomer",_a,this),Object(E.a)(this,"openCustomerForm",Ja,this),Object(E.a)(this,"confirmCustomer",Qa,this),Object(E.a)(this,"setPage",Xa,this),Object(E.a)(this,"setOpenCustomerForm",en,this),Object(E.a)(this,"setCloseCustomerForm",tn,this),Object(E.a)(this,"createHubConnection",an,this),Object(E.a)(this,"stopHubConnection",nn,this),Object(E.a)(this,"addComment",rn,this),Object(E.a)(this,"setCustomer",on,this),Object(E.a)(this,"clearMechanic",ln,this),Object(E.a)(this,"loadMechanics",cn,this),Object(E.a)(this,"loadMechanic",sn,this),this.getMechanic=e=>this.mechanicRegistry.get(e),Object(E.a)(this,"createMechanic",mn,this),Object(E.a)(this,"editMechanic",un,this),Object(E.a)(this,"deleteMechanic",dn,this),Object(E.a)(this,"becomeCustomer",bn,this),Object(E.a)(this,"recommend",hn,this),Object(E.a)(this,"rate",pn,this),Object(E.a)(this,"addTestimonial",gn,this),this.rootStore=e,Object(y.g)(()=>this.predicate.keys(),()=>{this.page=0,this.mechanicRegistry.clear(),this.loadMechanics()})}get axiosParams(){const e=new URLSearchParams;return e.append("limit",String(3)),e.append("offset","".concat(this.page?3*this.page:0)),this.predicate.forEach((t,a)=>{e.append(a,t)}),e}get totalPages(){return Math.ceil(this.mechanicCount/3)}get mechanicsByDate(){return Array.from(this.mechanicRegistry.values())}},La=Object(f.a)(Ta.prototype,"mechanicRegistry",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Ha=Object(f.a)(Ta.prototype,"mechanic",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qa=Object(f.a)(Ta.prototype,"loadingInitial",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ba=Object(f.a)(Ta.prototype,"submitting",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ga=Object(f.a)(Ta.prototype,"hubConnection",[Ua],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Va=Object(f.a)(Ta.prototype,"mechanicCount",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ya=Object(f.a)(Ta.prototype,"page",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Wa=Object(f.a)(Ta.prototype,"predicate",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Ka=Object(f.a)(Ta.prototype,"info",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Za=Object(f.a)(Ta.prototype,"setPredicate",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{this.predicate.clear(),"all"!==e&&this.predicate.set(e,t)}}}),$a=Object(f.a)(Ta.prototype,"setInfo",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{Object(y.h)(()=>{this.info=e})}}}),Object(f.a)(Ta.prototype,"axiosParams",[y.c],Object.getOwnPropertyDescriptor(Ta.prototype,"axiosParams"),Ta.prototype),_a=Object(f.a)(Ta.prototype,"isCustomer",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ja=Object(f.a)(Ta.prototype,"openCustomerForm",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Qa=Object(f.a)(Ta.prototype,"confirmCustomer",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(f.a)(Ta.prototype,"totalPages",[y.c],Object.getOwnPropertyDescriptor(Ta.prototype,"totalPages"),Ta.prototype),Xa=Object(f.a)(Ta.prototype,"setPage",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.page=e}}}),en=Object(f.a)(Ta.prototype,"setOpenCustomerForm",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{try{Object(y.h)("open form",()=>{this.openCustomerForm=!this.openCustomerForm})}catch(e){}}}}),tn=Object(f.a)(Ta.prototype,"setCloseCustomerForm",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{try{Object(y.h)("open form",()=>{this.openCustomerForm=!1})}catch(e){}}}}),an=Object(f.a)(Ta.prototype,"createHubConnection",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{this.hubConnection=(new xe.b).withUrl("/chat",{accessTokenFactory:()=>this.rootStore.commonStore.token}).configureLogging(xe.c.Information).build(),this.hubConnection.start().then(()=>console.log(this.hubConnection.state)).then(()=>{var t;(console.log("Attempting to join group"),"Connected"===this.hubConnection.state)&&(null===(t=this.hubConnection)||void 0===t||t.invoke("AddToGroup",e))}).catch(e=>console.log("Error establishing connection",e)),this.hubConnection.on(t,e=>{Object(y.h)(()=>{this.mechanic.commentMechanics.push(e)})}),this.hubConnection.on("Send",e=>{console.log(e)})}}}),nn=Object(f.a)(Ta.prototype,"stopHubConnection",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{var e;null===(e=this.hubConnection)||void 0===e||e.invoke("RemoveFromGroup",this.mechanic.id).then(()=>{var e;null===(e=this.hubConnection)||void 0===e||e.stop()}).then(()=>console.log("Connection stopped!")).then(()=>this.clearMechanic()).catch(e=>console.log(e))}}}),rn=Object(f.a)(Ta.prototype,"addComment",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{console.log(e),e.id=this.mechanic.id;try{await this.hubConnection.invoke("SendCommentMechanic",e)}catch(t){console.log(t)}}}}),Object(f.a)(Ta.prototype,"mechanicsByDate",[y.c],Object.getOwnPropertyDescriptor(Ta.prototype,"mechanicsByDate"),Ta.prototype),on=Object(f.a)(Ta.prototype,"setCustomer",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{try{Object(y.h)("seting customer",()=>{this.isCustomer=e})}catch(t){console.log(t)}}}}),ln=Object(f.a)(Ta.prototype,"clearMechanic",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async()=>{this.mechanic=null}}}),cn=Object(f.a)(Ta.prototype,"loadMechanics",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async()=>{this.loadingInitial=!0;try{const e=await L.list(this.axiosParams),{mechanics:t,mechanicCount:a}=e;Object(y.h)("loading mechanics",()=>{t.forEach(e=>{var t;e.datePublished=null===(t=e.datePublished)||void 0===t?void 0:t.split("T")[0],this.mechanicRegistry.set(e.id,e)}),this.mechanicCount=a,this.loadingInitial=!1})}catch(e){Object(y.h)("load mechanics error",()=>{this.loadingInitial=!1}),console.log(e)}}}}),sn=Object(f.a)(Ta.prototype,"loadMechanic",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{let t=this.getMechanic(e);if(t)return this.mechanic=t,t;this.loadingInitial=!0;try{return t=await L.details(e),Object(y.h)("getting mechanic",()=>{this.mechanic=t,this.mechanicRegistry.set(t.id,t),this.loadingInitial=!1}),t}catch(a){Object(y.h)("get mechanic error",()=>{this.loadingInitial=!1}),console.log(a)}}}}),mn=Object(f.a)(Ta.prototype,"createMechanic",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{this.submitting=!0;try{await L.create(e),Object(y.h)("creating mechanics",()=>{this.mechanicRegistry.set(e.id,e),this.submitting=!1}),rm.push("/mechanics/".concat(e.id))}catch(t){Object(y.h)("create mechanic error",()=>{this.submitting=!1}),v.b.error("Problem submitting data"),console.log(t)}}}}),un=Object(f.a)(Ta.prototype,"editMechanic",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{this.submitting=!0,null===e.email&&(e.email="Not assigned email"),null===e.website&&(e.website="Not assigned website"),e.country=e.countryName,console.log(e);try{await L.update(e),Object(y.h)("creating mechanic",()=>{this.mechanicRegistry.set(e.id,e),this.mechanic=e,this.submitting=!1}),rm.push("/mechanics/".concat(e.id))}catch(t){Object(y.h)("create mechanic error",()=>{this.submitting=!1}),v.b.error("Problem submitting data"),console.log(t)}}}}),dn=Object(f.a)(Ta.prototype,"deleteMechanic",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{this.submitting=!0;try{await L.delete(e),Object(y.h)("deleting mechanic",()=>{this.mechanicRegistry.delete(e),this.submitting=!1})}catch(t){Object(y.h)("delete mechanic error",()=>{this.submitting=!1}),console.log(t)}}}}),bn=Object(f.a)(Ta.prototype,"becomeCustomer",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async(e,t,a)=>{let n;n="0"!==a;let r={mechanicId:e,isCustomer:!0},i={username:t.userName,displayName:t.displayName,image:t.image,isCustomer:!0,isOwner:!1,customerRecommended:n};try{await L.becomecustomer(r),Object(y.h)("become a customer",()=>{var e;this.isCustomer=!0,null===(e=this.mechanic)||void 0===e||e.customers.push(i)})}catch(o){console.log("error",o)}v.b.info("You became a customer of the shop!")}}}),hn=Object(f.a)(Ta.prototype,"recommend",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async(e,t,a)=>{let n={mechanicId:e,isRecommended:a};try{await L.recommend(n),Object(y.h)("recommending a mechanic",()=>{this.mechanic.customers.find(e=>e.username===t).customerRecommended="1"===a}),v.b.info("You recommended this shop!")}catch(r){console.log("error",r)}}}}),pn=Object(f.a)(Ta.prototype,"rate",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async(e,t,a)=>{let n={id:e,score:t},r={username:a.userName,displayName:a.displayName,score:t};try{await L.rate(n),Object(y.h)("recommending a mechanic",()=>{var e;null===(e=this.mechanic)||void 0===e||e.ratings.push(r),console.log(this.mechanic.ratings)}),v.b.info("You rated this shop!")}catch(i){console.log("error",i)}}}}),gn=Object(f.a)(Ta.prototype,"addTestimonial",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async(e,t,a)=>{let n={mechanicId:e,text:t},r={id:Object(yn.a)(),text:t,dateAdded:(new Date).toString()};try{await L.addtestimonial(n),Object(y.h)("adding a testimonial to a mechanic",()=>{this.mechanic.customers.find(e=>e.username===a.userName).testimonial=r}),v.b.info("You added a testimonial this shop!")}catch(i){console.log("error",i)}}}}),Ta);var fn,On,jn,vn,wn,Cn,Sn;let kn=(fn=class{constructor(e){this.rootStore=void 0,Object(E.a)(this,"brands",On,this),Object(E.a)(this,"brand",jn,this),Object(E.a)(this,"loadingInitial",vn,this),Object(E.a)(this,"editMode",wn,this),Object(E.a)(this,"submitting",Cn,this),Object(E.a)(this,"loadBrandsToSelect",Sn,this),this.rootStore=e}},On=Object(f.a)(fn.prototype,"brands",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),jn=Object(f.a)(fn.prototype,"brand",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vn=Object(f.a)(fn.prototype,"loadingInitial",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),wn=Object(f.a)(fn.prototype,"editMode",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Cn=Object(f.a)(fn.prototype,"submitting",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Sn=Object(f.a)(fn.prototype,"loadBrandsToSelect",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async()=>{this.loadingInitial=!0;try{const e=await H.list();Object(y.h)("loading brands",()=>{this.brands=e})}catch(e){Object(y.h)("load brands error",()=>{this.loadingInitial=!1}),console.log(e)}}}}),fn);var Pn,In,xn,Mn,zn,Rn,An,Fn,Nn,Dn,Un,Tn,Ln,Hn,qn,Bn,Gn,Vn,Yn,Wn,Kn,Zn,$n,_n,Jn,Qn;let Xn=(Pn=class{constructor(e){this.rootStore=void 0,Object(E.a)(this,"loadingInitial",In,this),Object(E.a)(this,"productRegistry",xn,this),Object(E.a)(this,"products",Mn,this),Object(E.a)(this,"product",zn,this),Object(E.a)(this,"productCount",Rn,this),Object(E.a)(this,"page",An,this),Object(E.a)(this,"predicate",Fn,this),Object(E.a)(this,"info",Nn,this),Object(E.a)(this,"productFollowed",Dn,this),Object(E.a)(this,"setPredicate",Un,this),Object(E.a)(this,"setInfo",Tn,this),Object(E.a)(this,"setPage",Ln,this),Object(E.a)(this,"submitting",Hn,this),Object(E.a)(this,"target",qn,this),Object(E.a)(this,"loadProducts",Bn,this),Object(E.a)(this,"loadProduct",Gn,this),this.getProduct=e=>this.productRegistry.get(e),Object(E.a)(this,"createProduct",Vn,this),Object(E.a)(this,"editProduct",Yn,this),Object(E.a)(this,"deleteProduct",Wn,this),Object(E.a)(this,"visitCounter",Kn,this),Object(E.a)(this,"markSold",Zn,this),Object(E.a)(this,"toogleActivate",$n,this),Object(E.a)(this,"setProductFollowed",_n,this),Object(E.a)(this,"followProduct",Jn,this),Object(E.a)(this,"unfollowProduct",Qn,this),this.rootStore=e,Object(y.g)(()=>this.predicate.keys(),()=>{this.page=0,this.productRegistry.clear(),this.loadProducts()})}get axiosParams(){const e=new URLSearchParams;return e.append("limit",String(12)),e.append("offset","".concat(this.page?12*this.page:0)),this.predicate.forEach((t,a)=>{e.append(a,t)}),e}get totalPages(){return Math.ceil(this.productCount/12)}get productsByDate(){return Array.from(this.productRegistry.values())}},In=Object(f.a)(Pn.prototype,"loadingInitial",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xn=Object(f.a)(Pn.prototype,"productRegistry",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Mn=Object(f.a)(Pn.prototype,"products",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),zn=Object(f.a)(Pn.prototype,"product",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Rn=Object(f.a)(Pn.prototype,"productCount",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),An=Object(f.a)(Pn.prototype,"page",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Fn=Object(f.a)(Pn.prototype,"predicate",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Nn=Object(f.a)(Pn.prototype,"info",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Dn=Object(f.a)(Pn.prototype,"productFollowed",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Un=Object(f.a)(Pn.prototype,"setPredicate",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{this.predicate.clear(),"all"!==e&&this.predicate.set(e,t)}}}),Tn=Object(f.a)(Pn.prototype,"setInfo",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{Object(y.h)(()=>{this.info=e})}}}),Object(f.a)(Pn.prototype,"axiosParams",[y.c],Object.getOwnPropertyDescriptor(Pn.prototype,"axiosParams"),Pn.prototype),Object(f.a)(Pn.prototype,"totalPages",[y.c],Object.getOwnPropertyDescriptor(Pn.prototype,"totalPages"),Pn.prototype),Ln=Object(f.a)(Pn.prototype,"setPage",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.page=e}}}),Hn=Object(f.a)(Pn.prototype,"submitting",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qn=Object(f.a)(Pn.prototype,"target",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(f.a)(Pn.prototype,"productsByDate",[y.c],Object.getOwnPropertyDescriptor(Pn.prototype,"productsByDate"),Pn.prototype),Bn=Object(f.a)(Pn.prototype,"loadProducts",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async()=>{this.loadingInitial=!0;try{const e=await q.list(this.axiosParams),{products:t,productCount:a}=e;Object(y.h)("loading products",()=>{t.forEach(e=>{this.productRegistry.set(e.id,e)}),this.productCount=a,this.loadingInitial=!1})}catch(e){Object(y.h)("load products error",()=>{this.loadingInitial=!1}),console.log(e)}}}}),Gn=Object(f.a)(Pn.prototype,"loadProduct",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{let t=this.getProduct(e);if(t)return this.product=t,t;this.loadingInitial=!0;try{return t=await q.details(e),Object(y.h)("getting product",()=>{this.product=t,this.productRegistry.set(t.id,t),this.loadingInitial=!1,this.product=t}),t}catch(a){Object(y.h)("get product error",()=>{this.loadingInitial=!1,console.log(a)})}}}}),Vn=Object(f.a)(Pn.prototype,"createProduct",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{this.submitting=!0;try{await q.create(e),Object(y.h)("creating product",()=>{e.viewers=[],this.productRegistry.set(e.id,e),this.submitting=!1}),rm.push("/product/".concat(e.id))}catch(t){Object(y.h)("create product error",()=>{this.submitting=!1}),v.b.error("Problem submitting data")}}}}),Yn=Object(f.a)(Pn.prototype,"editProduct",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{this.submitting=!0;try{await q.update(e),Object(y.h)("editing product",()=>{this.productRegistry.set(e.id,e),this.product=e,this.submitting=!1}),rm.push("/product/".concat(e.id))}catch(t){Object(y.h)("create product error",()=>{this.submitting=!1}),v.b.error("Problem submitting data"),console.log(t)}}}}),Wn=Object(f.a)(Pn.prototype,"deleteProduct",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{this.submitting=!0;try{await q.delete(e),Object(y.h)("deleting product",()=>{this.productRegistry.delete(e),this.submitting=!1})}catch(t){Object(y.h)("delete product error",()=>{this.submitting=!1}),console.log(t)}}}}),Kn=Object(f.a)(Pn.prototype,"visitCounter",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{try{await q.visitCounter(e),Object(y.h)("Increasing the number seen counter",()=>{})}catch(t){console.log(t)}}}}),Zn=Object(f.a)(Pn.prototype,"markSold",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async(e,t)=>{try{await q.markSold(e),Object(y.h)("Marking the product sold",()=>{t.isSold=!0,v.b.info("This product is marked as sold!")})}catch(a){console.log(a)}}}}),$n=Object(f.a)(Pn.prototype,"toogleActivate",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async(e,t)=>{try{await q.toogleActivate(e),Object(y.h)("Marking the product sold",()=>{t.isActive=!0,v.b.info("This product is activated!")})}catch(a){console.log(a)}}}}),_n=Object(f.a)(Pn.prototype,"setProductFollowed",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async()=>{Object(y.h)(()=>{this.productFollowed=!this.productFollowed})}}}),Jn=Object(f.a)(Pn.prototype,"followProduct",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async(e,t,a)=>{let n=this.getProduct(e),r={username:t,displayName:a};n.viewers.push(r);try{await q.follow(e),Object(y.h)("following product",()=>{this.productRegistry.set(n.id,n),this.productFollowed=!0})}catch(i){console.log(i)}}}}),Qn=Object(f.a)(Pn.prototype,"unfollowProduct",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{let t=this.getProduct(e);try{await q.unfollow(e),Object(y.h)("following product",()=>{this.productRegistry.set(t.id,t),this.productFollowed=!1})}catch(a){console.log(a)}}}}),Pn);var er,tr,ar,nr,rr,ir,or;let lr=(er=y.f.ref,tr=class{constructor(e){this.rootStore=void 0,Object(E.a)(this,"motofy",ar,this),Object(E.a)(this,"hubConnection",nr,this),Object(E.a)(this,"createHubConnection",rr,this),Object(E.a)(this,"stopHubConnection",ir,this),Object(E.a)(this,"addComment",or,this),this.rootStore=e}},ar=Object(f.a)(tr.prototype,"motofy",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nr=Object(f.a)(tr.prototype,"hubConnection",[er],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rr=Object(f.a)(tr.prototype,"createHubConnection",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t,a)=>{this.motofy=a,this.hubConnection=(new xe.b).withUrl("/chat",{accessTokenFactory:()=>this.rootStore.commonStore.token}).configureLogging(xe.c.Information).build(),this.hubConnection.start().then(()=>console.log(this.hubConnection.state)).then(()=>{var t;"Connected"===this.hubConnection.state&&(null===(t=this.hubConnection)||void 0===t||t.invoke("AddToGroup",e))}).catch(e=>console.log("Error establishing connection",e)),this.hubConnection.on(t,e=>{Object(y.h)(()=>{this.motofy.commentMotofies.push(e)})}),this.hubConnection.on("Send",e=>{v.b.info(e)})}}}),ir=Object(f.a)(tr.prototype,"stopHubConnection",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{var e;null===(e=this.hubConnection)||void 0===e||e.invoke("RemoveFromGroup",this.motofy.id).then(()=>{var e;null===(e=this.hubConnection)||void 0===e||e.stop()}).then(()=>console.log("Connection stopped!")).catch(e=>console.log(e))}}}),or=Object(f.a)(tr.prototype,"addComment",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{console.log(e),e.motofyId=this.motofy.id;try{await this.hubConnection.invoke("SendCommentMotofy",e)}catch(t){console.log(t)}}}}),tr);var cr,sr,mr,ur,dr;let br=(cr=class{constructor(e){this.rootStore=void 0,Object(E.a)(this,"brandRegistry",sr,this),Object(E.a)(this,"countries",mr,this),Object(E.a)(this,"loadingInitial",ur,this),Object(E.a)(this,"loadCountriesToSelect",dr,this),this.rootStore=e}},sr=Object(f.a)(cr.prototype,"brandRegistry",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),mr=Object(f.a)(cr.prototype,"countries",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ur=Object(f.a)(cr.prototype,"loadingInitial",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),dr=Object(f.a)(cr.prototype,"loadCountriesToSelect",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async()=>{this.loadingInitial=!0;try{const e=await B.list();Object(y.h)("loading brands",()=>{this.countries=e})}catch(e){Object(y.h)("load countries error",()=>{this.loadingInitial=!1}),console.log(e)}}}}),cr);var hr,pr,gr,yr,Er,fr,Or,jr,vr,wr,Cr,Sr,kr,Pr,Ir,xr,Mr;let zr=(hr=y.f.ref,pr=class{constructor(e){this.rootStore=void 0,Object(E.a)(this,"feedRegistry",gr,this),Object(E.a)(this,"feeds",yr,this),Object(E.a)(this,"feedCount",Er,this),Object(E.a)(this,"page",fr,this),Object(E.a)(this,"loadingInitial",Or,this),Object(E.a)(this,"feedMounted",jr,this),Object(E.a)(this,"hubConnection",vr,this),Object(E.a)(this,"createHubConnection",wr,this),Object(E.a)(this,"stopHubConnection",Cr,this),Object(E.a)(this,"setFeedMounted",Sr,this),Object(E.a)(this,"setFeedUnmounted",kr,this),Object(E.a)(this,"setPage",Pr,this),Object(E.a)(this,"addFeedItem",Ir,this),Object(E.a)(this,"markSeenInDB",xr,this),Object(E.a)(this,"loadFeed",Mr,this),this.rootStore=e}get totalPages(){return Math.ceil(this.feedCount/7)}get feedByDate(){return this.groupFeedItemsByDate(Array.from(this.feedRegistry.values()))}get unseenFeedItems(){return this.countUnseenItems(Array.from(this.feedRegistry.values()))}countUnseenItems(e){let t=0;for(var a=0,n=e.length;a<n;a++)!1===e[a].isSeen&&t++;return t}groupFeedItemsByDate(e){const t=e.sort((e,t)=>Date.parse(t.dateTriggered)-Date.parse(e.dateTriggered));return Object.entries(t.reduce((e,t)=>{var a;const n=null===(a=t.dateTriggered)||void 0===a?void 0:a.split("T")[0];return e[n]=e[n]?[...e[n],t]:[t],e},{}))}formatDate(e){var t,a;e.dateTriggered=null===(t=e.dateTriggered)||void 0===t?void 0:t.split(".")[0],e.dateTriggered=null===(a=e.dateTriggered)||void 0===a?void 0:a.replace("T"," ")}},gr=Object(f.a)(pr.prototype,"feedRegistry",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),yr=Object(f.a)(pr.prototype,"feeds",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Er=Object(f.a)(pr.prototype,"feedCount",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),fr=Object(f.a)(pr.prototype,"page",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Or=Object(f.a)(pr.prototype,"loadingInitial",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),jr=Object(f.a)(pr.prototype,"feedMounted",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vr=Object(f.a)(pr.prototype,"hubConnection",[hr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wr=Object(f.a)(pr.prototype,"createHubConnection",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{this.hubConnection=(new xe.b).withUrl("/feedhub",{skipNegotiation:!0,transport:xe.a.WebSockets,accessTokenFactory:()=>this.rootStore.commonStore.token}).withAutomaticReconnect().configureLogging(xe.c.Information).build(),this.hubConnection.start().catch(e=>console.log("Error establishing connection: ",e)),this.hubConnection.on("SendFeed",e=>{Object(y.h)(()=>{this.feedRegistry.set(e.id,e)})})}}}),Cr=Object(f.a)(pr.prototype,"stopHubConnection",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{var e;null===(e=this.hubConnection)||void 0===e||e.stop()}}}),Sr=Object(f.a)(pr.prototype,"setFeedMounted",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{this.feedMounted=!0}}}),kr=Object(f.a)(pr.prototype,"setFeedUnmounted",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{this.feedMounted=!1}}}),Object(f.a)(pr.prototype,"totalPages",[y.c],Object.getOwnPropertyDescriptor(pr.prototype,"totalPages"),pr.prototype),Pr=Object(f.a)(pr.prototype,"setPage",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.page=e}}}),Object(f.a)(pr.prototype,"feedByDate",[y.c],Object.getOwnPropertyDescriptor(pr.prototype,"feedByDate"),pr.prototype),Object(f.a)(pr.prototype,"unseenFeedItems",[y.c],Object.getOwnPropertyDescriptor(pr.prototype,"unseenFeedItems"),pr.prototype),Ir=Object(f.a)(pr.prototype,"addFeedItem",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async(e,t,a)=>{try{await G.addFeedItem(e,t,a),v.b.info("Successfully "+t)}catch(n){console.log(n),v.b.error("Problem "+t)}}}}),xr=Object(f.a)(pr.prototype,"markSeenInDB",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{let t=e;try{await G.markSeenInDB(t)}catch(a){console.log(a)}}}}),Mr=Object(f.a)(pr.prototype,"loadFeed",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async()=>{this.loadingInitial=!0;try{const e=await G.list(7,this.page),{feeds:t,feedCount:a}=e;Object(y.h)("loading feed",()=>{t.forEach(e=>{this.formatDate(e),this.feedRegistry.set(e.id,e)}),this.feedCount=a,this.loadingInitial=!1})}catch(e){Object(y.h)("load countries error",()=>{this.loadingInitial=!1}),console.log(e)}}}}),pr);var Rr,Ar,Fr,Nr,Dr,Ur,Tr,Lr,Hr,qr,Br;let Gr=(Rr=class{constructor(e){this.rootStore=void 0,Object(E.a)(this,"loadingPeople",Ar,this),Object(E.a)(this,"people",Fr,this),Object(E.a)(this,"peopleCount",Nr,this),Object(E.a)(this,"peopleRegistry",Dr,this),Object(E.a)(this,"page",Ur,this),Object(E.a)(this,"setPage",Tr,this),Object(E.a)(this,"predicate",Lr,this),Object(E.a)(this,"setPredicate",Hr,this),Object(E.a)(this,"cleanPeople",qr,this),Object(E.a)(this,"loadPeople",Br,this),this.rootStore=e,Object(y.g)(()=>this.predicate.keys(),()=>{this.page=0,this.peopleRegistry.clear(),this.loadPeople()})}get totalPages(){return Math.ceil(this.peopleCount/8)}get axiosParams(){const e=new URLSearchParams;return e.append("limit",String(8)),e.append("offset","".concat(this.page?8*this.page:0)),this.predicate.forEach((t,a)=>{e.append(a,t)}),e}get displayPeople(){return Array.from(this.peopleRegistry.values())}},Ar=Object(f.a)(Rr.prototype,"loadingPeople",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Fr=Object(f.a)(Rr.prototype,"people",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Nr=Object(f.a)(Rr.prototype,"peopleCount",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dr=Object(f.a)(Rr.prototype,"peopleRegistry",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Ur=Object(f.a)(Rr.prototype,"page",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(f.a)(Rr.prototype,"totalPages",[y.c],Object.getOwnPropertyDescriptor(Rr.prototype,"totalPages"),Rr.prototype),Tr=Object(f.a)(Rr.prototype,"setPage",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.page=e}}}),Lr=Object(f.a)(Rr.prototype,"predicate",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Hr=Object(f.a)(Rr.prototype,"setPredicate",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{this.predicate.clear(),"all"!==e&&this.predicate.set(e,t)}}}),Object(f.a)(Rr.prototype,"axiosParams",[y.c],Object.getOwnPropertyDescriptor(Rr.prototype,"axiosParams"),Rr.prototype),Object(f.a)(Rr.prototype,"displayPeople",[y.c],Object.getOwnPropertyDescriptor(Rr.prototype,"displayPeople"),Rr.prototype),qr=Object(f.a)(Rr.prototype,"cleanPeople",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async()=>{Object(y.h)(()=>{this.peopleRegistry.clear(),this.page=0})}}}),Br=Object(f.a)(Rr.prototype,"loadPeople",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async()=>{this.loadingPeople=!0;try{const e=await U.listPeople(this.axiosParams),{people:t,peopleCount:a}=e;Object(y.h)(()=>{this.loadingPeople=!1,t.forEach(e=>{e.id=Object(yn.a)(),this.peopleRegistry.set(e.id,e)}),this.peopleCount=a})}catch(e){Object(y.h)(()=>{this.loadingPeople=!1}),v.b.error("Problem loading members")}}}}),Rr);var Vr,Yr,Wr,Kr,Zr,$r,_r,Jr,Qr,Xr,ei,ti,ai,ni,ri,ii,oi,li,ci,si,mi,ui,di,bi,hi,pi,gi,yi,Ei,fi,Oi,ji,vi,wi;let Ci=(Vr=y.f.ref,Yr=class{constructor(e){this.rootStore=void 0,Object(E.a)(this,"username",Wr,this),Object(E.a)(this,"senderPhotoUrl",Kr,this),Object(E.a)(this,"messageRegistry",Zr,this),Object(E.a)(this,"loadingInitial",$r,this),Object(E.a)(this,"recipientUsername",_r,this),Object(E.a)(this,"messageThreadId",Jr,this),Object(E.a)(this,"messageContent",Qr,this),Object(E.a)(this,"messageThreadsCount",Xr,this),Object(E.a)(this,"page",ei,this),Object(E.a)(this,"totalPages",ti,this),Object(E.a)(this,"listOfMessagesInFocus",ai,this),Object(E.a)(this,"index",ni,this),Object(E.a)(this,"hubConnection",ri,this),Object(E.a)(this,"otherUser",ii,this),Object(E.a)(this,"setOtherUser",oi,this),Object(E.a)(this,"cleanOtherUser",li,this),Object(E.a)(this,"createHubConnection",ci,this),Object(E.a)(this,"stopHubConnection",si,this),Object(E.a)(this,"addReply",mi,this),Object(E.a)(this,"deleteSingleMessage",ui,this),Object(E.a)(this,"editMessage",di,this),Object(E.a)(this,"loadMessages",bi,this),Object(E.a)(this,"setPage",hi,this),Object(E.a)(this,"setInitialView",pi,this),Object(E.a)(this,"setView",gi,this),Object(E.a)(this,"setViewUponNewMessage",yi,this),Object(E.a)(this,"markReadInDB",Ei,this),Object(E.a)(this,"setRecipient",fi,this),Object(E.a)(this,"setMessageThreadId",Oi,this),Object(E.a)(this,"setReply",ji,this),Object(E.a)(this,"setUsername",vi,this),Object(E.a)(this,"sendMessage",wi,this),this.rootStore=e}get messagesByThreadId(){return this.groupMessagesByThreadId(Array.from(this.messageRegistry.values()))}groupMessagesByThreadId(e){const t=e.sort((e,t)=>Date.parse(t.dateSent)-Date.parse(e.dateSent));return Object.entries(t.reduce((e,t)=>{const a=t.privateMessageThreadId;return e[a]=e[a]?[...e[a],t]:[t],e},{}))}resetViewAfterEdit(e){Object(y.h)(()=>{var t=this.listOfMessagesInFocus[1].findIndex(t=>t.id===e.id);this.listOfMessagesInFocus[1][t].content=e.content})}formatDate(e){var t;e.dateSent=null===(t=e.dateSent)||void 0===t?void 0:t.split(".")[0],e.dateSent=e.dateSent.replace("T"," ")}},Wr=Object(f.a)(Yr.prototype,"username",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Kr=Object(f.a)(Yr.prototype,"senderPhotoUrl",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zr=Object(f.a)(Yr.prototype,"messageRegistry",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),$r=Object(f.a)(Yr.prototype,"loadingInitial",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_r=Object(f.a)(Yr.prototype,"recipientUsername",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Jr=Object(f.a)(Yr.prototype,"messageThreadId",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qr=Object(f.a)(Yr.prototype,"messageContent",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xr=Object(f.a)(Yr.prototype,"messageThreadsCount",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ei=Object(f.a)(Yr.prototype,"page",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ti=Object(f.a)(Yr.prototype,"totalPages",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ai=Object(f.a)(Yr.prototype,"listOfMessagesInFocus",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),ni=Object(f.a)(Yr.prototype,"index",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ri=Object(f.a)(Yr.prototype,"hubConnection",[Vr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ii=Object(f.a)(Yr.prototype,"otherUser",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),oi=Object(f.a)(Yr.prototype,"setOtherUser",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{Object(y.h)(()=>{this.otherUser=e})}}}),li=Object(f.a)(Yr.prototype,"cleanOtherUser",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{Object(y.h)(()=>{this.otherUser=""})}}}),Object(f.a)(Yr.prototype,"messagesByThreadId",[y.c],Object.getOwnPropertyDescriptor(Yr.prototype,"messagesByThreadId"),Yr.prototype),ci=Object(f.a)(Yr.prototype,"createHubConnection",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.hubConnection=(new xe.b).withUrl("/message?user="+e,{skipNegotiation:!0,transport:xe.a.WebSockets,accessTokenFactory:()=>this.rootStore.commonStore.token}).withAutomaticReconnect().configureLogging(xe.c.Information).build(),this.hubConnection.start().catch(e=>console.log("Error establishing connection: ",e)),this.hubConnection.on("ReceiveMessage",e=>{Object(y.h)(()=>{this.messageRegistry.set(e.id,e)}),this.setViewUponNewMessage(e.privateMessageThreadId)}),this.hubConnection.on("MessageDeleted",e=>{Object(y.h)(()=>{this.messageRegistry.delete(e.id)}),this.setView(e.privateMessageThreadId)}),this.hubConnection.on("MessageEdited",e=>{this.resetViewAfterEdit(e)})}}}),si=Object(f.a)(Yr.prototype,"stopHubConnection",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{var e;null===(e=this.hubConnection)||void 0===e||e.stop()}}}),mi=Object(f.a)(Yr.prototype,"addReply",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async()=>{let e={recipientUsername:this.recipientUsername,content:this.messageContent,privateMessageThreadId:this.messageThreadId,username:this.username};try{await this.hubConnection.invoke("SendMessage",e)}catch(t){console.log(t)}}}}),ui=Object(f.a)(Yr.prototype,"deleteSingleMessage",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async(e,t,a)=>{let n={id:e,privateMessageThreadId:t,recipientUsername:a};try{await this.hubConnection.invoke("DeleteMessage",n)}catch(r){console.log(r)}}}}),di=Object(f.a)(Yr.prototype,"editMessage",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async(e,t,a,n,r)=>{let i={id:e,privateMessageThreadId:t,content:a,recipientUsername:n,senderPhotoUrl:r};try{await this.hubConnection.invoke("EditMessage",i)}catch(o){console.log(o)}}}}),bi=Object(f.a)(Yr.prototype,"loadMessages",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async()=>{this.loadingInitial=!0;try{const e=await Y.list(10,this.page),{privateMessages:t,privateMessageThreadsCount:a,totalPages:n}=e;Object(y.h)("loading messages",()=>{t.forEach(e=>{this.formatDate(e),this.messageRegistry.set(e.id,e)}),this.messageThreadsCount=a,this.totalPages=n,this.loadingInitial=!1})}catch(e){Object(y.h)("load messages error",()=>{this.loadingInitial=!1}),console.log(e)}}}}),hi=Object(f.a)(Yr.prototype,"setPage",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.page=e}}}),pi=Object(f.a)(Yr.prototype,"setInitialView",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{Object(y.h)(()=>{this.listOfMessagesInFocus=this.messagesByThreadId[0]})}}}),gi=Object(f.a)(Yr.prototype,"setView",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>(Object(y.h)(()=>{this.index=this.messagesByThreadId.findIndex(t=>t[0]===e),this.listOfMessagesInFocus=this.messagesByThreadId[this.index]}),this.listOfMessagesInFocus)}}),yi=Object(f.a)(Yr.prototype,"setViewUponNewMessage",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.index=this.messagesByThreadId.findIndex(t=>t[0]===e),Object(y.h)(()=>{this.listOfMessagesInFocus[0]===e&&(this.listOfMessagesInFocus=this.messagesByThreadId[this.index])})}}}),Ei=Object(f.a)(Yr.prototype,"markReadInDB",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{try{await Y.markRead(e),Object(y.h)(()=>{var e;null===(e=this.listOfMessagesInFocus)||void 0===e||e[1].forEach(e=>{null===e.dateRead&&(e.dateRead=(new Date).toISOString())})})}catch(t){console.log(t)}}}}),fi=Object(f.a)(Yr.prototype,"setRecipient",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{this.recipientUsername=e}}}),Oi=Object(f.a)(Yr.prototype,"setMessageThreadId",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.messageThreadId=e}}}),ji=Object(f.a)(Yr.prototype,"setReply",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.messageContent=e}}}),vi=Object(f.a)(Yr.prototype,"setUsername",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.username=e}}}),wi=Object(f.a)(Yr.prototype,"sendMessage",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{try{await Y.create(e),Object(y.h)("loading message ",()=>{this.rootStore.modalStore.closeModal()}),rm.push("/privateMessages")}catch(t){Object(y.h)("load thread error",()=>{}),console.log(t)}}}}),Yr);var Si,ki,Pi,Ii,xi,Mi,zi,Ri,Ai,Fi,Ni,Di;let Ui=(Si=y.f.ref,ki=class{constructor(e){this.rootStore=void 0,this.privateMessageStore=void 0,Object(E.a)(this,"hubConnection",Pi,this),Object(E.a)(this,"onlineUsersSource",Ii,this),Object(E.a)(this,"onlineUsers",xi,this),Object(E.a)(this,"counterUnread",Mi,this),Object(E.a)(this,"counterUnreadItems",zi,this),Object(E.a)(this,"unreadItems",Ri,this),Object(E.a)(this,"markReadNavbar",Ai,this),Object(E.a)(this,"getUnreadItems",Fi,this),Object(E.a)(this,"createHubConnection",Ni,this),Object(E.a)(this,"stopHubConnection",Di,this),this.rootStore=e,this.privateMessageStore=e.privateMessageStore}get unreadIncomingMessages(){return this.unreadItems.length}},Pi=Object(f.a)(ki.prototype,"hubConnection",[Si],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ii=Object(f.a)(ki.prototype,"onlineUsersSource",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),xi=Object(f.a)(ki.prototype,"onlineUsers",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Mi=Object(f.a)(ki.prototype,"counterUnread",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),zi=Object(f.a)(ki.prototype,"counterUnreadItems",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Set}}),Ri=Object(f.a)(ki.prototype,"unreadItems",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(f.a)(ki.prototype,"unreadIncomingMessages",[y.c],Object.getOwnPropertyDescriptor(ki.prototype,"unreadIncomingMessages"),ki.prototype),Ai=Object(f.a)(ki.prototype,"markReadNavbar",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async e=>{Object(y.h)(()=>{const t=this.unreadItems.indexOf(e);t>-1&&this.unreadItems.splice(t,1)})}}}),Fi=Object(f.a)(ki.prototype,"getUnreadItems",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return async()=>{try{const e=await Y.checkUnread();Object(y.h)(()=>{e&&(this.unreadItems=e)})}catch(e){console.log(e)}}}}),Ni=Object(f.a)(ki.prototype,"createHubConnection",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{this.hubConnection=(new xe.b).withUrl("/presence",{accessTokenFactory:()=>this.rootStore.commonStore.token}).withAutomaticReconnect().configureLogging(xe.c.Information).build(),this.hubConnection.start().catch(e=>console.log("Error establishing connection: ",e)),this.hubConnection.on("GetOnlineUsers",e=>{Object(y.h)(()=>{this.onlineUsers=e})}),this.hubConnection.on("NewMessageReceived",e=>{Object(y.h)(()=>{-1===this.unreadItems.indexOf(e.senderUsername)&&this.unreadItems.push(e.senderUsername),this.privateMessageStore.messageRegistry.set(e.id,e)})})}}}),Di=Object(f.a)(ki.prototype,"stopHubConnection",[y.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{var e;null===(e=this.hubConnection)||void 0===e||e.stop().catch(e=>console.log(e))}}}),ki);Object(y.d)({enforceActions:"always"});const Ti=Object(n.createContext)(new class{constructor(){this.activityStore=void 0,this.userStore=void 0,this.commonStore=void 0,this.modalStore=void 0,this.profileStore=void 0,this.forumPostStore=void 0,this.motofyStore=void 0,this.mechanicStore=void 0,this.brandStore=void 0,this.productStore=void 0,this.commentStore=void 0,this.countryStore=void 0,this.feedStore=void 0,this.peopleStore=void 0,this.privateMessageStore=void 0,this.presenceStore=void 0,this.activityStore=new Me(this),this.userStore=new zt(this),this.commonStore=new Ge(this),this.modalStore=new Ve(this),this.profileStore=new vt(this),this.forumPostStore=new oa(this),this.motofyStore=new Da(this),this.mechanicStore=new En(this),this.brandStore=new kn(this),this.productStore=new Xn(this),this.commentStore=new lr(this),this.countryStore=new br(this),this.feedStore=new zr(this),this.peopleStore=new Gr(this),this.privateMessageStore=new Ci(this),this.presenceStore=new Ui(this)}});var Li=a(829),Hi=a(158);var qi=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{user:t,logout:a,isLoggedIn:i}=e.userStore,{unreadIncomingMessages:o,getUnreadItems:c}=e.presenceStore,{loadFeed:m,unseenFeedItems:y,feedByDate:E,markSeenInDB:f,feedMounted:O}=e.feedStore,{setInitialView:j}=e.privateMessageStore,{createHubConnection:v,stopHubConnection:w}=e.feedStore,{i18n:C,t:S}=Object(Li.a)(["navbar"]),k=Object(n.useRef)();let P=Object(l.g)();const I=()=>{var e=k.current.parentNode,t=k.current;e.classList.remove("active"),e.classList.remove("open"),t.classList.remove("active"),t.classList.remove("open")};Object(n.useEffect)(()=>{i&&(k.current.onclick=function(e){var t=k.current.parentNode;this.classList.contains("active")?(this.classList.remove("active"),t.classList.remove("open")):(this.classList.add("active"),t.classList.add("open")),e.preventDefault()},v())},[i,v]),Object(n.useEffect)(()=>{var e;return(null===(e=localStorage.getItem("i18nextLng"))||void 0===e?void 0:e.length)>2&&Hi.a.changeLanguage("en"),i&&(c(),m()),()=>{w()}},[c,m,i,w]);const x=e=>{C.changeLanguage(e),I()},M=()=>{I(),(async()=>{let e=[];for(var t=0,a=E.length;t<a;t++)!1===E[t][1][0].isSeen&&e.push(E[t][1][0].id),f(e)})(),O?P.go(0):P.push("/feed")};return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,null,r.a.createElement(d.a,{style:{textAlign:"center"},fixed:"top",stackable:!0,inverted:!0,pointing:!0},r.a.createElement(d.a.Item,{as:u.b,exact:!0,to:"/"},r.a.createElement("img",{src:"/assets/logo.png",alt:"logo",style:{marginRight:"10"},onClick:I}),"Motoranza"),i&&r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a.Item,{exact:!0,as:u.b,to:"/activities",onClick:I},S("motorcycle diaries")),r.a.createElement(d.a.Item,{exact:!0,as:u.b,to:"/gallery",onClick:I},"Motofy!"),r.a.createElement(d.a.Item,{exact:!0,as:u.b,onClick:I,to:"/forum"}," ",S("forum")),r.a.createElement(d.a.Item,{name:"mechanics",exact:!0,as:u.b,to:"/mechanics",onClick:I},S("mechanics")),r.a.createElement(d.a.Item,{name:"market",value:"Market",as:u.a,to:"/shop",onClick:I}," ",S("market")),r.a.createElement(d.a.Item,null,r.a.createElement(b.a,{text:S("social"),className:"icon",floating:!0,labeled:!0},r.a.createElement(b.a.Menu,null,r.a.createElement(b.a.Item,{name:"people",as:u.a,onClick:I,to:"/people",icon:"users",text:S("people")}),r.a.createElement(b.a.Item,{name:"people",onClick:I,as:u.a,to:"/privateMessages",icon:"envelope outline",text:S("private messages")}))),o>0&&r.a.createElement(h.a,{as:u.a,to:"/privateMessages",color:"orange",onClick:()=>(I(),void j())},o)),r.a.createElement("div",{className:"right menu"},r.a.createElement(d.a.Item,null,r.a.createElement(b.a,{text:S("new"),className:"icon",floating:!0,labeled:!0},r.a.createElement(b.a.Menu,null,r.a.createElement(p.a,{size:"mini",position:"right center",trigger:r.a.createElement(b.a.Item,{text:S("motorcycle diary"),value:"MotoDiary",as:u.a,onClick:I,to:"/createDiary"}),content:S("motorcycle diary pop")}),r.a.createElement(p.a,{size:"mini",position:"right center",trigger:r.a.createElement(b.a.Item,{text:"Motofy!",value:"Motofy",as:u.a,onClick:I,to:"/galleryForm"}),content:S("motofy pop")}),r.a.createElement(p.a,{size:"mini",position:"right center",trigger:r.a.createElement(b.a.Item,{text:S("mechanic shop"),value:"Mecanic",as:u.a,onClick:I,to:"/mechanicForm"}),content:S("mechanic shop pop")}),r.a.createElement(p.a,{size:"mini",position:"right center",trigger:r.a.createElement(b.a.Item,{text:S("forumpost"),value:"Forum",as:u.a,onClick:I,to:"/forumform"}),content:S("forumpost pop")}),r.a.createElement(p.a,{size:"mini",position:"right center",trigger:r.a.createElement(b.a.Item,{text:S("product to sell"),value:"Product",as:u.a,onClick:I,to:"/productform"}),content:S("product to sell pop")})))),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a.Item,{position:"right"},r.a.createElement(b.a,{pointing:"top left",text:S("Select language")},r.a.createElement(b.a.Menu,null,r.a.createElement(b.a.Item,{text:S("English"),onClick:()=>x("en"),flag:"uk"}),r.a.createElement(b.a.Item,{text:S("Italian"),onClick:()=>x("it"),flag:"italy"}),r.a.createElement(b.a.Item,{text:S("German"),onClick:()=>x("de"),flag:"germany"}),r.a.createElement(b.a.Item,{text:S("French"),onClick:()=>x("fr"),flag:"france"})))),r.a.createElement(d.a.Item,{position:"right"},r.a.createElement(g.a,{avatar:!0,spaced:"right",src:t.image||"/assets/user.png"}),r.a.createElement(b.a,{pointing:"top left",text:t.displayName},r.a.createElement(b.a.Menu,null,r.a.createElement(b.a.Item,{as:u.a,to:"/profile/".concat(t.userName),text:S("my profile"),onClick:I,icon:"user"}),r.a.createElement(b.a.Item,{name:"feed",as:u.a,onClick:I,to:"/feed",icon:"info",text:"Feed"}),r.a.createElement(b.a.Item,{onClick:a,text:S("logout"),icon:"power"}))),y>0&&r.a.createElement(h.a,{color:"orange",style:{cursor:"pointer"},onClick:()=>M()},y)))),r.a.createElement("div",{ref:k,className:"hamburger "},r.a.createElement("span",{className:"hamburger-bun"}),r.a.createElement("span",{className:"hamburger-patty"}),r.a.createElement("span",{className:"hamburger-bun"}))))))}),Bi=a(407),Gi=a(808),Vi=a(809),Yi=a(55),Wi=a.n(Yi),Ki=a(406),Zi=a(806),$i=a(807),_i=a(90),Ji=a(207);var Qi=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{predicate:t,setPredicate:a}=e.activityStore,[i,o]=Object(n.useState)(!1),{t:l}=Object(Li.a)(["diaries"]),c={textAlign:"center"};return r.a.createElement(Ki.a,{raised:!0},r.a.createElement(d.a,{vertical:!0,size:"large",style:{width:"100%"}},!i&&r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a.Item,{active:t.has("search")},r.a.createElement(Zi.a,{icon:"search",placeholder:l("Search all"),onKeyDown:e=>(e=>{"Enter"===e.key&&(a("search",e.target.value),e.target.value="")})(e)})),r.a.createElement($i.a,{horizontal:!0,content:l("or choose from built in filters")})),!i&&r.a.createElement(d.a.Item,{active:0===t.size,onClick:()=>a("all","true"),color:"blue",name:"all",content:l("Active Diaries"),style:c}),!i&&r.a.createElement(d.a.Item,{active:t.has("isCompleted"),onClick:()=>a("isCompleted","true"),color:"blue",name:"isCompleted",content:l("Completed Diaries"),style:c}),!i&&r.a.createElement(d.a.Item,{active:t.has("isHost"),onClick:()=>a("isHost","true"),color:"blue",name:"host",content:l("My own"),style:c}),!i&&r.a.createElement(d.a.Item,{active:t.has("isGoing"),onClick:()=>a("isGoing","true"),color:"blue",name:"username",content:l("Diaries I follow"),style:c}),!i&&r.a.createElement(d.a.Item,{active:t.has("iFollow"),onClick:()=>a("iFollow","true"),color:"blue",name:"country",content:l("By people I follow"),style:c}),r.a.createElement(d.a.Item,{active:i,color:"blue",content:i?r.a.createElement("span",null,r.a.createElement(_i.a,{name:"arrow left"}),l("Go back to built-in filters")):l("Select Diaries After A Date"),style:c,onClick:()=>{o(!i)}})),i&&r.a.createElement(Ji.Calendar,{onChange:e=>a("startDate",e),value:t.get("startDate")||new Date}))}),Xi=a(824),eo=a(265),to=a(795);var ao=()=>r.a.createElement(n.Fragment,null,r.a.createElement(Xi.a,{fluid:!0},r.a.createElement(eo.a.Group,null,r.a.createElement(eo.a,{style:{minHeight:110}},r.a.createElement(Xi.a,null,r.a.createElement(Xi.a.Header,{image:!0},r.a.createElement(Xi.a.Line,null),r.a.createElement(Xi.a.Line,null)),r.a.createElement(Xi.a.Paragraph,null,r.a.createElement(Xi.a.Line,null)))),r.a.createElement(eo.a,null,r.a.createElement(Xi.a,null,r.a.createElement(Xi.a.Line,null),r.a.createElement(Xi.a.Line,null))),r.a.createElement(eo.a,{secondary:!0,style:{minHeight:70}}),r.a.createElement(eo.a,{clearing:!0},r.a.createElement(to.a,{disabled:!0,color:"blue",fluid:!0,content:"View"})))));var no=()=>{const e=Object(n.useContext)(Ti),{setPredicate:t}=e.activityStore,{closeModal:a}=e.modalStore,{t:i}=Object(Li.a)(["modals"]);return r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(Zi.a,{style:{width:"100%"},icon:"search",placeholder:i("Search all"),onKeyDown:e=>(e=>{"Enter"===e.key&&(t("search",e.target.value),e.target.value="",a())})(e)})))};var ro=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{info:t}=e.activityStore;return r.a.createElement("div",{className:"mobileInfo"},t.toUpperCase())});var io=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{predicate:t,setPredicate:a,setInfo:i}=e.activityStore,{openModal:o}=e.modalStore,{t:l}=Object(Li.a)(["mobile-info"]);Object(n.useEffect)(()=>{i(l("Active diaries"))},[i,l]);const c=()=>{switch(t.keys().next().value){case"isCompleted":i(l("Completed diaries"));break;case"isGoing":i(l("Diaries I Follow"));break;case"isHost":i(l("My diaries"));break;case"calendar":i(l("Search diaries"));break;default:i(l("Active diaries"))}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{fluid:!0,widths:5,style:{top:"200px"}},r.a.createElement(d.a.Item,{active:0===t.size,onClick:()=>{a("all","true"),c()},color:"blue",icon:"home"}),r.a.createElement(d.a.Item,{active:t.has("isCompleted"),onClick:()=>{a("isCompleted","true"),c()},color:"blue",icon:"hourglass end"}),r.a.createElement(d.a.Item,{active:t.has("isGoing"),onClick:()=>{a("isGoing","true"),c()},color:"blue",icon:"eye"}),r.a.createElement(d.a.Item,{active:t.has("isHost"),onClick:()=>{a("isHost","true"),c()},color:"blue",icon:"user circle"}),r.a.createElement(d.a.Item,{active:t.has("calendar"),onClick:()=>{a("calendar","true"),o(r.a.createElement(no,null)),c()},color:"blue",icon:"search"})),r.a.createElement(ro,null))}),oo=a(820),lo=a(822),co=a(812),so=a(819);const mo={borderColor:"green",borderWidth:2};var uo=({attendees:e})=>r.a.createElement(so.a,{horizontal:!0},e.map(e=>r.a.createElement(so.a.Item,{key:e.username},r.a.createElement(p.a,{header:e.displayName,trigger:r.a.createElement(g.a,{size:"mini",circular:!0,src:e.image||"/assets/user.png",bordered:!0,style:e.following?mo:null})}))));var bo=({activity:e})=>{const{t:t}=Object(Li.a)(["diaries"]),a=e.attendees.filter(e=>e.isHost)[0],n=t("when"),i=t("starting_point"),o=t("destination"),l=[{key:"when",title:n,content:["On "+Object(co.a)(e.date,"MMMM d yyyy h:mm:a")].join(" ")},{key:"starting_point",title:i,content:["In "+e.city+", "+e.departure].join(" ")},{key:"destination",title:o,content:[e.destination]}];return r.a.createElement(eo.a.Group,{raised:!0},r.a.createElement(eo.a,null,r.a.createElement(oo.a.Group,null,r.a.createElement(oo.a,null,r.a.createElement(oo.a.Image,{size:"tiny",circular:!0,src:a.image||"/assets/user.png",style:{marginBottom:3}}),r.a.createElement(oo.a.Content,{verticalAlign:"middle",style:{textAlign:"center"}},r.a.createElement(oo.a.Header,{as:u.a,to:"/activities/".concat(e.id)},r.a.createElement("h2",null,e.title)),r.a.createElement(oo.a.Meta,null,"by"," ",r.a.createElement(u.a,{to:"/profile/".concat(a.username)}," ",a.displayName)))))),r.a.createElement(eo.a,null,r.a.createElement(lo.a,{fluid:!0,panels:l,styled:!0,exclusive:!1})),r.a.createElement(eo.a,{clearing:!0},r.a.createElement(oo.a.Group,null,r.a.createElement(oo.a.Description,{as:u.a,to:"/activities/".concat(e.id)},r.a.createElement("span",null,e.description.substring(0,60))," ",r.a.createElement("span",null,"...see more")))),r.a.createElement(eo.a,{secondary:!0},r.a.createElement(uo,{attendees:e.attendees})),r.a.createElement(eo.a,{secondary:!0},r.a.createElement(to.a,{as:u.a,to:"/activities/".concat(e.id),content:t("Check This Diary"),color:"blue",fluid:!0})))};var ho=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{activitiesByDate:t}=e.activityStore;return r.a.createElement(n.Fragment,null,t.map(([e,t])=>r.a.createElement(n.Fragment,{key:e},r.a.createElement(oo.a.Group,{divided:!0},t.map(e=>r.a.createElement(bo,{key:e.id,activity:e}))))))});var po=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{loadActivities:t,loadingInitial:a,setPage:i,page:o,totalPages:l}=e.activityStore,[c,s]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{t()},[t]),r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{mobile:16,tablet:16,className:"mobile only"},r.a.createElement(io,null)),r.a.createElement(Bi.a.Column,{computer:11,mobile:16},a&&0===o?r.a.createElement(ao,null):r.a.createElement(Wi.a,{pageStart:0,loadMore:()=>{s(!0),i(o+1),t().then(()=>s(!1))},hasMore:!c&&o+1<l,initialLoad:!1},r.a.createElement(ho,null))),r.a.createElement(Bi.a.Column,{width:5,className:"mobile hidden"},r.a.createElement(Gi.a,{style:{marginRight:30,position:"fixed"}},r.a.createElement(Qi,null))),r.a.createElement(Bi.a.Column,{width:11},r.a.createElement(Vi.a,{active:c})))}),go=a(828),yo=a(65),Eo=a(15),fo=a(12),Oo=a(813),jo=a(825),vo=function(e){var t=e.error,a=e.text;return r.a.createElement(jo.a,{error:!0},r.a.createElement(jo.a.Header,null,t.statusText),t.data&&Object.keys(t.data.errors).length>0&&r.a.createElement(jo.a.List,null,Object.values(t.data.errors).flat().map((function(e,t){return r.a.createElement(jo.a.Item,{key:t},e)}))),a&&r.a.createElement(jo.a.Content,{content:a}))};var wo=({input:e,width:t,type:a,placeholder:n,meta:{touched:i,error:o}})=>r.a.createElement(Oo.a.Field,{error:i&&!!o,type:a,width:t},r.a.createElement("input",Object.assign({},e,{placeholder:n})),i&&o&&r.a.createElement(h.a,{basic:!0,color:"red"},o));var Co=()=>{const e=Object(n.useContext)(Ti),{register:t}=e.userStore,{addFeedItem:a}=e.feedStore,{t:i}=Object(Li.a)(["forms"]),o=Object(fo.createValidator)(e=>t=>{if(t&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t))return e},i("Invalid email address")),l=Object(fo.combineValidators)({username:Object(fo.isRequired)({message:i("Username is required")}),displayName:Object(fo.isRequired)({message:i("Display Name is required")}),password:Object(fo.composeValidators)(Object(fo.isRequired)({message:i("Password is required")}),Object(fo.matchesPattern)(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/)({message:i("Password requires a minimum of eight characters, at least one uppercase letter, one lowercase letter, one number and one special character")}))(),email:Object(fo.composeValidators)(Object(fo.isRequired)({message:i("Email is required")}),o({message:i("Invalid email address")}))(),confirmPassword:Object(fo.composeValidators)(Object(fo.isRequired)({message:i("Confirmation of password is required")}),Object(fo.matchesField)("password","confirmPassword")({message:i("Passwords do not match")}))()});return r.a.createElement(Eo.b,{onSubmit:e=>t(e).then(()=>a(Object(yn.a)(),"Registered",e.username)).catch(e=>({[yo.a]:e})),validate:l,render:({handleSubmit:e,submitting:t,submitError:a,invalid:n,pristine:o,dirtySinceLastSubmit:l})=>r.a.createElement(Oo.a,{onSubmit:e,error:a},r.a.createElement(go.a,{as:"h2",content:i("Sign up to Motoranza"),color:"teal",textAlign:"center"}),r.a.createElement(Eo.a,{name:"username",component:wo,placeholder:i("Username")}),r.a.createElement(Eo.a,{name:"displayName",component:wo,placeholder:i("Display Name")}),r.a.createElement(Eo.a,{name:"email",component:wo,placeholder:i("Email")}),r.a.createElement(Eo.a,{name:"password",component:wo,placeholder:i("Password"),type:"password"}),r.a.createElement(Eo.a,{name:"confirmPassword",component:wo,placeholder:i("Confirm Password"),type:"password"}),a&&!l&&r.a.createElement(vo,{error:a}),r.a.createElement(to.a,{disabled:n&&!l||o,loading:t,color:"teal",content:i("Register"),fluid:!0}))})};var So=()=>{const e=Object(n.useContext)(Ti),{handleForgottenPassword:t}=e.userStore,{t:a}=Object(Li.a)(["forms"]),i=Object(fo.createValidator)(e=>t=>{if(t&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t))return e},a("Invalid email address")),o=Object(fo.combineValidators)({email:Object(fo.composeValidators)(Object(fo.isRequired)({message:a("Email is required")}),i({message:a("Invalid email address")}))()});return r.a.createElement(Eo.b,{onSubmit:e=>t(e).catch(e=>({[yo.a]:e})),validate:o,render:({handleSubmit:e,submitting:t,invalid:n,pristine:i})=>r.a.createElement(Oo.a,{onSubmit:e,autoComplete:"off"},r.a.createElement(go.a,{as:"h2",content:a("Reset password"),color:"teal",textAlign:"center"}),r.a.createElement(Eo.a,{name:"email",component:wo,placeholder:a("Email")}),r.a.createElement(to.a,{disabled:n||i,loading:t,color:"teal",content:a("Send me the reset link"),fluid:!0}))})};var ko=()=>{const e=Object(n.useContext)(Ti),{login:t}=e.userStore,{openModal:a,setSize:i,closeModal:o}=e.modalStore,{t:l}=Object(Li.a)(["forms"]),c=Object(fo.combineValidators)({email:Object(fo.isRequired)({message:l("Email is required")}),password:Object(fo.isRequired)({message:l("Password is required")})});return r.a.createElement(r.a.Fragment,null,r.a.createElement(Eo.b,{onSubmit:e=>t(e).catch(e=>({[yo.a]:e})),validate:c,render:({handleSubmit:e,submitting:t,submitError:a,invalid:n,pristine:i,dirtySinceLastSubmit:o})=>r.a.createElement(Oo.a,{onSubmit:e,error:a,autoComplete:"off"},r.a.createElement(go.a,{as:"h2",content:l("Login to Motoranza"),color:"teal",textAlign:"center"}),r.a.createElement(Eo.a,{name:"email",component:wo,placeholder:l("Email")}),r.a.createElement(Eo.a,{name:"password",component:wo,placeholder:l("Password"),type:"password"}),a&&!o&&r.a.createElement(vo,{error:a,text:l("Invalid email address or password")}),r.a.createElement(to.a,{disabled:n&&!o||i,loading:t,color:"teal",content:l("Login"),fluid:!0}))}),r.a.createElement("div",{className:"ui two buttons",style:{marginTop:"1rem"}},r.a.createElement(to.a,{basic:!0,color:"teal",onClick:()=>{o(),i("mini"),a(r.a.createElement(So,null))}},l("Forgot your password?")),r.a.createElement(to.a,{color:"teal",onClick:()=>{o(),i("mini"),a(r.a.createElement(Co,null))}},l("Don't have an account yet? Sign Up!"))))};a(673);var Po=()=>{const e=window.localStorage.getItem("jwt"),t=Object(n.useContext)(Ti),{isLoggedIn:a,user:i}=t.userStore,{openModal:o,setSize:l}=t.modalStore,{t:c}=Object(Li.a)("home");return r.a.createElement(eo.a,{inverted:!0,textAlign:"center",vertical:!0,className:"masthead"},r.a.createElement(s.a,{textAlign:"center",className:"home-container",style:{marginLeft:"auto",marginRight:"auto"}},r.a.createElement(go.a,{as:"h1",inverted:!0,style:{marginLeft:"5rem"}},r.a.createElement("span",{style:{color:"#FA5"}},"M"),"OTORANZA"),a&&i&&e?r.a.createElement(n.Fragment,null,r.a.createElement(go.a,{as:"h2",inverted:!0},c("welcome back to motoranza")," ",i.displayName),r.a.createElement(to.a,{as:u.a,to:"/activities",size:"huge",inverted:!0,className:"btn"},c("enter motoranza"))):r.a.createElement(n.Fragment,null,r.a.createElement(go.a,{as:"h2",inverted:!0,content:c("Welcome to Motoranza")}),r.a.createElement(to.a,{onClick:()=>{l("tiny"),o(r.a.createElement(ko,null))},to:"/login",size:"huge",inverted:!0,className:"usr-btn"},c("login to enter")),r.a.createElement(to.a,{onClick:()=>{l("tiny"),o(r.a.createElement(Co,null))},size:"huge",inverted:!0,className:"usr-btn"},c("register to enter")))))};class Io{constructor(e){this.id=void 0,this.title="",this.motorcycleBrandId="",this.motorcycleBrandName="",this.motorcycleBrandLogoUrl="",this.category="",this.description="",this.date=void 0,this.time=void 0,this.city="",this.countryName="",this.countryId="",this.departure="",this.destination="",e&&e.date&&(e.time=e.date),Object.assign(this,e)}}class xo{constructor(){this.id=void 0,this.mood="",this.body="",this.entryDate=void 0,this.locationCity="",this.locationCountry="",this.photoUrl=""}}var Mo=function(e){var t=e.input,a=e.width,n=e.rows,i=e.placeholder,o=e.meta,l=o.touched,c=o.error;return r.a.createElement(Oo.a.Field,{error:l&&!!c,width:a},r.a.createElement("textarea",Object.assign({rows:n},t,{placeholder:i})),l&&c&&r.a.createElement(h.a,{basic:!0,color:"red"},c))},zo=a(811);var Ro=({input:e,width:t,options:a,placeholder:n,meta:{touched:i,error:o}})=>r.a.createElement(Oo.a.Field,{error:i&&!!o,width:t},r.a.createElement(zo.a,{value:e.value,onChange:(t,a)=>e.onChange(a.value),placeholder:n,options:a,search:!0,selection:!0}),i&&o&&r.a.createElement(h.a,{basic:!0,color:"red"},o));const Ao=[{key:"cityRidding",text:"City Ridding",value:"City Ridding"},{key:"outdoors",text:"Outdoors",value:"Outdoors"},{key:"byTheSea",text:"By The Sea",value:"By The Sea"},{key:"mountains",text:"Mountains",value:"Mountains"},{key:"cruise",text:"Cruise",value:"Cruise"},{key:"offRoad",text:"Off Road",value:"Off Road"},{key:"racing",text:"Racing",value:"Racing"},{key:"outToLunch",text:"Out To Lunch",value:"Out To Lunch"},{key:"goToPlaces",text:"Go To Places",value:"Go To Places"},{key:"rockAndRoll",text:"Rock And Roll",value:"Rock And Roll"},{key:"heavyMetal",text:"Heavy Metal",value:"Heavy Metal"},{key:"gang",text:"Gang",value:"Gang"}];var Fo=a(210),No=function(e){var t=e.input,a=e.width,n=e.placeholder,i=e.date,o=void 0!==i&&i,l=e.time,c=void 0!==l&&l,s=e.meta,m=s.touched,u=s.error,d=Object(Fo.a)(e,["input","width","placeholder","date","time","meta"]);return r.a.createElement(Oo.a.Field,{error:m&&!!u,width:a},r.a.createElement(Ji.DateTimePicker,Object.assign({placeholder:n,value:t.value||null,onChange:t.onChange,onBlur:t.onBlur,onKeyDown:function(e){return e.preventDefault()},date:o,time:c},d)),m&&u&&r.a.createElement(h.a,{basic:!0,color:"red"},u))};var Do=Object(m.a)(({match:e,history:t})=>{const a=Object(n.useContext)(Ti),{createActivity:i,editActivity:o,submitting:l,loadActivity:c}=a.activityStore,{addFeedItem:s}=a.feedStore,{loadCountriesToSelect:m,countries:u}=a.countryStore,{loadBrandsToSelect:d,brands:b}=a.brandStore,[p,g]=Object(n.useState)(!1),{t:y}=Object(Li.a)(["forms"]),E=Object(fo.combineValidators)({title:Object(fo.isRequired)({message:y("Title is required")}),category:Object(fo.isRequired)({message:y("Category is required")}),description:Object(fo.composeValidators)(Object(fo.isRequired)({message:y("Description is required")}),Object(fo.hasLengthGreaterThan)(4)({message:y("Description needs to be at least 5 characters")}))(),countryName:Object(fo.isRequired)({message:y("Country is required")}),city:Object(fo.isRequired)({message:y("City is required")}),departure:Object(fo.isRequired)({message:y("Place of departure is required")}),destination:Object(fo.isRequired)({message:y("Place of destination is required")}),date:Object(fo.isRequired)({message:y("Date is required")}),time:Object(fo.isRequired)({message:y("Time is required")})}),[f,O]=Object(n.useState)(new Io),[j,v]=Object(n.useState)(!1);Object(n.useEffect)(()=>{d(),m(),e.params.id&&(g(!0),v(!0),c(e.params.id).then(e=>O(new Io(e))).finally(()=>v(!1)))},[d,c,e.params.id,m]);return r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:3}),r.a.createElement(Bi.a.Column,{computer:10,mobile:16},r.a.createElement(eo.a,{clearing:!0},r.a.createElement(Eo.b,{validate:E,initialValues:f,onSubmit:e=>{let t=Object(yn.a)();const a=((e,t)=>{const a=e.toISOString().split("T")[0],n=t.toISOString().split("T")[1];return new Date(a+"T"+n)})(e.date,e.time),{date:n,time:r,...l}=e;if(l.date=a,l.id)o(l);else{let e={...l,id:t,isHost:!0,isActive:!0,diaryEntries:[]};i(e),s(t,"Added Motocycle Diary")}},render:({handleSubmit:e,invalid:a,pristine:n})=>r.a.createElement(Oo.a,{onSubmit:e,loading:j},p&&r.a.createElement(h.a,{content:y("Title")}),r.a.createElement(Eo.a,{name:"title",placeholder:y("Title"),value:f.title,component:wo}),!p&&r.a.createElement(Eo.a,{name:"motorcycleBrandName",placeholder:y("Your motorcycyle brand"),options:b,component:Ro}),p&&r.a.createElement(h.a,{content:y("Description")}),r.a.createElement(Eo.a,{placeholder:y("Description"),name:"description",value:f.description,rows:3,component:Mo}),p&&r.a.createElement(h.a,{content:y("Category")}),r.a.createElement(Eo.a,{placeholder:y("Category"),name:"category",options:Ao,value:f.category,component:Ro}),p&&r.a.createElement(h.a,{content:y("Date and Time")}),r.a.createElement(Oo.a.Group,{widths:"equal"},r.a.createElement(Eo.a,{placeholder:y("Date"),component:No,name:"date",date:!0,value:f.date}),r.a.createElement(Eo.a,{component:No,name:"time",time:!0,placeholder:y("Time"),value:f.time})),p&&r.a.createElement(h.a,{content:y("Country")}),r.a.createElement(Eo.a,{placeholder:y("Country"),name:"countryName",options:u,component:Ro}),p&&r.a.createElement(h.a,{content:y("City")}),r.a.createElement(Eo.a,{placeholder:y("City"),name:"city",value:f.city,component:wo}),p&&r.a.createElement(h.a,{content:y("Departure/Starting Point")}),r.a.createElement(Eo.a,{name:"departure",placeholder:y("Departure/Starting Point"),value:f.departure,component:wo}),p&&r.a.createElement(h.a,{content:y("Destination")}),r.a.createElement(Eo.a,{placeholder:y("Destination"),name:"destination",value:f.destination,component:wo}),r.a.createElement(to.a,{loading:l,disabled:j||a||n,floated:"right",positive:!0,type:"submit",content:y("Submit")}),r.a.createElement(to.a,{onClick:f.id?()=>t.push("/activities/".concat(f.id)):()=>t.push("/activities"),disabled:j,floated:"right",type:"button",content:y("Cancel")}))}))),r.a.createElement(Bi.a.Column,{width:3}))});const Uo={borderColor:"green",borderWidth:2};var To=({embracers:e})=>r.a.createElement(so.a,{horizontal:!0},e.map(e=>r.a.createElement(so.a.Item,{key:e.username},r.a.createElement(p.a,{header:e.displayName,trigger:r.a.createElement(g.a,{size:"mini",circular:!0,src:e.image||"/assets/user.png",bordered:!0,style:e.following?Uo:null})}))));var Lo=Object(m.a)(({motofy:e})=>{const{t:t}=Object(Li.a)(["gallery"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(eo.a.Group,{raised:!0},r.a.createElement(eo.a,null,r.a.createElement(oo.a,null,r.a.createElement($i.a,{horizontal:!0},r.a.createElement(go.a,{as:"h4"},r.a.createElement(oo.a.Meta,null," ",e.name,", ",e.brandName))),r.a.createElement(oo.a.Group,null,r.a.createElement(u.a,{to:"/gallery/".concat(e.id)},r.a.createElement("img",{className:"ui centered big image rounded",src:e.photoUrl||"/assets/user.pn",alt:"Motofy!"}))),r.a.createElement($i.a,{horizontal:!0},r.a.createElement(go.a,{as:"h4"},t("Info"))),r.a.createElement(Bi.a,{style:{padding:"0",margin:"0",display:"flex",textAlign:"center",alignItems:"center"}},r.a.createElement(Bi.a.Row,null,r.a.createElement(Bi.a.Column,{computer:4,tablet:8,mobile:8},r.a.createElement(p.a,{header:e.brandName,className:"computer only",trigger:r.a.createElement(g.a,{size:"tiny",src:e.brandLogoUrl||"/assets/user.pn",centered:!0})})),r.a.createElement(Bi.a.Column,{computer:4,tablet:8,mobile:8},r.a.createElement(oo.a.Header,{as:u.a,to:"/gallery/".concat(e.id)},e.name),r.a.createElement(oo.a.Meta,null,e.city,", ",e.countryName)),r.a.createElement(Bi.a.Column,{computer:4,tablet:8,mobile:8},r.a.createElement(_i.a,{name:"motorcycle"})," ",e.model),r.a.createElement(Bi.a.Column,{computer:4,tablet:8,mobile:8},r.a.createElement(_i.a,{name:"road"})," ",e.numberOfKilometers," Km")))),r.a.createElement($i.a,{horizontal:!0},r.a.createElement(go.a,{as:"h4"},t("Embraced by"))),r.a.createElement(To,{embracers:e.embracers})),r.a.createElement(eo.a,{clearing:!0},r.a.createElement(to.a,{as:u.a,to:"/gallery/".concat(e.id),fluid:!0,content:t("View This ")+e.brandName,color:"blue"}))))});var Ho=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{motofiesByDate:t}=e.motofyStore;return r.a.createElement(oo.a.Group,{divided:!0},t.map(e=>r.a.createElement(n.Fragment,{key:e.id},r.a.createElement(Lo,{motofy:e}))))});var qo=({motofy:e,info:t})=>{const a=Object(n.useContext)(Ti),{closeModal:i}=a.modalStore,{setPredicate:o}=a.motofyStore;return r.a.createElement(eo.a.Group,null,r.a.createElement(eo.a,{attached:"top"},r.a.createElement(u.a,{to:"/gallery/".concat(e.id),onClick:()=>{i(),o("all","true")}},r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(go.a,{content:e.name,style:{fontSize:"2em",textAlign:"center"}})),r.a.createElement(Bi.a.Column,{width:16},r.a.createElement("img",{className:"ui centered massive image rounded",src:e.photoUrl,alt:e.name}),r.a.createElement(oo.a.Group,null,r.a.createElement(oo.a,null,r.a.createElement(oo.a.Content,{style:{textAlign:"center"}},r.a.createElement(oo.a.Description,null,e.model,",",r.a.createElement("p",null,e.brandName,", ",e.city,", ",e.countryName,","," "),e.yearOfProduction)))))))))};var Bo=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{predicate:t,setPredicate:a,mostEmbraced:i,highestRatedMotofy:o}=e.motofyStore,{openModal:l}=e.modalStore,{t:c}=Object(Li.a)(["gallery"]),s=e=>{switch(e){case"Most Embraced":l(r.a.createElement(qo,{motofy:i,info:e}));break;default:l(r.a.createElement(qo,{motofy:o,info:e}))}},m={textAlign:"center",cursor:"pointer"};return r.a.createElement(n.Fragment,null,r.a.createElement(d.a,{vertical:!0,size:"large",style:{width:"100%"}},r.a.createElement(d.a.Item,{active:t.has("search")},r.a.createElement(Zi.a,{icon:"search",placeholder:c("Search all"),onKeyDown:e=>(e=>{"Enter"===e.key&&(a("search",e.target.value),e.target.value="")})(e)})),r.a.createElement($i.a,{horizontal:!0,content:c("or choose from built in filters")}),r.a.createElement(d.a.Item,{active:0===t.size,onClick:()=>a("all","true"),color:"blue",name:"all",icon:"globe",content:c("All motofies"),style:m}),r.a.createElement(d.a.Item,{active:t.has("bestRated"),onClick:()=>a("bestRated","true"),color:"blue",name:"bestRated",icon:"hand spock",content:c("Best Rated"),style:m}),r.a.createElement(d.a.Item,{active:t.has("mostEmbraced"),onClick:()=>a("mostEmbraced","true"),color:"blue",name:"mostEmbraced",icon:"winner",content:c("Most Embraced"),style:m}),r.a.createElement(d.a.Item,{active:t.has("iEmbraced"),onClick:()=>a("iEmbraced","true"),color:"blue",name:"username",icon:"heart",content:c("I Embraced"),style:m}),r.a.createElement(d.a.Item,{active:t.has("iFollow"),onClick:()=>a("iFollow","true"),color:"blue",name:"country",content:c("By people I follow"),icon:"users",style:m}),r.a.createElement($i.a,{horizontal:!0,content:c("champs at the moment")}),r.a.createElement(d.a.Item,{style:m,content:c("Most Embraced"),icon:"chess queen",onClick:()=>s("Most Embraced")}),r.a.createElement(d.a.Item,{style:m,content:c("Highest Rated"),onClick:()=>s("Highest Rated"),icon:"chess king"})))});var Go=()=>{const e=Object(n.useContext)(Ti),{setPredicate:t}=e.motofyStore,{closeModal:a}=e.modalStore,{t:i}=Object(Li.a)(["modals"]);return r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(Zi.a,{style:{width:"100%"},icon:"search",placeholder:i("Search all"),onKeyDown:e=>(e=>{"Enter"===e.key&&(t("search",e.target.value),e.target.value="",a())})(e)})))};var Vo=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{info:t}=e.motofyStore;return r.a.createElement("div",{className:"mobileInfo"},t.toUpperCase())});var Yo=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{predicate:t,setPredicate:a,setInfo:i,mostEmbraced:o,highestRatedMotofy:l}=e.motofyStore,{openModal:c}=e.modalStore,{t:s}=Object(Li.a)(["mobile-info"]);Object(n.useEffect)(()=>{i(s("All motofies"))},[i,s]);const m=e=>{switch(e){case"Most Embraced":c(r.a.createElement(qo,{motofy:o,info:e}));break;default:c(r.a.createElement(qo,{motofy:l,info:e}))}},u=()=>{switch(t.keys().next().value){case"bestRated":i(s("Best rated"));break;case"mostEmbraced":i(s("Most embraced"));break;case"iEmbraced":i(s("Motofies I embraced"));break;case"iFollow":i(s("By people I follow"));break;case"mostEmbraces":i(s("Most Embraces"));break;case"highestRated":i(s("Highest Rated"));break;case"calendar":i(s("Search motofies"));break;default:i(s("All motofies"))}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{fluid:!0,widths:8},r.a.createElement(d.a.Item,{active:0===t.size,onClick:()=>{a("all","true"),u()},color:"blue",icon:"home"}),r.a.createElement(d.a.Item,{active:t.has("bestRated"),onClick:()=>{a("bestRated","true"),u()},color:"blue",icon:"winner"}),r.a.createElement(d.a.Item,{active:t.has("mostEmbraced"),onClick:()=>{a("mostEmbraced","true"),u()},color:"blue",icon:"thumbs up outline"}),r.a.createElement(d.a.Item,{active:t.has("iEmbraced"),onClick:()=>{a("iEmbraced","true"),u()},color:"blue",icon:"heart"}),r.a.createElement(d.a.Item,{active:t.has("iFollow"),onClick:()=>{a("iFollow","true"),u()},color:"blue",icon:"eye"}),r.a.createElement(d.a.Item,{active:t.has("mostEmbraces"),icon:"sun",onClick:()=>{m("Most Embraces"),a("mostEmbraces","true"),u()}}),r.a.createElement(d.a.Item,{active:t.has("highestRated"),icon:"moon",onClick:()=>{m(s("Highest Rated")),a("highestRated","true"),u()}}),r.a.createElement(d.a.Item,{active:t.has("calendar"),onClick:()=>{a("calendar","true"),c(r.a.createElement(Go,null)),u()},color:"blue",icon:"search"})),r.a.createElement(Vo,null))});var Wo=()=>r.a.createElement(n.Fragment,null,r.a.createElement(Xi.a,{fluid:!0},r.a.createElement(eo.a.Group,null,r.a.createElement(eo.a,{style:{minHeight:110}},r.a.createElement(Xi.a,null,r.a.createElement(Xi.a.Header,{image:!0},r.a.createElement(Xi.a.Line,null),r.a.createElement(Xi.a.Line,null)),r.a.createElement(Xi.a.Paragraph,null,r.a.createElement(Xi.a.Line,null)))),r.a.createElement(eo.a,null,r.a.createElement(Xi.a,null,r.a.createElement(Xi.a.Line,null),r.a.createElement(Xi.a.Line,null))),r.a.createElement(eo.a,{secondary:!0,style:{minHeight:70}}),r.a.createElement(eo.a,{clearing:!0},r.a.createElement(to.a,{disabled:!0,color:"blue",fluid:!0,content:"View"})))));var Ko=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{loadMotofies:t,loadingInitial:a,setPage:i,page:o,totalPages:l}=e.motofyStore,[c,s]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{t()},[t]),r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{mobile:16,tablet:16,className:"mobile only"},r.a.createElement(Yo,null)),r.a.createElement(Bi.a.Column,{computer:11,mobile:16},a&&0===o?r.a.createElement(Wo,null):r.a.createElement(Wi.a,{pageStart:0,loadMore:()=>{s(!0),i(o+1),t().then(()=>s(!1))},hasMore:!c&&o+1<l,initialLoad:!1},r.a.createElement(Ho,null))),r.a.createElement(Bi.a.Column,{width:5,className:"mobile hidden"},r.a.createElement(Gi.a,{style:{marginRight:30,position:"fixed"}},r.a.createElement(Bo,null))),r.a.createElement(Bi.a.Column,{computer:11,mobile:16},r.a.createElement(Vi.a,{active:c})))});const Zo={filter:"brightness(95%) contrast(70%) drop-shadow(1px 1px 1px teal)"},$o={textAlign:"center"};var _o=({mechanic:e})=>{const{t:t}=Object(Li.a)(["mechanics"]);return r.a.createElement(eo.a.Group,{raised:!0},r.a.createElement(eo.a,{raised:!0},r.a.createElement(go.a,{as:"h1",floated:"right",style:{color:"rgb(58,\t98,\t139)"}},e.name),r.a.createElement($i.a,{clearing:!0}),r.a.createElement(oo.a,null,r.a.createElement(oo.a.Group,null,r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:5},r.a.createElement(oo.a,null,r.a.createElement(oo.a.Image,{style:Zo,size:"small",rounded:!0,src:e.photoUrl}))),r.a.createElement($i.a,{vertical:!0}),r.a.createElement(Bi.a.Column,{width:6},r.a.createElement(oo.a,{style:$o},r.a.createElement(oo.a.Content,null,r.a.createElement(oo.a.Header,{as:"h2"},t("Customers")),void 0!==e.ratings&&r.a.createElement(oo.a.Extra,{as:"h1"},e.ratings.length)))),r.a.createElement($i.a,{vertical:!0}),r.a.createElement(Bi.a.Column,{width:5},r.a.createElement(oo.a,{style:$o},r.a.createElement(oo.a.Content,null,r.a.createElement(oo.a.Header,{as:"h2"},t("Rating")),void 0!==e.averageRating&&r.a.createElement(oo.a.Extra,{as:"h1"},e.averageRating)))))))),r.a.createElement(eo.a,null,r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:5},r.a.createElement(_i.a,{name:"history"})," ",t("In business since")," ",e.yearOfStart),r.a.createElement(Bi.a.Column,{width:6,style:$o},r.a.createElement(_i.a,{name:"envelope outline"})," ",e.city,","," ",e.countryName,", ",e.address),r.a.createElement(Bi.a.Column,{width:5,style:$o},r.a.createElement(_i.a,{name:"mail"})," ",e.email||"email N/A"))),r.a.createElement(eo.a,{clearing:!0},r.a.createElement(to.a,{as:u.a,to:"/mechanics/".concat(e.id),fluid:!0,content:t("View"),color:"instagram"})))};var Jo=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{mechanicsByDate:t}=e.mechanicStore;return r.a.createElement(oo.a.Group,{divided:!0},t.map(e=>r.a.createElement(_o,{mechanic:e,key:e.id})))});var Qo=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{predicate:t,setPredicate:a}=e.mechanicStore,{countries:i,loadCountriesToSelect:o}=e.countryStore,{t:l}=Object(Li.a)(["mechanics"]);Object(n.useEffect)(()=>{o()},[o]);const c={textAlign:"center"};return r.a.createElement(n.Fragment,null,r.a.createElement(d.a,{vertical:!0,size:"large",style:{width:"100%"}},r.a.createElement(d.a.Item,{active:t.has("search")},r.a.createElement(Zi.a,{icon:"search",placeholder:l("Search all"),onKeyDown:e=>(e=>{"Enter"===e.key&&(a("search",e.target.value),e.target.value="")})(e)})),r.a.createElement(d.a.Item,null,r.a.createElement(b.a,{placeholder:l("Search by country"),selection:!0,fluid:!0,search:!0,options:i,onChange:(e,t)=>{a("country",t.value)},clearable:!0})),r.a.createElement($i.a,{horizontal:!0,content:l("or choose from built in filters")}),r.a.createElement(d.a.Item,{active:0===t.size,onClick:()=>a("all","true"),color:"blue",name:"all",icon:"arrows alternate",content:l("All"),style:c}),r.a.createElement(d.a.Item,{active:t.has("isCustomer"),onClick:()=>a("isCustomer","true"),color:"blue",name:"isCustomer",icon:"info",content:l("My Shops (customer)"),style:c}),r.a.createElement(d.a.Item,{active:t.has("mostRecommended"),onClick:()=>a("mostRecommended","true"),color:"blue",name:"mostRecommended",icon:"heart outline",content:l("Most Recommended"),style:c}),r.a.createElement(d.a.Item,{active:t.has("bestRated"),onClick:()=>a("bestRated","true"),color:"blue",name:"bestRated",icon:"heart",content:l("Best Rated"),style:c}),r.a.createElement(d.a.Item,{active:t.has("iFollow"),onClick:()=>a("iFollow","true"),color:"blue",name:"country",content:l("By people I follow"),style:c,icon:"users"})))});var Xo=()=>r.a.createElement(n.Fragment,null,r.a.createElement(Xi.a,{fluid:!0},r.a.createElement(eo.a.Group,null,r.a.createElement(eo.a,{style:{minHeight:110}},r.a.createElement(Xi.a,null,r.a.createElement(Xi.a.Header,{image:!0},r.a.createElement(Xi.a.Line,null),r.a.createElement(Xi.a.Line,null)),r.a.createElement(Xi.a.Paragraph,null,r.a.createElement(Xi.a.Line,null)))),r.a.createElement(eo.a,null,r.a.createElement(Xi.a,null,r.a.createElement(Xi.a.Line,null),r.a.createElement(Xi.a.Line,null))),r.a.createElement(eo.a,{secondary:!0,style:{minHeight:70}}),r.a.createElement(eo.a,{clearing:!0},r.a.createElement(to.a,{disabled:!0,color:"blue",fluid:!0,content:"View"})))));var el=()=>{const e=Object(n.useContext)(Ti),{setPredicate:t}=e.mechanicStore,{closeModal:a}=e.modalStore;return r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(Zi.a,{style:{width:"100%"},icon:"search",placeholder:"Search all...",onKeyDown:e=>(e=>{"Enter"===e.key&&(t("search",e.target.value),e.target.value="",a())})(e)})))};var tl=()=>{const e=Object(n.useContext)(Ti),{setPredicate:t}=e.mechanicStore,{countries:a,loadCountriesToSelect:i}=e.countryStore,{closeModal:o}=e.modalStore;Object(n.useEffect)(()=>{i()},[i]);return r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(b.a,{placeholder:"Filter by country",selection:!0,fluid:!0,search:!0,options:a,onChange:(e,a)=>{t("country",a.value),o()},clearable:!0})))};var al=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{info:t}=e.mechanicStore;return r.a.createElement("div",{className:"mobileInfo"},t.toUpperCase())});var nl=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{predicate:t,setPredicate:a,setInfo:i}=e.mechanicStore,{t:o}=Object(Li.a)(["mobile-info"]);Object(n.useEffect)(()=>{i(o("All mechanics"))},[i,o]);const{openModal:l}=e.modalStore,c=()=>{switch(t.keys().next().value){case"isCustomer":i(o("I am customer"));break;case"mostRecommended":i(o("Most recommended"));break;case"bestRated":i(o("Best rated"));break;case"iFollow":i(o("Mechanics I follow"));break;case"country":i(o("Search by country"));break;case"search":i(o("Search all"));break;default:i(o("All mechanics"))}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{fluid:!0,widths:7},r.a.createElement(d.a.Item,{active:0===t.size,onClick:()=>{a("all","true"),c()},color:"blue",icon:"home"}),r.a.createElement(d.a.Item,{active:t.has("isCustomer"),onClick:()=>{a("isCustomer","true"),c()},color:"blue",icon:"heart outline"}),r.a.createElement(d.a.Item,{active:t.has("mostRecommended"),onClick:()=>{a("mostRecommended","true"),c()},color:"blue",icon:"chess king"}),r.a.createElement(d.a.Item,{active:t.has("bestRated"),onClick:()=>{a("bestRated","true"),c()},color:"blue",icon:"winner"}),r.a.createElement(d.a.Item,{active:t.has("iFollow"),onClick:()=>{a("iFollow","true"),c()},color:"blue",icon:"eye"}),r.a.createElement(d.a.Item,{active:t.has("country"),onClick:()=>{a("country","true"),l(r.a.createElement(tl,null)),c()},color:"blue",icon:"globe"}),r.a.createElement(d.a.Item,{active:t.has("search"),onClick:()=>{a("search","true"),l(r.a.createElement(el,null)),c()},color:"blue",icon:"search"})),r.a.createElement(al,null))});var rl=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{loadMechanics:t,loadingInitial:a,setPage:i,page:o,totalPages:l}=e.mechanicStore,[c,s]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{t()},[t]),r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{mobile:16,tablet:16,className:"mobile only"},r.a.createElement(nl,null)),r.a.createElement(Bi.a.Column,{computer:11,mobile:16},a&&0===o?r.a.createElement(Xo,null):r.a.createElement(Wi.a,{pageStart:0,loadMore:()=>{s(!0),i(o+1),t().then(()=>s(!1))},hasMore:!c&&o+1<l,initialLoad:!1},r.a.createElement(Jo,null))),r.a.createElement(Bi.a.Column,{width:5,className:"mobile hidden"},r.a.createElement(Gi.a,{style:{marginRight:30,position:"fixed"}},r.a.createElement(Qo,null))),r.a.createElement(Bi.a.Column,{computer:11,mobile:16},r.a.createElement(Vi.a,{active:c})))}),il=a(827),ol=function(e){var t=e.inverted,a=void 0===t||t,n=e.content;return r.a.createElement(il.a,{active:!0,inverted:a},r.a.createElement(Vi.a,{content:n}))},ll=a(817),cl=a(815);var sl=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{createHubConnection:t,stopHubConnection:a,addComment:i,activity:o}=e.activityStore,{t:l}=Object(Li.a)(["comments"]);return Object(n.useEffect)(()=>(t(o.id),()=>{a()}),[t,a,o]),r.a.createElement(n.Fragment,null,r.a.createElement(eo.a,{textAlign:"center",attached:"top",inverted:!0,color:"teal",style:{border:"none"}},r.a.createElement(go.a,null,l("Comment This Diary"))),r.a.createElement(eo.a,{attached:!0},r.a.createElement(ll.a.Group,{style:{maxWidth:"none"}},o&&o.comments&&o.comments.map(e=>r.a.createElement(ll.a,{key:e.id},r.a.createElement(ll.a.Avatar,{src:e.image||"/assets/user.png"}),r.a.createElement(ll.a.Content,null,r.a.createElement(ll.a.Author,{as:u.a,to:"/profile/".concat(e.username)},e.displayName),r.a.createElement(ll.a.Metadata,null,r.a.createElement("div",null,Object(cl.a)(new Date(e.createdAt),new Date))),r.a.createElement(ll.a.Text,null,e.body)))),r.a.createElement(Eo.b,{onSubmit:i,render:({handleSubmit:e,submitting:t,form:a,pristine:n})=>r.a.createElement(Oo.a,{onSubmit:()=>e().then(()=>a.reset())},r.a.createElement(Eo.a,{name:"body",component:Mo,rows:2,placeholder:l("Add your comment")}),r.a.createElement(to.a,{content:l("Add Reply"),labelPosition:"left",icon:"edit",fluid:!0,color:"instagram",loading:t,disabled:n}))}))))});var ml=({activityId:e})=>{const t=Object(n.useContext)(Ti),{deactivateActivity:a}=t.activityStore,{addFeedItem:i}=t.feedStore,{closeModal:o}=t.modalStore,{t:c}=Object(Li.a)(["modals"]);let s=Object(l.g)();return r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(go.a,{as:"h2",content:c("Sure you want to do this?"),color:"teal",textAlign:"center"}),r.a.createElement(n.Fragment,null,r.a.createElement(to.a,{fluid:!0,onClick:()=>{var t;a(t=e).then(()=>i(t,"Completed Motocycle Diary")).then(()=>o()).finally(()=>s.push("/activities"))},color:"teal",content:c("Yes, I finished my trip!"),floated:"left"}),r.a.createElement(to.a,{fluid:!0,onClick:()=>{o()},content:c("No, keep it active"),floated:"right"}))))};var ul=({activityId:e})=>{const t=Object(n.useContext)(Ti),{deleteActivity:a}=t.activityStore,{closeModal:i}=t.modalStore,{t:o}=Object(Li.a)(["modals"]);return r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(go.a,{as:"h2",content:o("Sure you want to do this? You cannot go back..."),color:"teal",textAlign:"center"}),r.a.createElement(n.Fragment,null,r.a.createElement(to.a,{fluid:!0,onClick:()=>{a(e).then(()=>i())},color:"teal",content:o("Yes, delete it"),floated:"left"}),r.a.createElement(to.a,{fluid:!0,onClick:()=>{i()},content:o("No, don't delete"),floated:"right"}))))};var dl=Object(m.a)(({activity:e})=>{const t=Object(n.useContext)(Ti),{attendActivity:a,cancelAttendance:i,loading:o}=t.activityStore,{addFeedItem:l}=t.feedStore,[c,s]=Object(n.useState)(!1),{t:m}=Object(Li.a)(["diaries"]),{openModal:d}=t.modalStore,[b,h]=Object(n.useState)("");Object(n.useEffect)(()=>{let t=e.attendees.filter(e=>e.isHost);h(t[0].username)},[e.attendees]);return r.a.createElement(eo.a.Group,{raised:!0},r.a.createElement(eo.a,{clearing:!0,attached:"bottom"},e.isHost?r.a.createElement(n.Fragment,null,c?r.a.createElement("div",{className:"ui five buttons"},r.a.createElement(to.a,{as:u.a,to:"/createDiaryEntry/".concat(e.id),color:"yellow",basic:!0},m("New Day")),r.a.createElement(to.a,{as:u.a,to:"/manage/".concat(e.id),color:"pink",basic:!0},m("Edit")),r.a.createElement(to.a,{onClick:()=>{var t;t=e.id,d(r.a.createElement(ul,{activityId:t})),s(!1)},color:"google plus"},m("Delete")),r.a.createElement(to.a,{onClick:()=>{var t;t=e.id,d(r.a.createElement(ml,{activityId:t})),s(!1)},color:"vk"},m("Complete")),r.a.createElement(to.a,{onClick:()=>{s(!1)}},m("Cancel"))):r.a.createElement(to.a,{onClick:()=>{s(!0)},color:"instagram",fluid:!0},m("Manage your diary"))):e.isGoing?r.a.createElement(to.a,{loading:o,onClick:()=>{return t=e.id,i(),console.log(b),l(t,"Left Motorcycle Diary",b),void s(!1);var t}},m("Stop following this diary")):r.a.createElement(to.a,{loading:o,onClick:()=>{return t=e.id,a(),console.log(b),l(t,"Joined Motorcycle Diary",b),void s(!1);var t},color:"teal"},m("Become a part of it"))))});var bl=({activity:e})=>{const{t:t}=Object(Li.a)(["diaries"]);return r.a.createElement(eo.a.Group,{raised:!0},r.a.createElement(eo.a,{attached:"top"},r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:1},r.a.createElement(_i.a,{size:"large",color:"teal",name:"pencil alternate"})),r.a.createElement(Bi.a.Column,{width:15},r.a.createElement("p",{style:{whiteSpace:"pre-wrap"}},e.description)))),r.a.createElement(eo.a,null,r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(Bi.a.Column,{width:1},r.a.createElement(_i.a,{name:"marker",size:"large",color:"teal"})),r.a.createElement(Bi.a.Column,{width:11},t("Started in:"),r.a.createElement("span",null,e.city,", ",e.departure)))),r.a.createElement(eo.a,null,r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(Bi.a.Column,{width:1},r.a.createElement(_i.a,{name:"map pin",size:"large",color:"teal"})),r.a.createElement(Bi.a.Column,{width:11},t("Going to:")," ",r.a.createElement("span",null,e.destination)))),r.a.createElement(eo.a,null,r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(Bi.a.Column,{width:1},r.a.createElement(_i.a,{name:"globe",size:"large",color:"teal"})),r.a.createElement(Bi.a.Column,{width:11},t("In country:"),r.a.createElement("span",null,e.countryName)))),r.a.createElement(eo.a,null,r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(Bi.a.Column,{width:1},r.a.createElement(_i.a,{name:"gem outline",size:"large",color:"teal"})),r.a.createElement(Bi.a.Column,{width:11},t("In category:"),r.a.createElement("span",null,e.category)))),r.a.createElement(eo.a,null,r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(Bi.a.Column,{width:1},r.a.createElement(_i.a,{name:"motorcycle",size:"large",color:"teal"})),r.a.createElement(Bi.a.Column,{width:11},t("You are driving:"),r.a.createElement("span",null,e.motorcycleBrandName)))))},hl=a(133);var pl=({diary:e,activity:t})=>{const a=Object(n.useContext)(Ti),{closeModal:i}=a.modalStore,{deleteDiaryEntry:o}=a.activityStore,l=t.attendees.filter(e=>e.isHost)[0],{diaryEntries:c}=t,{t:m}=Object(Li.a)(["diaries"]),[d,b]=Object(n.useState)(e),p=parseInt(d.dayNumber),y=t.diaryEntries.length,E=async e=>{var t=c.find(t=>parseInt(t.dayNumber)===e);b(t)};return r.a.createElement(n.Fragment,null,r.a.createElement(s.a,{text:!0},r.a.createElement(eo.a,{textAlign:"center",style:{border:"none"},attached:"top",secondary:!0,inverted:!0,color:"teal"},r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:3},r.a.createElement(g.a,{src:l.image,size:"tiny",circular:!0}),r.a.createElement("p",null,m("You are driving:")," ",t.motorcycleBrandName)),r.a.createElement(Bi.a.Column,{width:10},r.a.createElement(go.a,{as:"h2",color:"pink"},m("Day")," ",d.dayNumber," ",m("of")," ",t.title),r.a.createElement("p",null," ",m("Published")," ",Object(cl.a)(new Date(d.entryDate),new Date,{addSuffix:!0})),r.a.createElement(go.a.Subheader,{color:"pink"},r.a.createElement(u.a,{to:"/profile/".concat(l.username),onClick:()=>i()},m("by")," ",l.displayName),r.a.createElement("p",null," ",m("Started in")," ",t.city,", ",t.countryName),r.a.createElement("p",null," ",m("At the moment in")," ",d.locationCity,","," ",d.locationCountry))),r.a.createElement(Bi.a.Column,{width:3,style:{color:"red"}},r.a.createElement(Bi.a.Row,null,r.a.createElement(g.a,{src:t.motorcycleBrandLogoUrl,size:"tiny",circular:!0})),t.isHost&&r.a.createElement(Bi.a.Row,null,r.a.createElement(hl.a,{width:8},r.a.createElement(to.a,{circular:!0,icon:"edit outline",as:u.a,to:"/manageDiaryEntry/".concat(d.id,"/").concat(t.id),onClick:()=>i()})),r.a.createElement(hl.a,{width:8},Number(d.dayNumber)===y&&r.a.createElement(to.a,{circular:!0,icon:"delete",onClick:()=>{(async a=>{o(e,t)})(d.id),i()}})))))),r.a.createElement(eo.a,null,r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Row,null,r.a.createElement(Bi.a.Column,{computer:9,mobile:16},r.a.createElement(g.a,{src:d.photoUrl,size:"large",floated:"left"})),r.a.createElement(Bi.a.Column,{computer:7,mobile:16},r.a.createElement(eo.a,{attached:!0},r.a.createElement("p",null,m("At the moment in")," ",d.locationCity)),r.a.createElement(eo.a,{attached:!0},r.a.createElement("p",null,m("Feeling")," ",d.mood)),r.a.createElement(eo.a,{attached:!0},r.a.createElement("p",null,m("Road was")," ",d.road)),r.a.createElement(eo.a,{attached:!0},r.a.createElement("p",null,m("Weather was")," ",d.road)),r.a.createElement(eo.a,{attached:!0},r.a.createElement("p",null,m("Made")," ",d.numberOfKilometers," ",m("kilometers")," ")))),r.a.createElement(Bi.a.Row,null,r.a.createElement(eo.a,{attached:!0},r.a.createElement(h.a,{content:m("What happened today?")}),r.a.createElement("p",{style:{whiteSpace:"pre-wrap"}},d.body))),r.a.createElement(Bi.a.Row,null,r.a.createElement(Bi.a.Column,{width:5},r.a.createElement(to.a,{className:"mobile hidden",fluid:!0,onClick:()=>E(parseInt(d.dayNumber)-1),content:m("Previous day"),icon:"angle left",disabled:1===p}),r.a.createElement(to.a,{className:"mobile only",circular:!0,fluid:!0,onClick:()=>E(parseInt(d.dayNumber)-1),icon:"angle left",disabled:1===p})),r.a.createElement(Bi.a.Column,{width:5},r.a.createElement(to.a,{fluid:!0,onClick:()=>i(),content:m("Quit")})),r.a.createElement(Bi.a.Column,{width:5},r.a.createElement(to.a,{className:"mobile hidden",fluid:!0,onClick:()=>E(parseInt(d.dayNumber)+1),content:m("Next day"),icon:"angle right",disabled:p===y}),r.a.createElement(to.a,{className:"mobile only",fluid:!0,circular:!0,onClick:()=>E(parseInt(d.dayNumber)+1),icon:"angle right",disabled:p===y})))))))};var gl=Object(m.a)(({activity:e})=>{const t=Object(n.useContext)(Ti),{openModal:a}=t.modalStore,{t:i}=Object(Li.a)(["diaries"]),{diaryEntries:o}=e,l=o.slice().sort((e,t)=>parseInt(t.dayNumber)-parseInt(e.dayNumber)),c=i("Day"),s=i("Days");return r.a.createElement(Ki.a,{raised:!0},r.a.createElement(eo.a,{textAlign:"center",style:{border:"none"},attached:"top",secondary:!0,inverted:!0,color:"teal"},o.length," ",1===o.length?c:s," ",i("passed")),r.a.createElement(eo.a,{attached:!0,textAlign:"center"},r.a.createElement(so.a,{relaxed:!0,divided:!0},l.map(t=>r.a.createElement("div",{key:t.id},r.a.createElement(oo.a,{as:"h4",onClick:()=>{return n=t,void a(r.a.createElement(pl,{diary:n,activity:e}));var n},style:{cursor:"pointer"}},i("Day number "),t.dayNumber,r.a.createElement("div",{className:"ui segment"},r.a.createElement("img",{className:"ui centered medium image",src:t.photoUrl||"/assets/user.png",alt:"DayPhoto"}))),r.a.createElement($i.a,{horizontal:!0}))))))});var yl=Object(m.a)(({activity:e})=>{const t=e.attendees.filter(e=>e.isHost)[0],{t:a}=Object(Li.a)(["diaries"]);return r.a.createElement(eo.a,{style:{padding:"0"},raised:!0},r.a.createElement(eo.a,{textAlign:"center"},r.a.createElement(go.a,{as:"h2"},e.title,r.a.createElement(go.a.Subheader,null,r.a.createElement("span",null,a("Hosted by")," ",r.a.createElement(u.a,{to:"/profile/".concat(t.username)},r.a.createElement("strong",null,t.displayName))),r.a.createElement("span",null,", "," on ",Object(co.a)(e.date,"eeee do MMMM")," ")))))});var El=Object(m.a)(({attendees:e})=>r.a.createElement(so.a,{animated:!0,relaxed:!0,verticalAlign:"middle"},e.map(e=>r.a.createElement(so.a.Item,{key:e.username,style:{position:"relative"}},r.a.createElement(g.a,{avatar:!0,size:"mini",src:e.image||"/assets/user.png"}),r.a.createElement(so.a.Content,{verticalAlign:"middle"},r.a.createElement(so.a.Header,{as:"h4"},r.a.createElement(u.a,{to:"/profile/".concat(e.username)},e.displayName)),e.following&&r.a.createElement(so.a.Description,{style:{color:"green"}},"Following"))))));var fl=Object(m.a)(({attendees:e})=>{const t=Object(n.useContext)(Ti),{openModal:a,setSize:i}=t.modalStore,{t:o}=Object(Li.a)(["diaries"]),l=o("Person"),c=o("People");return r.a.createElement(Ki.a,{raised:!0},r.a.createElement(eo.a,{textAlign:"center",style:{border:"none"},attached:"top",secondary:!0,inverted:!0,color:"teal"},e.length," ",1===e.length?l:c," ",o("following")),r.a.createElement(eo.a,{attached:!0},r.a.createElement(so.a,{relaxed:!0,divided:!0},e.slice(0,10).map(e=>r.a.createElement(oo.a,{key:e.username,style:{position:"relative"}},e.isHost&&r.a.createElement(h.a,{style:{position:"absolute"},color:"teal",corner:"right"},o("Host")),r.a.createElement(g.a,{size:"mini",src:e.image||"/assets/user.png"}),r.a.createElement(oo.a.Content,{verticalAlign:"middle"},r.a.createElement(oo.a.Header,{as:"h4"},r.a.createElement(u.a,{to:"/profile/".concat(e.username)},e.displayName)),e.following&&r.a.createElement(oo.a.Extra,{style:{color:"green"}},o("Following")))))),e.length>10&&r.a.createElement("span",{style:{cursor:"pointer"},onClick:()=>{i("mini"),a(r.a.createElement(El,{attendees:e}))}},o("and")," ",e.length-10," ",o("more"))))});var Ol=Object(m.a)(({match:e,history:t})=>{const a=Object(n.useContext)(Ti),{loadActivity:i,activity:o,loadingInitial:l}=a.activityStore,{t:c}=Object(Li.a)(["diaries"]);return Object(n.useEffect)(()=>{i(e.params.id)},[i,e.params.id,t]),l||!o?r.a.createElement(ol,{content:c("Loading activity...")}):r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{computer:3,mobile:16,className:"mobile hidden"},r.a.createElement(fl,{attendees:o.attendees})),r.a.createElement(Bi.a.Column,{computer:10,mobile:16},r.a.createElement(yl,{activity:o}),r.a.createElement(bl,{activity:o}),r.a.createElement(dl,{activity:o}),r.a.createElement(sl,null)),r.a.createElement(Bi.a.Column,{computer:3,mobile:16,className:"hideScroll"},r.a.createElement(gl,{activity:o})))});const jl=Object(fo.combineValidators)({content:Object(fo.composeValidators)(Object(fo.isRequired)("Body"),Object(fo.hasLengthGreaterThan)(1)({message:"Body needs to be at least 2 characters"}),Object(fo.hasLengthLessThan)(255)({message:"Maximum number of characters is 500"}))()});var vl=Object(m.a)(({recipientUsername:e,username:t})=>{const a=Object(n.useContext)(Ti),{sendMessage:i}=a.privateMessageStore,{closeModal:o}=a.modalStore,[l]=Object(n.useState)(!1);return r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(Eo.b,{validate:jl,onSubmit:a=>{let n={recipientUsername:e,username:t,content:a.content};i(n)},render:({handleSubmit:e,invalid:t,pristine:a})=>r.a.createElement(Oo.a,{onSubmit:e,loading:l},r.a.createElement(go.a,{as:"h2",content:"Send message",color:"teal",textAlign:"center"}),r.a.createElement(Eo.a,{name:"content",rows:4,placeholder:"content",component:Mo}),r.a.createElement(to.a,{disabled:t||a,floated:"right",color:"teal",type:"submit",content:"submit"}),r.a.createElement(to.a,{floated:"right",disabled:l,type:"button",content:"cancel",onClick:()=>o()}))})))});var wl=({productId:e})=>{const t=Object(n.useContext)(Ti),{deleteProduct:a}=t.productStore,{closeModal:i}=t.modalStore;let o=Object(l.g)();const{t:c}=Object(Li.a)(["modals"]);return r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(go.a,{as:"h2",content:c("Sure you want to do this (cannot undo)?"),color:"teal",textAlign:"center"}),r.a.createElement(n.Fragment,null,r.a.createElement(to.a,{fluid:!0,onClick:()=>(a(e),i(),void o.push("/shop")),color:"teal",content:c("Yes, delete it!"),floated:"left"}),r.a.createElement(to.a,{fluid:!0,onClick:()=>{i()},content:c("No, cancel"),floated:"right"}))))};var Cl=Object(m.a)(({product:e})=>{const t=Object(n.useContext)(Ti),{openModal:a,setSize:i}=t.modalStore,{followProduct:o,productFollowed:l,unfollowProduct:c,setProductFollowed:s,markSold:m}=t.productStore,{addFeedItem:d}=t.feedStore,{user:b}=t.userStore,[p,y]=Object(n.useState)(!1),{t:E}=Object(Li.a)(["shop"]);Object(n.useEffect)(()=>{e.viewers.forEach(e=>{e.username===(null===b||void 0===b?void 0:b.userName)&&s()})},[s,e.viewers,b]);const f={minWidth:"10em"};return r.a.createElement(Bi.a,{stackable:!0,columns:2},r.a.createElement(Bi.a.Column,{width:8},r.a.createElement(eo.a,{raised:!0},r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:2},r.a.createElement(_i.a,{size:"large",color:"grey",name:"info"})),r.a.createElement(Bi.a.Column,{width:14},r.a.createElement(h.a,{style:f,color:"yellow",horizontal:!0},E("Title")," "),e.title)),r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(Bi.a.Column,{width:2},r.a.createElement(_i.a,{name:"monero",size:"large",color:"grey"})),r.a.createElement(Bi.a.Column,{width:14},r.a.createElement(h.a,{style:f,color:"yellow",horizontal:!0},E("Price")," "),e.price," \u20ac")),r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(Bi.a.Column,{width:2},r.a.createElement(_i.a,{name:"calendar",size:"large",color:"grey"})),r.a.createElement(Bi.a.Column,{width:14},r.a.createElement(h.a,{style:f,color:"yellow",horizontal:!0},E("Published")," "),Object(cl.a)(new Date(e.datePublished),new Date,{addSuffix:!0}))),r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(Bi.a.Column,{width:2},r.a.createElement(_i.a,{name:"certificate",size:"large",color:"grey"})),r.a.createElement(Bi.a.Column,{width:14},r.a.createElement(h.a,{style:f,color:"yellow",horizontal:!0},E("Category")," "),e.category)),r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(Bi.a.Column,{width:2},r.a.createElement(_i.a,{name:"copyright",size:"large",color:"grey"})),r.a.createElement(Bi.a.Column,{width:14},r.a.createElement(h.a,{style:f,color:"yellow",horizontal:!0},E("Brand")," "),e.brand)),r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(Bi.a.Column,{width:2},r.a.createElement(_i.a,{name:"id badge outline",size:"large",color:"grey"})),r.a.createElement(Bi.a.Column,{width:14},r.a.createElement(h.a,{style:f,color:"yellow",horizontal:!0},E("Model")," "),e.model)),e.sellerUsername!==(null===b||void 0===b?void 0:b.userName)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(Bi.a.Column,{width:2},r.a.createElement(_i.a,{name:"location arrow",size:"large",color:"grey"})),r.a.createElement(Bi.a.Column,{width:14},r.a.createElement(h.a,{style:f,color:"yellow",horizontal:!0},E("City")," "),e.city)),r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(Bi.a.Column,{width:2},r.a.createElement(_i.a,{name:"map marker alternate",size:"large",color:"grey"})),r.a.createElement(Bi.a.Column,{width:14},r.a.createElement(h.a,{style:f,color:"yellow",horizontal:!0},E("Country")," "),e.countryName)),r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(Bi.a.Column,{width:2},r.a.createElement(_i.a,{name:"user",size:"large",color:"grey"})),r.a.createElement(Bi.a.Column,{width:14},r.a.createElement(h.a,{style:f,color:"yellow",horizontal:!0},E("Seller")," "),r.a.createElement(u.a,{to:"/profile/".concat(e.sellerUsername)}," ",e.sellerDisplayName))),e.phoneNumber&&r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(Bi.a.Column,{width:2},r.a.createElement(_i.a,{name:"phone",size:"large",color:"grey"})),r.a.createElement(Bi.a.Column,{width:14},r.a.createElement(h.a,{color:"yellow",horizontal:!0},E("Contact number")," "),e.phoneNumber)),e.description&&r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(Bi.a.Column,{width:2},r.a.createElement(_i.a,{name:"info circle",size:"large",color:"grey"})),r.a.createElement(Bi.a.Column,{width:14},r.a.createElement(h.a,{style:f,color:"yellow",horizontal:!0},E("Description")," "),e.description))),r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(Bi.a.Column,{width:16},e.sellerUsername!==(null===b||void 0===b?void 0:b.userName)?r.a.createElement("div",{className:"ui two buttons"},r.a.createElement(to.a,{basic:!0,content:E("Contact the seller"),color:"blue",onClick:()=>{i("small"),a(r.a.createElement(vl,{recipientUsername:e.sellerUsername,username:null===b||void 0===b?void 0:b.userName}))}}),r.a.createElement(to.a,{color:"instagram",content:E(!0===l?"Unfollow this product":"Follow this product"),onClick:()=>{var t;l?(t=>{c(t),d(t,"Removed from favorites",e.sellerUsername)})(e.id):(t=e.id,o(t,b.userName,b.displayName),d(t,"Added to favorites",e.sellerUsername))}})):r.a.createElement(n.Fragment,null,p?r.a.createElement("div",{className:"ui four buttons"},r.a.createElement(to.a,{basic:!0,color:"olive",content:E("Mark sold"),disabled:e.isSold,onClick:()=>{return t=e.id,m(t,e),void d(t,"Marked Sold");var t}}),r.a.createElement(to.a,{as:u.a,to:"/manageProduct/".concat(e.id),color:"pink",basic:!0},E("Edit")),r.a.createElement(to.a,{onClick:()=>{var t;t=e.id,i("mini"),a(r.a.createElement(wl,{productId:t}))},color:"red"},E("Delete")),r.a.createElement(to.a,{onClick:()=>{y(!1)}},E("Cancel"))):r.a.createElement(to.a,{onClick:()=>{y(!0)},color:"instagram",fluid:!0},E("Manage"))))))),r.a.createElement(Bi.a.Column,{width:8},r.a.createElement(eo.a,{raised:!0},e.isSold&&r.a.createElement(h.a,{style:{position:"absolute"},color:"red",corner:"right"},"SOLD"),r.a.createElement(g.a,{src:e.photoUrl,fluid:!0}))))});var Sl=Object(m.a)(({product:e})=>{const t=Object(n.useContext)(Ti),{loadingInitial:a,visitCounter:i}=t.productStore,{t:o}=Object(Li.a)(["shop"]);return Object(n.useEffect)(()=>{i(e.id)},[e,i]),a||!e?r.a.createElement(ol,{content:o("Loading product details...")}):r.a.createElement(eo.a,{raised:!0},r.a.createElement(go.a,{as:"h2",icon:!0,textAlign:"center"},r.a.createElement(_i.a,{name:"shopping basket",circular:!0}),r.a.createElement(go.a.Content,null,e.title),r.a.createElement(go.a,{sub:!0},o("The")," ",e.title," ",o("is published")," ",Object(cl.a)(new Date(e.datePublished),new Date,{addSuffix:!0}),", ",o("seen")," ",e.numberSeen," ",o("times and expires")," "," ",Object(cl.a)(new Date(e.inactivityExpirationDate),new Date,{addSuffix:!0})),r.a.createElement(go.a.Subheader,null,0!==e.numberFollowed&&o("The")+e.title+o("is in favorites of")+(e.numberFollowed>1?e.numberFollowed+o("people"):e.numberFollowed+o("person")))))});var kl=Object(m.a)(({match:e})=>{const t=Object(n.useContext)(Ti),{product:a,loadProduct:i,loadingInitial:o,visitCounter:l}=t.productStore,{t:c}=Object(Li.a)(["shop"]);return Object(n.useEffect)(()=>{i(e.params.id),l(e.params.id)},[i,e.params.id,l]),o||!a?r.a.createElement(ol,{content:c("Loading product details...")}):r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Row,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(Sl,{product:a}))),r.a.createElement(Bi.a.Row,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(Cl,{product:a}))))});var Pl=()=>r.a.createElement(eo.a,{placeholder:!0},r.a.createElement(go.a,{icon:!0},r.a.createElement(_i.a,{name:"search"}),"Oops - we've looked everywhere but couldn't find this."),r.a.createElement(eo.a.Inline,null,r.a.createElement(to.a,{as:u.a,to:"/activities",primary:!0},"Return to the main page"))),Il=a(814);var xl=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{modal:{open:t,body:a,size:i},closeModal:o}=e.modalStore;return r.a.createElement(Il.a,{open:t,onClose:o,size:i},r.a.createElement(Il.a.Content,null,a))}),Ml=a(831),zl=a(821),Rl=a(423);const Al={border:"dashed 3px",borderColor:"#eee",borderRadius:"5px",paddingTop:"30px",textAlign:"center",height:"200px"},Fl={borderColor:"green"};var Nl=({setFiles:e})=>{const t=Object(n.useCallback)(t=>{e(t.map(e=>Object.assign(e,{preview:URL.createObjectURL(e)})))},[e]),{t:a}=Object(Li.a)(["widget"]),{getRootProps:i,getInputProps:o,isDragActive:l}=Object(Rl.a)({onDrop:t});return r.a.createElement("div",Object.assign({},i(),{style:l?{...Al,...Fl}:Al}),r.a.createElement("input",o()),r.a.createElement(_i.a,{name:"upload",size:"huge"}),r.a.createElement(go.a,{content:a("Drop image here or click to select file")}))},Dl=a(417),Ul=a.n(Dl),Tl=(a(706),function(e){var t=e.setImage,a=e.imagePreview,i=Object(n.useRef)(null);return r.a.createElement(Ul.a,{ref:i,src:a,style:{height:200,width:"100%"},initialAspectRatio:1,preview:".img-preview",guides:!1,viewMode:1,dragMode:"move",scalable:!0,cropBoxMovable:!0,cropBoxResizable:!0,crop:function(){i.current&&"undefined"===typeof i.current.getCroppedCanvas()||i&&i.current&&i.current.getCroppedCanvas().toBlob((function(e){t(e)}),"image/jpeg")}})});var Ll=Object(m.a)(({loading:e,uploadPhoto:t})=>{const[a,i]=Object(n.useState)([]),[o,l]=Object(n.useState)(null),{t:c}=Object(Li.a)(["widget"]);return Object(n.useEffect)(()=>()=>{a.forEach(e=>URL.revokeObjectURL(e.preview))}),r.a.createElement(n.Fragment,null,r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{computer:4,mobile:16},r.a.createElement(go.a,{color:"teal",sub:!0,content:c("Step 1 - Add Photo")}),r.a.createElement(Nl,{setFiles:i})),r.a.createElement(Bi.a.Column,{width:1}),r.a.createElement(Bi.a.Column,{computer:4,mobile:16},r.a.createElement(go.a,{sub:!0,color:"teal",content:c("Step 2 - Resize image")}),a.length>0&&r.a.createElement(Tl,{setImage:l,imagePreview:a[0].preview})),r.a.createElement(Bi.a.Column,{width:1}),r.a.createElement(Bi.a.Column,{computer:4,mobile:16},r.a.createElement(go.a,{sub:!0,color:"teal",content:c("Step 3 - Preview & Upload")}),a.length>0&&r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"img-preview",style:{minHeight:"200px",overflow:"hidden"}}),r.a.createElement(to.a.Group,{widths:2},r.a.createElement(to.a,{positive:!0,icon:"check",loading:e,onClick:()=>t(o)}),r.a.createElement(to.a,{icon:"close",disabled:e,onClick:()=>i([])}))))))});var Hl=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{profile:t,isCurrentUser:a,uploadPhoto:i,uploadingPhoto:o,setMainPhoto:l,loading:c,deletePhoto:s}=e.profileStore,{t:m}=Object(Li.a)(["social"]),[u,d]=Object(n.useState)(!1),[b,h]=Object(n.useState)(void 0),[p,y]=Object(n.useState)(void 0);return r.a.createElement(Ml.a.Pane,null,r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16,style:{paddingBottom:0}},r.a.createElement(go.a,{floated:"left",icon:"image",content:m("Photos")}),a&&r.a.createElement(to.a,{floated:"right",basic:!0,content:m(u?"Cancel":"Add Photo"),onClick:()=>d(!u)})),r.a.createElement(Bi.a.Column,{width:16},u?r.a.createElement(Ll,{uploadPhoto:e=>{i(e).then(()=>d(!1))},loading:o}):r.a.createElement(zl.a.Group,{itemsPerRow:4,stackable:!0,doubling:!0,centered:!0},t&&t.photos.map(e=>r.a.createElement(zl.a,{key:e.id},r.a.createElement(g.a,{src:e.url}),a&&r.a.createElement(to.a.Group,{fluid:!0,widths:2},r.a.createElement(to.a,{name:e.id,basic:!0,positive:!0,content:m("Main"),onClick:t=>{l(e),h(t.currentTarget.name)},disabled:e.isMain,loading:c&&b===e.id}),r.a.createElement(to.a,{name:e.id,disabled:e.isMain,onClick:t=>{s(e),y(t.currentTarget.name)},loading:c&&p===e.id,basic:!0,negative:!0,icon:"trash"}))))))))});var ql=Object(m.a)(({updateProfile:e,profile:t})=>{const{t:a}=Object(Li.a)(["forms"]),n=Object(fo.combineValidators)({displayName:Object(fo.isRequired)({message:a("Display Name is required")})});return r.a.createElement(Eo.b,{onSubmit:e,validate:n,initialValues:t,render:({handleSubmit:e,invalid:n,pristine:i,submitting:o})=>r.a.createElement(Oo.a,{onSubmit:e,error:!0},r.a.createElement(Eo.a,{name:"displayName",component:wo,placeholder:a("Display Name"),value:t.displayName}),r.a.createElement(Eo.a,{name:"bio",component:Mo,rows:3,placeholder:a("Bio"),value:t.bio}),r.a.createElement(to.a,{loading:o,floated:"right",disabled:n||i,positive:!0,content:a("Update profile")}))})});var Bl=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{updateProfile:t,profile:a,isCurrentUser:i}=e.profileStore,{t:o}=Object(Li.a)(["social"]),[l,c]=Object(n.useState)(!1);return r.a.createElement(Ml.a.Pane,null,r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(go.a,{floated:"left",icon:"user",content:o("About")+" "+a.displayName}),i&&r.a.createElement(to.a,{floated:"right",basic:!0,content:o(l?"Cancel":"Edit Profile"),onClick:()=>c(!l)})),r.a.createElement(Bi.a.Column,{width:16},l?r.a.createElement(ql,{updateProfile:t,profile:a}):r.a.createElement("span",null,a.bio))))});var Gl=({profile:e})=>{const{t:t}=Object(Li.a)(["social"]);return r.a.createElement(zl.a,{as:u.a,to:"/profile/".concat(e.username)},r.a.createElement(g.a,{src:e.image||"/assets/user.png"}),r.a.createElement(zl.a.Content,null,r.a.createElement(zl.a.Header,null,e.displayName||"display name")),r.a.createElement(zl.a.Content,{extra:!0},r.a.createElement("div",null,r.a.createElement(_i.a,{name:"user"}),e.followersCount," ",t("Followers"))))};var Vl=()=>{const e=Object(n.useContext)(Ti),{profile:t,followings:a,loading:i,activeTab:o}=e.profileStore,{t:l}=Object(Li.a)(["social"]);return r.a.createElement(Ml.a.Pane,{loading:i},r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(go.a,{floated:"left",icon:"user circle",content:7===o?l("People following")+" "+t.displayName:l("People")+" "+t.displayName+" "+l("is following")})),r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(zl.a.Group,{itemsPerRow:4,stackable:!0,doubling:!0,centered:!0},a.map(e=>r.a.createElement(Gl,{key:e.username,profile:e}))))))};var Yl=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{loadUserActivities:t,profile:a,loadingActivities:i,userActivities:o}=e.profileStore,{t:l}=Object(Li.a)(["social"]),c=[{menuItem:l("Active"),pane:{key:"active"}},{menuItem:l("Completed"),pane:{key:"completed"}},{menuItem:l("In future"),pane:{key:"in future"}}];Object(n.useEffect)(()=>{t(a.username)},[t,a]);return r.a.createElement(Ml.a.Pane,{loading:i},r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(go.a,{floated:"left",icon:"blogger",content:l("Motorcycle Diaries")})),r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(Ml.a,{panes:c,menu:{secondary:!0,pointing:!0},onTabChange:(e,n)=>((e,n)=>{let r;switch(n.activeIndex){case 0:r="active";break;case 1:r="completed";break;case 2:r="in future"}t(a.username,r)})(0,n)}),r.a.createElement("br",null),r.a.createElement(zl.a.Group,{itemsPerRow:4,stackable:!0,doubling:!0,centered:!0},o.map(e=>r.a.createElement(zl.a,{as:u.a,to:"/activities/".concat(e.id),key:e.id},r.a.createElement(g.a,{src:"/assets/categoryImages/".concat(e.category,".jpg"),style:{minHeight:100,objectFit:"cover"}}),r.a.createElement(zl.a.Content,null,r.a.createElement(zl.a.Header,{textAlign:"center"},e.title),r.a.createElement(zl.a.Meta,{textAlign:"center"},r.a.createElement("div",null,Object(co.a)(new Date(e.date),"do LLL")),r.a.createElement("div",null,Object(co.a)(new Date(e.date),"h:mm a"))))))))))});var Wl=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{loadUserMotofies:t,profile:a,loadingMotofies:i,userMotofies:o}=e.profileStore,{t:l}=Object(Li.a)(["social"]),c=[{menuItem:l("Embraced"),pane:{key:"iEmbraced"}},{menuItem:l("Published"),pane:{key:"iPublished"}},{menuItem:l("Rated"),pane:{key:"iRated"}}];Object(n.useEffect)(()=>{t(a.username)},[t,a]);return r.a.createElement(Ml.a.Pane,{loading:i},r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(go.a,{floated:"left",icon:"motorcycle",content:"Motofies"})),r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(Ml.a,{panes:c,menu:{secondary:!0,pointing:!0},onTabChange:(e,n)=>((e,n)=>{let r;switch(n.activeIndex){case 1:r="iPublished";break;case 2:r="iRated";break;default:r="iEmbraced"}t(a.username,r)})(0,n)}),r.a.createElement("br",null),r.a.createElement(zl.a.Group,{itemsPerRow:4,stackable:!0,doubling:!0,centered:!0},o.map(e=>r.a.createElement(zl.a,{as:u.a,to:"/gallery/".concat(e.id),key:e.id},r.a.createElement(g.a,{src:e.photoUrl,style:{minHeight:100,objectFit:"cover"}}),r.a.createElement(zl.a.Content,null,r.a.createElement(zl.a.Header,{textAlign:"center"},e.name),r.a.createElement(zl.a.Meta,{textAlign:"center"},r.a.createElement("div",null,Object(co.a)(new Date(e.datePublished),"do LLL")),r.a.createElement("div",null,Object(co.a)(new Date(e.yearOfProduction),"h:mm a"))))))))))});var Kl=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{loadUserForumposts:t,profile:a,loadingForumposts:i,userForumposts:o}=e.profileStore,{t:l}=Object(Li.a)(["social"]),c=[{menuItem:l("Asked"),pane:{key:"iAsked"}},{menuItem:l("Rated"),pane:{key:"iRated"}}];Object(n.useEffect)(()=>{t(a.username)},[t,a]);return r.a.createElement(Ml.a.Pane,{loading:i},r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(go.a,{floated:"left",icon:"question circle",content:"Forumposts"})),r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(Ml.a,{panes:c,menu:{secondary:!0,pointing:!0},onTabChange:(e,n)=>((e,n)=>{let r;switch(n.activeIndex){case 1:r="iRated";break;default:r="iAsked"}t(a.username,r)})(0,n)}),r.a.createElement("br",null),r.a.createElement(zl.a.Group,{itemsPerRow:4,stackable:!0,doubling:!0,centered:!0},o.map(e=>r.a.createElement(zl.a,{as:u.a,to:"/forum/".concat(e.id),key:e.id},r.a.createElement(g.a,{src:"/assets/forumCategoryImages/".concat(e.category,".jpg"),style:{minHeight:100,objectFit:"cover"}}),r.a.createElement(zl.a.Content,null,r.a.createElement(zl.a.Header,{textAlign:"center"},e.title),r.a.createElement(zl.a.Meta,{textAlign:"center"},r.a.createElement("div",null,Object(co.a)(new Date(e.dateAdded),"do LLL")),r.a.createElement("div",null,Object(co.a)(new Date(e.dateAdded),"h:mm a"))))))))))});var Zl=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{loadUserMechanics:t,profile:a,loadingMechanics:i,userMechanics:o}=e.profileStore,{t:l}=Object(Li.a)(["social"]),c=[{menuItem:l("Published"),pane:{key:"iPublished"}},{menuItem:l("Rated"),pane:{key:"iRated"}},{menuItem:l("Recommended"),pane:{key:"iRecommend"}}];Object(n.useEffect)(()=>{t(a.username)},[t,a]);return r.a.createElement(Ml.a.Pane,{loading:i},r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(go.a,{floated:"left",icon:"servicestack",content:"Mechanics"})),r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(Ml.a,{panes:c,menu:{secondary:!0,pointing:!0},onTabChange:(e,n)=>((e,n)=>{let r;switch(n.activeIndex){case 1:r="iRated";break;case 2:r="iRecommend";break;default:r="iPublished"}t(a.username,r)})(0,n)}),r.a.createElement("br",null),r.a.createElement(zl.a.Group,{itemsPerRow:4,stackable:!0,doubling:!0,centered:!0},o.map(e=>r.a.createElement(zl.a,{as:u.a,to:"/mechanics/".concat(e.id),key:e.id},r.a.createElement(g.a,{src:e.photoUrl,style:{minHeight:100,objectFit:"cover"}}),r.a.createElement(zl.a.Content,null,r.a.createElement(zl.a.Header,{textAlign:"center"},e.name),r.a.createElement(zl.a.Meta,{textAlign:"center"},r.a.createElement("div",null,Object(co.a)(new Date(e.datePublished),"do LLL")),r.a.createElement("div",null,Object(co.a)(new Date(e.datePublished),"h:mm a"))))))))))});var $l=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{loadUserProducts:t,profile:a,loadingProducts:i,userProducts:o}=e.profileStore,{t:l}=Object(Li.a)(["social"]),c=[{menuItem:l("I am selling"),pane:{key:"iAmSelling"}},{menuItem:l("I sold"),pane:{key:"iSold"}}];Object(n.useEffect)(()=>{t(a.username)},[t,a]);return r.a.createElement(Ml.a.Pane,{loading:i},r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(go.a,{floated:"left",icon:"calendar",content:"Products"})),r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(Ml.a,{panes:c,menu:{secondary:!0,pointing:!0},onTabChange:(e,n)=>((e,n)=>{let r;switch(n.activeIndex){case 1:r="iSold";break;case 2:r="iAmSelling"}t(a.username,r)})(0,n)}),r.a.createElement("br",null),r.a.createElement(zl.a.Group,{itemsPerRow:4,stackable:!0,doubling:!0,centered:!0},o.map(e=>r.a.createElement(zl.a,{as:u.a,to:"/product/".concat(e.id),key:e.id},r.a.createElement(g.a,{src:e.pictureUrl,style:{minHeight:100,objectFit:"cover"}}),r.a.createElement(zl.a.Content,null,r.a.createElement(zl.a.Header,{textAlign:"center"},e.title),r.a.createElement(zl.a.Meta,{textAlign:"center"},r.a.createElement("div",null,Object(co.a)(new Date(e.datePublished),"do LLL")),r.a.createElement("div",null,Object(co.a)(new Date(e.datePublished),"h:mm a"))))))))))});const _l=[{menuItem:{key:"About",icon:"user"},render:()=>r.a.createElement(Bl,null)},{menuItem:{key:"Photos",icon:"image"},render:()=>r.a.createElement(Hl,null)},{menuItem:{key:"Motofies!",icon:"motorcycle"},render:()=>r.a.createElement(Wl,null)},{menuItem:{key:"Motorcycle Diaries",icon:"blogger"},render:()=>r.a.createElement(Yl,null)},{menuItem:{key:"Forumposts",icon:"question circle"},render:()=>r.a.createElement(Kl,null)},{menuItem:{key:"Mechanics",icon:"servicestack"},render:()=>r.a.createElement(Zl,null)},{menuItem:{key:"Products",icon:"shopping bag"},render:()=>r.a.createElement($l,null)},{menuItem:{key:"Followers",icon:"user circle"},render:()=>r.a.createElement(Vl,null)},{menuItem:{key:"Followings",icon:"users"},render:()=>r.a.createElement(Vl,null)}];var Jl=({setActiveTab:e})=>{const{t:t}=Object(Li.a)(["social"]),a=[{menuItem:t("About"),render:()=>r.a.createElement(Bl,null)},{menuItem:t("Photos"),render:()=>r.a.createElement(Hl,null)},{menuItem:"Motofies!",render:()=>r.a.createElement(Wl,null)},{menuItem:t("Motorcycle Diaries"),render:()=>r.a.createElement(Yl,null)},{menuItem:t("Forumposts"),render:()=>r.a.createElement(Kl,null)},{menuItem:t("Mechanics"),render:()=>r.a.createElement(Zl,null)},{menuItem:t("Products"),render:()=>r.a.createElement($l,null)},{menuItem:t("Followers"),render:()=>r.a.createElement(Vl,null)},{menuItem:t("Followings"),render:()=>r.a.createElement(Vl,null)}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ml.a,{className:"mobile hidden",menu:{fluid:!0,vertical:!0},menuPosition:"right",panes:a,onTabChange:(t,a)=>e(a.activeIndex)}),r.a.createElement(Ml.a,{className:"mobile only",menu:{fluid:!0,style:{fontSize:"0.85em"}},panes:_l,onTabChange:(t,a)=>e(a.activeIndex)}))},Ql=a(826),Xl=a(832);var ec=Object(m.a)(({profile:e,isCurrentUser:t,loading:a,follow:i,unfollow:o})=>{const l=Object(n.useContext)(Ti),{user:c}=l.userStore,{addFeedItem:s}=l.feedStore,{openModal:m}=l.modalStore,{onlineUsers:u}=l.presenceStore,{t:d}=Object(Li.a)(["social"]);return r.a.createElement(eo.a,null,r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{computer:12,mobile:16},r.a.createElement(oo.a.Group,null,r.a.createElement(oo.a,null,r.a.createElement(oo.a.Image,{avatar:!0,size:"tiny",src:e.image||"/assets/user.png"}),r.a.createElement(oo.a.Content,{verticalAlign:"middle"},r.a.createElement(go.a,{as:"h1"},u.includes(e.username)&&r.a.createElement(_i.a,{name:"check circle",className:"isOnline",bordered:!0,circular:!0,size:"small"}),e.displayName)),(null===c||void 0===c?void 0:c.userName)!==e.username&&r.a.createElement(to.a,{circular:!0,content:d("Send Message"),onClick:()=>{m(r.a.createElement(vl,{recipientUsername:e.username,username:c.userName}))}})))),r.a.createElement(Bi.a.Column,{computer:4,mobile:16},r.a.createElement(Ql.a.Group,{widths:2},r.a.createElement(Ql.a,{label:d("Followers"),value:e.followersCount}),r.a.createElement(Ql.a,{label:d("Following"),value:e.followingCount})),r.a.createElement($i.a,null),!t&&r.a.createElement(Xl.a,{animated:"move"},r.a.createElement(Xl.a.Content,{visible:!0,style:{width:"100%"}},r.a.createElement(to.a,{fluid:!0,color:"instagram",content:e.following?d("Following"):d("Not following")})),r.a.createElement(Xl.a.Content,{hidden:!0},r.a.createElement(to.a,{loading:a,fluid:!0,basic:!0,color:e.following?"red":"instagram",content:e.following?d("Unfollow"):d("Follow"),onClick:e.following?()=>[o(e.username),s(Object(yn.a)(),"Unfollows You",e.username)]:()=>[i(e.username),s(Object(yn.a)(),"Started Following You",e.username)]}))))))});var tc=Object(m.a)(({match:e})=>{const t=Object(n.useContext)(Ti),{profile:a,loadingProfile:i,loadProfile:o,follow:l,unfollow:c,isCurrentUser:s,loading:m,setActiveTab:u}=t.profileStore,{t:d}=Object(Li.a)(["social"]);return Object(n.useEffect)(()=>{o(e.params.username)},[o,e]),i?r.a.createElement(ol,{content:d("Loading profile...")}):r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(ec,{profile:a,isCurrentUser:s,follow:l,unfollow:c,loading:m}),r.a.createElement(Jl,{setActiveTab:u})))});var ac=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{createHubConnection:t,stopHubConnection:a,addComment:i,motofy:o}=e.motofyStore,{t:l}=Object(Li.a)(["comments"]);return Object(n.useEffect)(()=>(t(o.id,"RecieveMotofyComment"),()=>{a()}),[t,a,o]),r.a.createElement(n.Fragment,null,r.a.createElement(eo.a,{textAlign:"center",attached:"top",inverted:!0,color:"teal",style:{border:"none"}},r.a.createElement(go.a,null,l("Comment this motofy"))),r.a.createElement(eo.a,{attached:!0},r.a.createElement(ll.a.Group,{style:{maxWidth:"none"}},o&&o.commentMotofies&&o.commentMotofies.map(e=>r.a.createElement(ll.a,{key:e.id},r.a.createElement(ll.a.Avatar,{src:e.image||"/assets/user.png"}),r.a.createElement(ll.a.Content,null,r.a.createElement(ll.a.Author,{as:u.a,to:"/profile/".concat(e.username)},e.displayName),r.a.createElement(ll.a.Metadata,null,r.a.createElement("div",null,Object(cl.a)(new Date(e.createdAt),new Date))),r.a.createElement(ll.a.Text,null,e.body)))),r.a.createElement(Eo.b,{onSubmit:i,render:({handleSubmit:e,submitting:t,form:a,pristine:n})=>r.a.createElement(Oo.a,{onSubmit:()=>e().then(()=>a.reset())},r.a.createElement(Eo.a,{name:"body",component:Mo,rows:2,placeholder:l("Add your comment")}),r.a.createElement(to.a,{content:l("Add Reply"),labelPosition:"left",icon:"edit",color:"instagram",fluid:!0,loading:t,disabled:n}))}))))});var nc=({motofyId:e})=>{const t=Object(n.useContext)(Ti),{deleteMotofy:a}=t.motofyStore,{closeModal:i}=t.modalStore,{addFeedItem:o}=t.feedStore,{t:c}=Object(Li.a)(["modals"]);let s=Object(l.g)();return r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(go.a,{as:"h2",content:c("Sure you want to do this (cannot undo)?"),color:"teal",textAlign:"center"}),r.a.createElement(n.Fragment,null,r.a.createElement(to.a,{fluid:!0,onClick:()=>{return o(t=e,"Deleted Motofy"),a(t),i(),void s.push("/gallery");var t},color:"teal",content:c("Yes, delete it!"),floated:"left"}),r.a.createElement(to.a,{fluid:!0,onClick:()=>{i()},content:c("No, keep it"),floated:"right"}))))};const rc={filter:"brightness(90%)",border:"white solid 1px",borderRadius:"5px"},ic={borderRadius:"7px",backgroundColor:"rgb(29, 115, 152)"},oc={position:"absolute",top:"1%",right:"4%",fontSize:"1.6vw",padding:".7vw",color:"#FA5",background:"rgba(51, 170, 51, .1)",borderRadius:"30%"};var lc=Object(m.a)(({motofy:e})=>{const t=Object(n.useContext)(Ti),{user:a}=t.userStore,{embraceMotofy:i,unembraceMotofy:o,loading:l}=t.motofyStore,{addFeedItem:c}=t.feedStore,{openModal:s}=t.modalStore,[m,d]=Object(n.useState)(!1),{t:b}=Object(Li.a)(["gallery"]),[h,p]=Object(n.useState)("");Object(n.useEffect)(()=>{let t=e.publisherUsername;p(t)},[e]);return r.a.createElement(eo.a.Group,null,r.a.createElement(eo.a,{basic:!0,attached:"top",style:{padding:"0"}},r.a.createElement(g.a,{src:e.photoUrl||"/assets/placeholder.png",fluid:!0,style:rc}),r.a.createElement(eo.a,{basic:!0,style:oc},r.a.createElement(go.a,{size:"large",content:e.name,style:{color:"#FA5"}}))),r.a.createElement(eo.a,{clearing:!0,attached:"bottom"},e.publisherUsername===a.userName?r.a.createElement(n.Fragment,null,m?r.a.createElement("div",{className:"ui three buttons"},r.a.createElement(to.a,{as:u.a,to:"/manageGallery/".concat(e.id),color:"pink",basic:!0},b("Edit")),r.a.createElement(to.a,{onClick:()=>{var t;t=e.id,s(r.a.createElement(nc,{motofyId:t}))},color:"google plus"},b("Delete")),r.a.createElement(to.a,{onClick:()=>{d(!1)}},b("Cancel"))):r.a.createElement(to.a,{onClick:()=>{d(!0)},color:"instagram",fluid:!0},b("Manage"))):e.embraced?r.a.createElement(to.a,{style:ic,negative:!0,loading:l,fluid:!0,onClick:()=>{return t=e.id,o(t),void c(t,"Unembraced Motofy",h);var t}},b("Embraced")):r.a.createElement(to.a,{style:ic,loading:l,fluid:!0,onClick:()=>{return t=e.id,i(t),void c(t,"Embraced Motofy",h);var t},color:"teal"},r.a.createElement(_i.a,{name:"heart"}),b("Embrace"))))}),cc=a(833),sc=a(208);var mc=Object(m.a)(({motofy:e})=>{const t=Object(n.useContext)(Ti),{rateMotofy:a}=t.motofyStore,{user:i}=t.userStore,{addFeedItem:o}=t.feedStore,{t:l}=Object(Li.a)(["gallery"]);let c=null===i||void 0===i?void 0:i.userName;const[s,m]=Object(n.useState)(!1),[u,d]=Object(n.useState)(),[b,h]=Object(n.useState)("");Object(n.useEffect)(()=>{h(e.publisherUsername),e.motofyScores.length>0&&e.motofyScores.some(e=>e.username===c)&&(d(e.motofyScores.find(e=>e.username===c).score),m(!0))},[e.motofyScores,c,e.publisherUsername]);return r.a.createElement(eo.a.Group,null,r.a.createElement(eo.a,{style:{display:"flex",flexDirection:"column",textAlign:"center",justifyContent:"space-around"}},r.a.createElement(oo.a.Group,null,r.a.createElement(oo.a.Header,null,l("Average Rating:")," ",e.averageRating),e.publisherUsername!==i.userName?r.a.createElement(n.Fragment,null,r.a.createElement(cc.a,{icon:"star",size:"large",onRate:(t,n)=>{((t,n)=>{a(n.rating,e,i),d(n.rating),t.preventDefault(),m(!0),o(e.id,"Rated Motofy",b)})(t,n)},defaultRating:e.averageRating,maxRating:5,disabled:s}),u?r.a.createElement(sc.a,null,l("You Gave This Motofy ")," ",u," ",l("Stars")):r.a.createElement(sc.a,null,l("You Have Not Rated Yet"))):r.a.createElement(n.Fragment,null,l("NB: You cannot rate your own motofy")))))});var uc=Object(m.a)(({embracers:e})=>{const{t:t}=Object(Li.a)(["gallery"]),a=t("Person"),i=t("People");return r.a.createElement(n.Fragment,null,r.a.createElement(eo.a,{textAlign:"center",style:{border:"none"},attached:"top",secondary:!0,inverted:!0,color:"teal"},e.length," ",1===e.length?a:i," ",t("embraced")),r.a.createElement(r.a.Fragment,null,r.a.createElement(so.a,{divided:!0},r.a.createElement(oo.a.Group,{divided:!0},e.map(e=>r.a.createElement(eo.a,{key:e.username,style:{position:"relative"}},r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:4},r.a.createElement(g.a,{size:"mini",circular:!0,src:e.image||"/assets/user.png"})),r.a.createElement(Bi.a.Column,{width:12},r.a.createElement(u.a,{to:"/profile/".concat(e.username)},r.a.createElement(oo.a.Extra,{as:"h5"},e.displayName),e.isOwner&&r.a.createElement(h.a,{style:{position:"top"},color:"teal",corner:"right"},"Pub"))))))))))}),dc=a(408);var bc=({motofy:e})=>{const{t:t}=Object(Li.a)(["gallery"]);return r.a.createElement(eo.a.Group,null,r.a.createElement(eo.a,{attached:"top",style:{display:"flex",flexDirection:"column",textAlign:"left",justifyContent:"center"}},r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(dc.a,null,r.a.createElement(Bi.a.Column,{width:2},r.a.createElement(g.a,{size:"mini",src:e.brandLogoUrl})),r.a.createElement(Bi.a.Column,{width:14},r.a.createElement("p",null,r.a.createElement("strong",null,e.brandName," - ")," ",e.model))))),r.a.createElement(eo.a,{attached:!0},r.a.createElement(Bi.a,null,r.a.createElement(dc.a,null,r.a.createElement(Bi.a.Column,{width:2},r.a.createElement(_i.a,{size:"large",color:"teal",name:"info",style:{iconStyle:{display:"flex",flexDirection:"column",textAlign:"right",justifyContent:"center"}}})),r.a.createElement(Bi.a.Column,{width:14},r.a.createElement("p",{style:{whiteSpace:"pre-wrap"}},e.description))))),r.a.createElement(eo.a,{attached:!0},r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(dc.a,null,r.a.createElement(Bi.a.Column,{width:2},r.a.createElement(_i.a,{name:"calendar",size:"large",color:"teal"})),r.a.createElement(Bi.a.Column,{width:14},r.a.createElement("span",null,t("Made")," ",e.yearOfProduction))))),r.a.createElement(eo.a,{attached:!0},r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(Bi.a.Column,{width:2},r.a.createElement(_i.a,{name:"marker",size:"large",color:"teal"})),r.a.createElement(Bi.a.Column,{width:14},r.a.createElement("span",null,t("In")," ",e.city,", ",e.countryName)))),r.a.createElement(eo.a,{attached:!0},r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(Bi.a.Column,{width:2},r.a.createElement(_i.a,{name:"motorcycle",size:"large",color:"teal"})),r.a.createElement(Bi.a.Column,{width:14},r.a.createElement("span",null," ",t("Engine")," ",e.cubicCentimeters,t("cc"),", ",t("done")," ",e.numberOfKilometers," ",t("kilometers"))))),r.a.createElement(eo.a,{attached:!0},r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(Bi.a.Column,{width:2},r.a.createElement(_i.a,{name:"euro sign",size:"large",color:"teal"})),r.a.createElement(Bi.a.Column,{width:14},r.a.createElement("span",null," ",t("Price paid")," ",e.pricePaid," ",t("Euro"),", ",t(" present value")," ",e.estimatedValue," Euro")))))};var hc=Object(m.a)(({match:e})=>{const t=Object(n.useContext)(Ti),{motofy:a,loadMotofy:i,loadingInitial:o}=t.motofyStore,{t:l}=Object(Li.a)(["gallery"]);return Object(n.useEffect)(()=>{i(e.params.id)},[i,e.params.id]),o||!a?r.a.createElement(ol,{content:l("Loading motofies...")}):r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{computer:12,mobile:16},r.a.createElement(lc,{motofy:a}),r.a.createElement(mc,{motofy:a}),r.a.createElement(bc,{motofy:a}),r.a.createElement(ac,null)),r.a.createElement(Bi.a.Column,{computer:4,mobile:16},r.a.createElement(uc,{embracers:a.embracers})))}),pc=a(264),gc=a.n(pc);var yc=({forumpost:e})=>{var t,a,n,i,o,l,c,s,m,d;const{t:b}=Object(Li.a)(["forum"]),p=" "+b("Response"),g=" "+b("Responses"),y=" "+b("Member"),E=" "+b("Members"),f=" "+b("Rating"),O=" "+b("Ratings");return r.a.createElement(eo.a.Group,{raised:!0},r.a.createElement(eo.a,null,r.a.createElement(go.a,{as:"h1",floated:"right"},e.title,r.a.createElement(gc.a,null)),r.a.createElement(gc.a,{floated:"right"},r.a.createElement(h.a,{pointing:"below",content:e.category})),r.a.createElement($i.a,{clearing:!0}),r.a.createElement(oo.a,null,r.a.createElement(oo.a.Image,{size:"tiny",src:"/assets/forumCategoryImages/".concat(e.category,".jpg"),floated:"left"}),r.a.createElement(oo.a.Content,null,r.a.createElement(oo.a.Description,null,r.a.createElement(r.a.Fragment,null,e.body)),r.a.createElement(oo.a.Extra,null)))),r.a.createElement(eo.a,null,r.a.createElement(_i.a,{name:"clock"})," ",b("Posted")," ",Object(cl.a)(new Date(e.dateAdded),new Date)," ",b("ago by")," ",r.a.createElement(u.a,{to:"/profile/".concat(e.userName)},e.displayName),(null===(t=e.commenters)||void 0===t?void 0:t.length)>0&&r.a.createElement(eo.a,null,e.numberOfComents>1?e.numberOfComents+p:e.numberOfComents+g," ",b("from")," ",(null===(a=e.commenters)||void 0===a?void 0:a.length)>1?(null===(n=e.commenters)||void 0===n?void 0:n.length)+E:(null===(i=e.commenters)||void 0===i?void 0:i.length)+y),(null===(o=e.forumpostRatings)||void 0===o?void 0:o.length)>0&&r.a.createElement(eo.a,null,e.forumpostRatings.length>1?(null===(l=e.forumpostRatings)||void 0===l?void 0:l.length)+O:(null===(c=e.forumpostRatings)||void 0===c?void 0:c.length)+f," ",b("from")," ",(null===(s=e.forumpostRatings)||void 0===s?void 0:s.length)>1?(null===(m=e.forumpostRatings)||void 0===m?void 0:m.length)+E:(null===(d=e.forumpostRatings)||void 0===d?void 0:d.length)+y)),r.a.createElement(eo.a,null,r.a.createElement(to.a,{as:u.a,to:"/forum/".concat(e.id),fluid:!0,content:b("View"),color:"instagram"})))};var Ec=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{forumpostsByDate:t}=e.forumPostStore;return r.a.createElement(n.Fragment,null,t.map(([e,t])=>r.a.createElement(n.Fragment,{key:e},r.a.createElement(oo.a.Group,{divided:!0},t.map(e=>r.a.createElement(yc,{forumpost:e,key:e.id}))))))}),fc=[{key:"Offer information",text:"Offer information",value:"Offer information"},{key:"Ask for assistance",text:"Ask for assistance",value:"Ask for assistance"},{key:"Ask for advice",text:"Ask for advice",value:"Ask for advice"}];var Oc=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{predicate:t,setPredicate:a}=e.forumPostStore,{t:i}=Object(Li.a)(["forum"]),o={textAlign:"center"};return r.a.createElement(n.Fragment,null,r.a.createElement(d.a,{vertical:!0,size:"large",style:{width:"100%"}},r.a.createElement(d.a.Item,{active:t.has("search")},r.a.createElement(Zi.a,{icon:"search",placeholder:i("Search all"),onKeyDown:e=>(e=>{"Enter"===e.key&&(a("search",e.target.value),e.target.value="")})(e)})),r.a.createElement(d.a.Item,null,r.a.createElement(b.a,{placeholder:i("Filter by category"),selection:!0,fluid:!0,search:!0,options:fc,onChange:(e,t)=>{a("category",t.value)},clearable:!0})),r.a.createElement($i.a,{horizontal:!0,content:i("or choose from built in filters")}),r.a.createElement(d.a.Item,{active:0===t.size,onClick:()=>a("all","true"),color:"blue",name:"all",icon:"arrows alternate",content:i("All Posts"),style:o}),r.a.createElement(d.a.Item,{active:t.has("iAsked"),onClick:()=>a("iAsked","true"),color:"blue",name:"iAsked",icon:"question circle outline",content:i("I Asked"),style:o}),r.a.createElement(d.a.Item,{active:t.has("iRated"),onClick:()=>a("iRated","true"),color:"blue",name:"iRated",icon:"heart outline",content:i("I rated"),style:o}),r.a.createElement(d.a.Item,{active:t.has("trending"),onClick:()=>a("trending","true"),color:"blue",name:"trending",icon:"globe",content:i("Trending"),style:o}),r.a.createElement(d.a.Item,{active:t.has("iFollow"),onClick:()=>a("iFollow","true"),color:"blue",name:"country",icon:"users",content:i("By people I follow"),style:o})))});var jc=()=>r.a.createElement(n.Fragment,null,r.a.createElement(Xi.a,{fluid:!0},r.a.createElement(eo.a.Group,null,r.a.createElement(eo.a,{style:{minHeight:110}},r.a.createElement(Xi.a,null,r.a.createElement(Xi.a.Header,{image:!0},r.a.createElement(Xi.a.Line,null),r.a.createElement(Xi.a.Line,null)),r.a.createElement(Xi.a.Paragraph,null,r.a.createElement(Xi.a.Line,null)))),r.a.createElement(eo.a,null,r.a.createElement(Xi.a,null,r.a.createElement(Xi.a.Line,null),r.a.createElement(Xi.a.Line,null))),r.a.createElement(eo.a,{secondary:!0,style:{minHeight:70}}),r.a.createElement(eo.a,{clearing:!0},r.a.createElement(to.a,{disabled:!0,color:"blue",fluid:!0,content:"View"})))));var vc=()=>{const e=Object(n.useContext)(Ti),{setPredicate:t}=e.forumPostStore,{closeModal:a}=e.modalStore,{t:i}=Object(Li.a)(["modals"]);return r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(Zi.a,{style:{width:"100%"},icon:"search",placeholder:i("Search all"),onKeyDown:e=>(e=>{"Enter"===e.key&&(t("search",e.target.value),e.target.value="",a())})(e)})))};var wc=()=>{const e=Object(n.useContext)(Ti),{setPredicate:t}=e.forumPostStore,{closeModal:a}=e.modalStore,{t:i}=Object(Li.a)(["modals"]);return r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(b.a,{placeholder:i("Filter by category"),selection:!0,fluid:!0,search:!0,options:fc,onChange:(e,n)=>{t("category",n.value),a()},clearable:!0})))};var Cc=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{info:t}=e.forumPostStore;return r.a.createElement("div",{className:"mobileInfo"},t.toUpperCase())});var Sc=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{predicate:t,setPredicate:a,setInfo:i}=e.forumPostStore,{openModal:o}=e.modalStore,{t:l}=Object(Li.a)(["mobile-info"]);Object(n.useEffect)(()=>{i(l("All posts"))},[i,l]);const c=()=>{switch(t.keys().next().value){case"iAsked":i(l("My posts"));break;case"iRated":i(l("Posts I rated"));break;case"trending":i(l("Trending"));break;case"iFollow":i(l("Posts I follow"));break;case"category":i(l("Search by category"));break;case"search":i(l("Search all"));break;default:i(l("All posts"))}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{fluid:!0,widths:7},r.a.createElement(d.a.Item,{active:0===t.size,onClick:()=>{a("all","true"),c()},color:"blue",icon:"home"}),r.a.createElement(d.a.Item,{active:t.has("iAsked"),onClick:()=>{a("iAsked","true"),c()},color:"blue",icon:"user circle"}),r.a.createElement(d.a.Item,{active:t.has("iRated"),onClick:()=>{a("iRated","true"),c()},color:"blue",icon:"heart outline"}),r.a.createElement(d.a.Item,{active:t.has("trending"),onClick:()=>{a("trending","true"),c()},color:"blue",icon:"diamond"}),r.a.createElement(d.a.Item,{active:t.has("iFollow"),onClick:()=>{a("iFollow","true"),c()},color:"blue",icon:"eye"}),r.a.createElement(d.a.Item,{active:t.has("category"),onClick:()=>{a("category","true"),o(r.a.createElement(wc,null)),c()},color:"blue",icon:"filter"}),r.a.createElement(d.a.Item,{active:t.has("search"),onClick:()=>{a("search","true"),o(r.a.createElement(vc,null)),c()},color:"blue",icon:"search"})),r.a.createElement(Cc,null))});var kc=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{loadForumPosts:t,loadingInitial:a,setPage:i,page:o,totalPages:l}=e.forumPostStore,[c,s]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{t()},[t]),r.a.createElement("div",null,r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{mobile:16,tablet:16,className:"mobile only"},r.a.createElement(Sc,null)),r.a.createElement(Bi.a.Column,{computer:11,mobile:16},a&&0===o?r.a.createElement(jc,null):r.a.createElement(Wi.a,{pageStart:0,loadMore:()=>{s(!0),i(o+1),t().then(()=>s(!1))},hasMore:!c&&o+1<l,initialLoad:!1},r.a.createElement(Ec,null))),r.a.createElement(Bi.a.Column,{width:5,className:"mobile hidden"},r.a.createElement(Gi.a,{style:{marginRight:30,position:"fixed"}},r.a.createElement(Oc,null))),r.a.createElement(Bi.a.Column,{width:10},r.a.createElement(Vi.a,{active:c}))))});class Pc{constructor(e){this.id=void 0,this.title="",this.body="",this.dateAdded="",this.category="",e&&Object.assign(this,e)}}var Ic=Object(m.a)(({match:e,history:t})=>{const a=Object(n.useContext)(Ti),{createForumpost:i,editForumpost:o,submitting:l,loadForumPost:c}=a.forumPostStore,{user:s}=a.userStore,{addFeedItem:m}=a.feedStore,[u,d]=Object(n.useState)(!1),[b,p]=Object(n.useState)(new Pc),[g,y]=Object(n.useState)(!1),{t:E}=Object(Li.a)(["forms"]),f=Object(fo.combineValidators)({title:Object(fo.isRequired)({message:E("Title is required")}),category:Object(fo.isRequired)({message:E("Category is required")}),body:Object(fo.composeValidators)(Object(fo.isRequired)({message:E("Description is required")}),Object(fo.hasLengthGreaterThan)(4)({message:E("Description needs to be at least 5 characters")}))()});Object(n.useEffect)(()=>{e.params.id&&(d(!0),y(!0),c(e.params.id).then(e=>p(new Pc(e))).finally(()=>y(!1)))},[c,e.params.id,d]);return r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:3}),r.a.createElement(Bi.a.Column,{computer:10,mobile:16},r.a.createElement(eo.a,{clearing:!0},r.a.createElement(Eo.b,{validate:f,initialValues:b,onSubmit:e=>{let t=Object(yn.a)();const{...a}=e;if(a.id)o(a);else{let e={...a,id:t,dateAdded:(new Date).toISOString(),displayName:null===s||void 0===s?void 0:s.displayName,userName:null===s||void 0===s?void 0:s.userName};i(e),m(t,"Added Forumpost")}},render:({handleSubmit:e,invalid:a,pristine:n})=>r.a.createElement(Oo.a,{onSubmit:e,loading:g},u&&r.a.createElement(h.a,{content:E("Title")}),r.a.createElement(Eo.a,{placeholder:E("Title"),name:"title",value:b.title,component:wo}),u&&r.a.createElement(h.a,{content:E("Body")}),r.a.createElement(Eo.a,{placeholder:E("Body"),name:"body",rows:4,value:b.body,component:Mo}),u&&r.a.createElement(h.a,{content:E("Category")}),r.a.createElement(Eo.a,{placeholder:E("Category"),name:"category",options:fc,value:b.category,component:Ro}),r.a.createElement(to.a,{loading:l,disabled:g||a||n,floated:"right",positive:!0,type:"submit",content:E("Submit")}),r.a.createElement(to.a,{floated:"right",disabled:g,type:"button",content:E("Cancel"),onClick:b.id?()=>t.push("/forum/".concat(b.id)):()=>t.push("/forum")}))}))))});var xc=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{createHubConnection:t,stopHubConnection:a,addComment:i,forumpost:o}=e.forumPostStore,{t:l}=Object(Li.a)(["comments"]);return Object(n.useEffect)(()=>(t(o.id,"RecieveForumPostComment"),()=>{a()}),[t,a,o]),r.a.createElement(n.Fragment,null,r.a.createElement(eo.a,{textAlign:"center",attached:"top",inverted:!0,color:"teal",style:{border:"none"}},r.a.createElement(go.a,null,l("Comments"))),r.a.createElement(eo.a,{attached:!0},r.a.createElement(ll.a.Group,{style:{maxWidth:"none"}},o&&o.commentForumPosts&&o.commentForumPosts.map(e=>r.a.createElement(ll.a,{key:e.id},r.a.createElement(ll.a.Avatar,{src:e.image||"/assets/user.png"}),r.a.createElement(ll.a.Content,null,r.a.createElement(ll.a.Author,{as:u.a,to:"/profile/".concat(e.username)},e.displayName),r.a.createElement(ll.a.Metadata,null,r.a.createElement("div",null,Object(cl.a)(new Date(e.createdAt),new Date))),r.a.createElement(ll.a.Text,null,e.body)))),r.a.createElement(Eo.b,{onSubmit:i,render:({handleSubmit:e,submitting:t,form:a,pristine:n})=>r.a.createElement(Oo.a,{onSubmit:()=>e().then(()=>a.reset())},r.a.createElement(Eo.a,{name:"body",component:Mo,rows:2,placeholder:l("Add your comment")}),r.a.createElement(to.a,{content:l("Add Reply"),labelPosition:"left",icon:"edit",color:"instagram",loading:t,disabled:n}))}))))});const Mc={filter:"brightness(90%)"},zc={position:"absolute",bottom:"15%",left:"5%",width:"100%",height:"auto",color:"white"};var Rc=Object(m.a)(({forumpost:e})=>r.a.createElement(eo.a.Group,{raised:!0},r.a.createElement(eo.a,{basic:!0,attached:"top",style:{padding:"0"}},r.a.createElement(g.a,{src:"/assets/forumCategoryImages/".concat(e.category,".jpg"),fluid:!0,style:Mc}),r.a.createElement(eo.a,{basic:!0,style:zc},r.a.createElement(oo.a.Group,null,r.a.createElement(oo.a,null,r.a.createElement(oo.a.Content,null,r.a.createElement("p",null,e.category))))))));var Ac=Object(m.a)(({forumpost:e})=>{const t=Object(n.useContext)(Ti),{rated:a}=t.forumPostStore,{t:i}=Object(Li.a)(["forum"]);return r.a.createElement(eo.a.Group,null,r.a.createElement(eo.a,{attached:"top",textAlign:"center"},r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:8},r.a.createElement(Bi.a.Row,null,r.a.createElement("h1",null,e.title),e.forumpostRating>0&&r.a.createElement(cc.a,{icon:"star",size:"large",defaultRating:e.forumpostRating,maxRating:5}))),r.a.createElement(Bi.a.Column,{width:8},r.a.createElement(u.a,{to:"/profile/".concat(e.userName)},r.a.createElement("img",{className:"ui centered circular tiny image",src:e.authorPhotoUrl||"/assets/user.png",alt:"user"})))),r.a.createElement($i.a,{vertical:!0},i("By")," ",e.displayName)),r.a.createElement(eo.a,{attached:!0},r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(Bi.a.Column,{width:1},r.a.createElement(_i.a,{name:"info",size:"large",color:"teal"})),r.a.createElement(Bi.a.Column,{width:15},r.a.createElement("i",null,r.a.createElement("span",null,i("Posted")," ",Object(cl.a)(new Date(e.dateAdded),new Date))," ",i("ago in")," ",r.a.createElement("span",null,"'",e.category,"' ",i("category")," "),e.numberOfComents>0&&r.a.createElement("span",null,", ",i("so far with")," ",e.numberOfComents," ",i("comments")," "),e.forumpostRating>0&&r.a.createElement("span",null,", ",i("rated")," ",e.forumpostRating.toFixed(2)),a&&r.a.createElement("span",null,", ",i("you already rated")," "))))),r.a.createElement(eo.a,{attached:!0},r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(Bi.a.Column,{width:16},r.a.createElement("span",{style:{whiteSpace:"pre-wrap"}},e.body)))))});var Fc=({forumpostId:e})=>{const t=Object(n.useContext)(Ti),{deleteForumpost:a}=t.forumPostStore,{closeModal:i}=t.modalStore;let o=Object(l.g)();const{t:c}=Object(Li.a)(["modals"]);return r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(go.a,{as:"h2",content:c("Irreversible action! Are you sure you want to do this?"),color:"teal",textAlign:"center"}),r.a.createElement(n.Fragment,null,r.a.createElement(to.a,{fluid:!0,onClick:()=>{a(e).then(()=>i()).finally(()=>o.push("/forum"))},color:"teal",content:c("Yes, delete it"),floated:"left"}),r.a.createElement(to.a,{fluid:!0,onClick:()=>{i()},content:c("No, don't delete"),floated:"right"}))))};var Nc=Object(m.a)(({forumpost:e})=>{const t=Object(n.useContext)(Ti),{openModal:a}=t.modalStore,{t:i}=Object(Li.a)(["forum"]),[o,l]=Object(n.useState)(!1);return r.a.createElement(r.a.Fragment,null,r.a.createElement(eo.a,{clearing:!0,attached:"bottom"},r.a.createElement(r.a.Fragment,null,o?r.a.createElement("div",{className:"ui three buttons"},r.a.createElement(to.a,{as:u.a,to:"/manageForum/".concat(e.id),color:"pink",basic:!0},i("Edit")),r.a.createElement(to.a,{onClick:()=>{a(r.a.createElement(Fc,{forumpostId:e.id})),l(!1)},color:"google plus"},i("Delete")),r.a.createElement(to.a,{onClick:()=>{l(!1)}},i("Cancel"))):r.a.createElement(to.a,{onClick:()=>{l(!0)},color:"instagram",fluid:!0},i("Manage your post")))))});var Dc=Object(m.a)(({forumpost:e})=>{const t=Object(n.useContext)(Ti),{user:a}=t.userStore,{setRating:i}=t.forumPostStore,{addFeedItem:o}=t.feedStore,[l,c]=Object(n.useState)(!1),{t:s}=Object(Li.a)(["forum"]),[m,u]=Object(n.useState)("");Object(n.useEffect)(()=>{var t;(u(e.userName),e.forumpostRatings.length>0)&&(null===(t=e.forumpostRatings)||void 0===t||t.forEach(e=>{e.authorUsername===(null===a||void 0===a?void 0:a.userName)&&c(!0)}));console.log(Object(y.j)(m))},[e,a,m]);const d=(t,a)=>{c(!0),i(e.id,a.value),o(e.id,"Rated Forumpost",m)};return r.a.createElement(r.a.Fragment,null,(null===a||void 0===a?void 0:a.userName)!==e.userName&&!l&&r.a.createElement(eo.a,{attached:!0},r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(Bi.a.Column,{width:5,style:{width:"100%"}},r.a.createElement(to.a,{fluid:!0,onClick:(e,t)=>d(0,t),content:s("Interesting"),value:"3"})),r.a.createElement(Bi.a.Column,{width:5,style:{width:"100%"}},r.a.createElement(to.a,{fluid:!0,onClick:(e,t)=>d(0,t),content:s("Usefull"),value:"4"})),r.a.createElement(Bi.a.Column,{width:5,style:{width:"100%"}},r.a.createElement(to.a,{fluid:!0,onClick:(e,t)=>d(0,t),content:s("Helping"),value:"5"})))))});var Uc=Object(m.a)(({forumpost:e})=>{var t,a,i,o,l;const{t:c}=Object(Li.a)(["forum"]),s=" "+c("person"),m=" "+c("people");return r.a.createElement(n.Fragment,null,r.a.createElement(eo.a,{textAlign:"center",style:{border:"none"},attached:"top",secondary:!0,inverted:!0,color:"teal"},void 0!==(null===(t=e.commenters)||void 0===t?void 0:t.length)&&(null===(a=e.commenters)||void 0===a?void 0:a.length)>1?(null===(i=e.commenters)||void 0===i?void 0:i.length)+m:(null===(o=e.commenters)||void 0===o?void 0:o.length)+s," ",c("participating")),r.a.createElement(eo.a,{attached:!0},r.a.createElement(so.a,{relaxed:!0,divided:!0},r.a.createElement(oo.a.Group,{divided:!0},null===(l=e.commenters)||void 0===l?void 0:l.map(e=>r.a.createElement(eo.a,{key:e.id},r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:6},r.a.createElement(g.a,{size:"mini",circular:!0,src:e.image})),r.a.createElement(Bi.a.Column,{width:10},r.a.createElement(u.a,{to:"/profile/".concat(e.username)},r.a.createElement(oo.a.Header,{as:"h3"},e.displayName))))))))))});var Tc=Object(m.a)(({match:e})=>{const t=Object(n.useContext)(Ti),{forumpost:a,loadForumPost:i,loadingInitial:o,rated:l}=t.forumPostStore,{user:c}=t.userStore,{t:s}=Object(Li.a)(["forum"]);return Object(n.useEffect)(()=>{i(e.params.id)},[i,e.params.id]),o||!a?r.a.createElement(ol,{content:s("Loading forum post details...")}):r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{computer:11,mobile:16},r.a.createElement(Ac,{forumpost:a}),(null===c||void 0===c?void 0:c.userName)!==a.userName&&!l&&r.a.createElement(Dc,{forumpost:a}),a.userName===(null===c||void 0===c?void 0:c.userName)&&r.a.createElement(Nc,{forumpost:a}),r.a.createElement(xc,null)),r.a.createElement(Bi.a.Column,{computer:5,mobile:16},r.a.createElement(Bi.a.Row,{className:"mobile hidden"},r.a.createElement(Rc,{forumpost:a})),r.a.createElement(Uc,{forumpost:a})))}),Lc=a(810);const Hc=[{key:"1",text:"Not satisfied at all",value:"1"},{key:"2",text:"It could be better, but ok",value:"2"},{key:"3",text:"Satified",value:"3"},{key:"4",text:"Very satisfied",value:"4"},{key:"5",text:"Totally happy",value:"5"}],qc=[{key:"Yes",text:"Yes",value:"1"},{key:"No",text:"No",value:"0"}];var Bc=({hasRecommended:e,mechanicId:t,rating:a,testimonial:i,user:o})=>{const l=Object(n.useContext)(Ti),{becomeCustomer:c,recommend:s,rate:m,addTestimonial:u,setCloseCustomerForm:d}=l.mechanicStore,{closeModal:b}=l.modalStore;return r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(go.a,{as:"h2",content:"Become a customer of this moto shop?",color:"teal",textAlign:"center"}),r.a.createElement(n.Fragment,null,r.a.createElement(to.a,{onClick:()=>(d(),c(t,o,e).then(()=>s(t,null===o||void 0===o?void 0:o.userName,e)).then(()=>m(t,a,o)).then(()=>u(t,i,o)).catch(e=>console.log(e)),void b()),color:"teal",content:"Yes, gladly!",floated:"left"}),r.a.createElement(to.a,{onClick:()=>{b()},content:"No, cancel",floated:"right"}))))};const Gc=Object(fo.combineValidators)({recommend:Object(fo.isRequired)("recommend"),rating:Object(fo.isRequired)("rating"),testimonial:Object(fo.composeValidators)(Object(fo.isRequired)("Testimonial"),Object(fo.hasLengthGreaterThan)(4)({message:"Testimonial needs to be at least 25 characters"}))()});var Vc=({mechanicId:e})=>{const t=Object(n.useContext)(Ti),{user:a}=t.userStore,{openModal:i}=t.modalStore,{t:o}=Object(Li.a)(["forms"]),{setCloseCustomerForm:l}=t.mechanicStore;return r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(eo.a,{clearing:!0},r.a.createElement(go.a,{as:"h2",content:o("Register as a customer of this mechanic is enabling you to review, evaluate, comment and more..."),color:"teal",textAlign:"center"}),r.a.createElement(Eo.b,{validate:Gc,onSubmit:t=>{let n=null===a||void 0===a?void 0:a.userName,o=t.rating,l=t.recommend,c=t.testimonial;i(r.a.createElement(Bc,{mechanicId:e,username:n,rating:o,hasRecommended:l,testimonial:c,user:a}))},render:({handleSubmit:e,invalid:t,pristine:a})=>r.a.createElement(Oo.a,{onSubmit:e},r.a.createElement(Eo.a,{name:"rating",placeholder:o("How would you evaluate this shop?"),options:Hc,component:Ro}),r.a.createElement(Eo.a,{name:"recommend",placeholder:o("Would you recommend this shop?"),options:qc,component:Ro}),r.a.createElement(Eo.a,{name:"testimonial",rows:4,placeholder:o("Please write a couple of words about your experience with this mechanic shop"),component:Mo}),r.a.createElement(Lc.a,{name:"checkForUpdates",onChange:(e,t)=>{t.checked}}),r.a.createElement(h.a,{onClick:()=>console.log("open modal"),content:o("I have read and understood the rules of a portal")}),r.a.createElement(to.a,{floated:"right",type:"button",content:o("No, don't register me"),onClick:()=>l()}),r.a.createElement(to.a,{floated:"right",disabled:t||a,positive:!0,type:"submit",content:o("Yes, register me as a customer")}))}))))};var Yc=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{createHubConnection:t,stopHubConnection:a,addComment:i,mechanic:o}=e.mechanicStore,{t:l}=Object(Li.a)(["comments"]);return Object(n.useEffect)(()=>(t(o.id,"RecieveMechanicComment"),()=>{a()}),[t,a,o]),r.a.createElement(r.a.Fragment,null,r.a.createElement(eo.a,{textAlign:"center",attached:"top",inverted:!0,color:"teal",style:{border:"none"}},r.a.createElement(go.a,null,l("Chat about this mechanic"))),r.a.createElement(eo.a,{attached:!0},r.a.createElement(ll.a.Group,{style:{maxWidth:"none"}},o&&o.commentMechanics&&o.commentMechanics.map(e=>r.a.createElement(ll.a,{key:e.id},r.a.createElement(ll.a.Avatar,{src:e.image||"/assets/user.png"}),r.a.createElement(ll.a.Content,null,r.a.createElement(ll.a.Author,{as:u.a,to:"/profile/".concat(e.username)},e.displayName),r.a.createElement(ll.a.Metadata,null,r.a.createElement("div",null,Object(cl.a)(new Date(e.createdAt),new Date))," ",l("ago")),r.a.createElement(ll.a.Text,null,e.body)))),r.a.createElement(Eo.b,{onSubmit:i,render:({handleSubmit:e,submitting:t,form:a,pristine:n})=>r.a.createElement(Oo.a,{onSubmit:()=>e().then(()=>a.reset())},r.a.createElement(Eo.a,{name:"body",component:Mo,rows:2,placeholder:l("Add your comment")}),r.a.createElement(to.a,{content:l("Add Reply"),labelPosition:"left",icon:"edit",color:"instagram",loading:t,fluid:!0,disabled:n}))}))))});const Wc={filter:"brightness(90%) contrast(50%) drop-shadow(4px 4px 8px teal)"},Kc={position:"absolute",bottom:"5%",left:"5%",width:"100%",height:"auto",color:"white"};var Zc=Object(m.a)(({mechanic:e})=>{const{t:t}=Object(Li.a)(["mechanics"]);return r.a.createElement(eo.a.Group,null,r.a.createElement(eo.a,{basic:!0,attached:"top",style:{padding:"0"}},r.a.createElement(g.a,{src:e.photoUrl||"/assets/placeholder.png",fluid:!0,style:Wc,rounded:!0}),r.a.createElement(eo.a,{basic:!0,style:Kc},r.a.createElement(oo.a.Group,null,r.a.createElement(oo.a,null,r.a.createElement(oo.a.Content,null,r.a.createElement(go.a,{size:"huge",content:e.name,style:{color:"white"}}),r.a.createElement("p",null,t("In business since")," ",e.yearOfStart),r.a.createElement("p",null,t("Posted by")," ",r.a.createElement("strong",null,e.publisher))))))))});var $c=Object(m.a)(({mechanic:e})=>{const{t:t}=Object(Li.a)(["mechanics"]);return r.a.createElement(eo.a.Group,{raised:!0},e.brands.length>0&&r.a.createElement(eo.a,{attached:"top"},r.a.createElement(h.a,{pointing:"below"}," ",r.a.createElement(_i.a,{name:"trademark"})," "," ",t("Specialized in")," "," "," ",e.brands.length," "," "," ",t("brands")),r.a.createElement(Bi.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(Bi.a.Column,{width:1},r.a.createElement(_i.a,{size:"large",color:"teal",name:"trademark"})),r.a.createElement(Bi.a.Column,{width:15},r.a.createElement(so.a,{horizontal:!0},e.brands.map(e=>r.a.createElement(so.a.Item,{key:e.name},r.a.createElement(p.a,{header:e.name,trigger:r.a.createElement(g.a,{size:"mini",circular:!0,src:e.logoUrl||"/assets/user.png",bordered:!0})})))))))),r.a.createElement(eo.a,{attached:!0},r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:1},r.a.createElement(_i.a,{size:"large",color:"teal",name:"info"})),r.a.createElement(Bi.a.Column,{width:15},r.a.createElement("p",null,e.description)))),r.a.createElement(eo.a,{attached:!0},r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(Bi.a.Column,{width:1},r.a.createElement(_i.a,{name:"calendar",size:"large",color:"teal"})),r.a.createElement(Bi.a.Column,{width:15},r.a.createElement("span",null,t("In business since"),": ",e.yearOfStart)))),r.a.createElement(eo.a,{attached:!0},r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(Bi.a.Column,{width:1},r.a.createElement(_i.a,{name:"address card",size:"large",color:"teal"})),r.a.createElement(Bi.a.Column,{width:11},r.a.createElement("span",null,e.city,", ",e.countryName,", ",e.address)))),r.a.createElement(eo.a,{attached:!0},r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(Bi.a.Column,{width:1},r.a.createElement(_i.a,{name:"tty",size:"large",color:"teal"})),r.a.createElement(Bi.a.Column,{width:11},r.a.createElement("span",null,t("Phone number"),": ",e.phone||t("Phone not available"))))),r.a.createElement(eo.a,{attached:!0},r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(Bi.a.Column,{width:1},r.a.createElement(_i.a,{name:"envelope open",size:"large",color:"teal"})),r.a.createElement(Bi.a.Column,{width:11},r.a.createElement("span",null,t("Email address"),": ",e.email||t("Email address not available"))))),r.a.createElement(eo.a,{attached:!0},r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(Bi.a.Column,{width:1},r.a.createElement(_i.a,{name:"internet explorer",size:"large",color:"teal"})),r.a.createElement(Bi.a.Column,{width:11},r.a.createElement("span",null,t("Website"),": ",e.website||t("Website not available"))))),r.a.createElement(eo.a,{attached:"bottom"},r.a.createElement(Bi.a,{verticalAlign:"middle"},r.a.createElement(Bi.a.Column,{width:1},r.a.createElement(_i.a,{name:"calendar check outline",size:"large",color:"teal"})),r.a.createElement(Bi.a.Column,{width:11},r.a.createElement("span",null,t("Published"),":"," ",Object(cl.a)(new Date(e.datePublished),new Date))," ",t("ago")))))});var _c=({mechanicId:e})=>{const t=Object(n.useContext)(Ti),{deleteMechanic:a}=t.mechanicStore,{closeModal:i}=t.modalStore;let o=Object(l.g)();const{t:c}=Object(Li.a)(["modals"]);return r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(go.a,{as:"h2",content:c("Sure you want to do this (cannot undo)?"),color:"teal",textAlign:"center"}),r.a.createElement(n.Fragment,null,r.a.createElement(to.a,{fluid:!0,onClick:()=>(a(e),i(),void o.push("/mechanics")),color:"teal",content:c("Yes, delete it!"),floated:"left"}),r.a.createElement(to.a,{fluid:!0,onClick:()=>{i()},content:c("No, cancel"),floated:"right"}))))};var Jc=Object(m.a)(({mechanic:e})=>{const t=Object(n.useContext)(Ti),{openModal:a}=t.modalStore,{user:i}=t.userStore,{t:o}=Object(Li.a)(["mechanics"]),[l,c]=Object(n.useState)(!1),{isCustomer:s,setCustomer:m,setOpenCustomerForm:d,openCustomerForm:b,setCloseCustomerForm:h}=t.mechanicStore,p=Object(n.useCallback)(e=>{e.customers.forEach(e=>{i.userName===e.username&&m(!0)})},[m,i]);Object(n.useEffect)(()=>(p(e),()=>{m(!1),h()}),[p,e,m,h]);return r.a.createElement(eo.a.Group,null,r.a.createElement(eo.a,{clearing:!0,raised:!0},r.a.createElement(oo.a,null,e.name),e.publisherUsername!==(null===i||void 0===i?void 0:i.userName)&&r.a.createElement(n.Fragment,null,!s&&!b&&r.a.createElement(to.a,{onClick:()=>{d()},color:"instagram",fluid:!0},o("Register As Customer"))),e.publisherUsername===(null===i||void 0===i?void 0:i.userName)&&(l?r.a.createElement("div",{className:"ui three buttons"},r.a.createElement(to.a,{as:u.a,to:"/manageMechanic/".concat(e.id),color:"pink",basic:!0},o("Edit")),r.a.createElement(to.a,{onClick:()=>{var t;t=e.id,a(r.a.createElement(_c,{mechanicId:t}))},color:"red"},o("Delete")),r.a.createElement(to.a,{onClick:()=>{c(!1)}},o("Cancel"))):r.a.createElement(to.a,{onClick:()=>{c(!0)},color:"instagram",fluid:!0},o("Manage mechanic")))))});var Qc=({customer:e,mechanic:t})=>{var a,i;const o=Object(n.useContext)(Ti),{closeModal:l}=o.modalStore;return r.a.createElement(n.Fragment,null,r.a.createElement(s.a,{text:!0},r.a.createElement(eo.a,{textAlign:"center",style:{border:"none"},attached:"top",secondary:!0,inverted:!0,color:"teal"},r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:10},r.a.createElement("p",null,"Published "," ",Object(cl.a)(new Date(null===(a=e.testimonial)||void 0===a?void 0:a.dateAdded),new Date)," ","ago"," "),r.a.createElement(go.a.Subheader,{as:"h2",color:"pink"},r.a.createElement(u.a,{to:"/profile/".concat(e.username),onClick:()=>l()},"by ",e.displayName))),r.a.createElement(Bi.a.Column,{width:3},r.a.createElement(g.a,{src:t.photoUrl,size:"small",floated:"left"})))),r.a.createElement(eo.a,null,r.a.createElement(g.a,{src:e.image,size:"tiny",circular:!0,floated:"left"}),r.a.createElement("p",{style:{whiteSpace:"pre-wrap"}},null===(i=e.testimonial)||void 0===i?void 0:i.text),r.a.createElement(to.a,{fluid:!0,onClick:()=>l(),content:"Close"}))))};var Xc=Object(m.a)(({mechanic:e})=>{const t=Object(y.j)(e),a=Object(n.useContext)(Ti),{openModal:i}=a.modalStore,{t:o}=Object(Li.a)(["mechanics"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(n.Fragment,null,r.a.createElement(eo.a,{textAlign:"center",style:{border:"none"},attached:"top",secondary:!0,inverted:!0,color:"teal"},t.customers&&t.customers.length>1?t.customers.length+o("People are customers"):t.customers.length+o("Person is customer"),o("of this shop")),r.a.createElement(r.a.Fragment,null,r.a.createElement(so.a,{divided:!0},r.a.createElement(oo.a.Group,{divided:!0},t.customers&&t.customers.map(t=>r.a.createElement(eo.a,{key:t.username},r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:4},r.a.createElement(g.a,{size:"mini",circular:!0,src:t.image||"/assets/user.png"})),r.a.createElement(Bi.a.Column,{width:10},r.a.createElement(u.a,{to:"/profile/".concat(t.username)},r.a.createElement(oo.a.Extra,{as:"h5"},t.displayName,t.customerRecommended&&r.a.createElement("p",{style:{color:"green"}},o("Recommending"))),t.isOwner&&r.a.createElement(h.a,{style:{position:"top"},color:"teal",corner:"right"},o("Owner")))),r.a.createElement(Bi.a.Column,{width:2},t.testimonial&&r.a.createElement(p.a,{content:t.displayName+o("'s testimony about")+e.name,className:"computer large screen only",trigger:r.a.createElement(to.a,{circular:!0,icon:"comment alternate",color:"instagram",onClick:()=>((e,t)=>{i(r.a.createElement(Qc,{customer:e,mechanic:t}))})(t,e)})}))))))))))});var es=Object(m.a)(({match:e})=>{const t=Object(n.useContext)(Ti),{t:a}=Object(Li.a)(["mechanics"]),[i,o]=Object(n.useState)(!1),{mechanic:l,loadMechanic:c,loadingInitial:s,openCustomerForm:m,isCustomer:u}=t.mechanicStore;return Object(n.useEffect)(()=>{c(e.params.id),o(!0)},[c,e.params.id]),!s&&l&&i?r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{computer:11,mobile:16},r.a.createElement(Zc,{mechanic:l}),r.a.createElement(Jc,{mechanic:l}),m&&r.a.createElement(Vc,{mechanicId:l.id}),r.a.createElement($c,{mechanic:l}),u&&r.a.createElement(Yc,null)),r.a.createElement(Bi.a.Column,{computer:4,mobile:16},r.a.createElement(Xc,{mechanic:l}))):r.a.createElement(ol,{content:a("Loading mechanic shop...")})});class ts{constructor(e){this.id=void 0,this.photoUrl="",this.name="",this.owner="",this.description="",this.yearOfStart="",this.datePublished="",this.country="",this.countryName="",this.countryId="",this.city="",this.address="",this.email="",this.phone="",this.website="",this.customers=void 0,this.file=void 0,this.brands=[],e&&Object.assign(this,e)}}const as=[{key:"1990",text:"1990",value:"1990"},{key:"1991",text:"1991",value:"1991"},{key:"1992",text:"1992",value:"1992"},{key:"1993",text:"1993",value:"1993"},{key:"1994",text:"1994",value:"1994"},{key:"1995",text:"1995",value:"1995"},{key:"1996",text:"1996",value:"1996"},{key:"1997",text:"1997",value:"1997"},{key:"1998",text:"1998",value:"1998"},{key:"1999",text:"1999",value:"1999"},{key:"2000",text:"2000",value:"2000"},{key:"2001",text:"2001",value:"2001"},{key:"2002",text:"2002",value:"2002"},{key:"2003",text:"2003",value:"2003"},{key:"2004",text:"2004",value:"2004"},{key:"2005",text:"2005",value:"2005"},{key:"2006",text:"2006",value:"2006"},{key:"2007",text:"2007",value:"2007"},{key:"2008",text:"2008",value:"2008"},{key:"2009",text:"2009",value:"2009"},{key:"2010",text:"2010",value:"2010"},{key:"2011",text:"2011",value:"2011"},{key:"2012",text:"2012",value:"2012"},{key:"2013",text:"2013",value:"2013"},{key:"2014",text:"2014",value:"2014"},{key:"2015",text:"2015",value:"2015"},{key:"2016",text:"2016",value:"2016"},{key:"2017",text:"2017",value:"2017"},{key:"2018",text:"2018",value:"2018"},{key:"2019",text:"2019",value:"2019"},{key:"2020",text:"2020",value:"2020"},{key:"2021",text:"2021",value:"2021"},{key:"2022",text:"2022",value:"2022"}],ns=["Love & peace and safe riding","Take care of yourself and others","Drinking and riding - do in only never!","With a good wind in your face","Wave your hand to brothers and sisters <3"];var rs=({input:e,width:t,options:a,placeholder:n,multiple:i,meta:{touched:o,error:l}})=>r.a.createElement(Oo.a.Field,{error:o&&!!l,width:t},r.a.createElement(zo.a,{value:e.value||[],onChange:(t,a)=>e.onChange(a.value),placeholder:n,options:a,search:!0,selection:!0,multiple:!0}),o&&l&&r.a.createElement(h.a,{basic:!0,color:"red"},l));const is=[{key:"Owner",text:"Owner",value:"Owner"},{key:"Customer",text:"Customer",value:"Customer"}];var os=Object(m.a)(({history:e,match:t})=>{const a=Object(n.useContext)(Ti),{createMechanic:i,editMechanic:o,submitting:l,loadMechanic:c}=a.mechanicStore,s=Math.floor(Math.random()*ns.length),m=ns[s],{t:u}=Object(Li.a)(["forms"]),d=Object(fo.createValidator)(e=>t=>{if(t&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t))return e},u("Invalid email address")),b=Object(fo.combineValidators)({name:Object(fo.isRequired)({message:"Name is required"}),description:Object(fo.composeValidators)(Object(fo.isRequired)({message:u("Description is required")}),Object(fo.hasLengthGreaterThan)(4)({message:u("Description needs to be at least 5 characters")}))(),countryName:Object(fo.isRequired)({message:u("Country is required")}),city:Object(fo.isRequired)({message:u("City is required")}),address:Object(fo.isRequired)({message:u("Address is required")}),phone:Object(fo.composeValidators)(Object(fo.isNumeric)({message:u("Phone must be numeric value")}),Object(fo.isRequired)({message:u("Phone is required")}),Object(fo.hasLengthGreaterThan)(8)({message:u("Phone needs to be at least 9 characters")}))(),email:d(),yearOfStart:Object(fo.isRequired)({message:u("Year of start is required")}),brands:Object(fo.isRequired)({message:u("Brand is required")})}),{user:p}=a.userStore,{addFeedItem:y}=a.feedStore,{loadCountriesToSelect:E,countries:f}=a.countryStore,{loadBrandsToSelect:O,brands:j}=a.brandStore,[w,C]=Object(n.useState)(new ts),[S,k]=Object(n.useState)(!1),[P,I]=Object(n.useState)(!1),[x,M]=Object(n.useState)(!1),[z,R]=Object(n.useState)(!1),[A,F]=Object(n.useState)(!1),[N,D]=Object(n.useState)(null);let U;const[T,L]=Object(n.useState)();Object(n.useEffect)(()=>{E(),O(),t.params.id&&(R(!0),k(!0),I(!0),M(!0),c(t.params.id).then(e=>{C(new ts(e))}).finally(()=>k(!1))),F(!0)},[E,c,t.params.id,O]);return A?r.a.createElement(Bi.a,null,!P&&!z&&r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(eo.a,null,r.a.createElement(Ll,{uploadPhoto:e=>{var t;D(e),U=e,t=e,Object.assign(U,{preview:URL.createObjectURL(t)}),L(U.preview),I(!0),v.b.info(u("Your image is uploaded, please give us more details"))},loading:P}))),P&&r.a.createElement(Bi.a.Column,{computer:10,mobile:16},r.a.createElement(eo.a,{clearing:!0},r.a.createElement(Eo.b,{validate:b,initialValues:w,onSubmit:e=>{let t=Object(yn.a)();const{...a}=e;let n="Owner"===e.owner,r={username:null===p||void 0===p?void 0:p.userName,displayName:null===p||void 0===p?void 0:p.displayName,image:null===p||void 0===p?void 0:p.image,isOwner:n,isCustomer:!n,customerRecommended:!n,testimonial:e.description};if(a.id)o(a);else{let e={...a,id:t,datePublished:(new Date).toISOString(),file:N,photoUrl:T,publisherUsername:null===p||void 0===p?void 0:p.userName,customers:[r]};i(e),y(t,"Added Mechanic")}},render:({handleSubmit:t,invalid:a,pristine:n})=>r.a.createElement(Oo.a,{onSubmit:t,loading:S},z&&r.a.createElement(h.a,{content:u("Name")}),r.a.createElement(Eo.a,{placeholder:u("Name"),name:"name",value:w.name,component:wo}),!z&&r.a.createElement(Eo.a,{name:"owner",placeholder:u("Are you owner or customer of this shop?"),options:is,value:w.owner,component:Ro}),!z&&r.a.createElement(Eo.a,{name:"brands",placeholder:u("What brands are you specialized in *"),options:j,multiple:!0,component:rs}),!z&&r.a.createElement(Eo.a,{name:"countryName",placeholder:u("Country"),options:f,component:Ro}),!z&&r.a.createElement(Eo.a,{name:"city",placeholder:u("City"),value:w.city,component:wo}),z&&r.a.createElement(h.a,{content:u("Address *")}),r.a.createElement(Eo.a,{placeholder:u("Address *"),name:"address",value:w.address,component:wo}),z&&r.a.createElement(h.a,{content:u("Phone *")}),r.a.createElement(Eo.a,{placeholder:u("Phone *"),name:"phone",value:w.phone,component:wo}),z&&r.a.createElement(h.a,{content:"Email"}),r.a.createElement(Eo.a,{placeholder:u("Email"),name:"email",value:w.email,component:wo}),z&&r.a.createElement(h.a,{content:u("Website")}),r.a.createElement(Eo.a,{placeholder:u("Website"),name:"website",value:w.website,component:wo}),!z&&r.a.createElement(Eo.a,{name:"yearOfStart",placeholder:u("Year of Start *"),value:w.yearOfStart,options:as,component:Ro}),z&&r.a.createElement(h.a,{content:u("Description")}),r.a.createElement(Eo.a,{name:"description",raws:3,placeholder:u("Description"),value:w.description,component:Mo}),r.a.createElement(to.a,{loading:l,disabled:S||a||n,positive:!0,floated:"right",type:"submit",content:u("Submit")}),r.a.createElement(to.a,{onClick:w.id?()=>e.push("/mechanics/".concat(w.id)):()=>e.push("/mechanicForm"),disabled:S,floated:"right",type:"button",content:u("Cancel")}))}))),P&&!x&&r.a.createElement(Bi.a.Column,{width:6},r.a.createElement(Gi.a,{style:{marginRight:30,position:"fixed"}},r.a.createElement(eo.a,null,r.a.createElement(go.a,{as:"h2"},m),r.a.createElement(g.a,{size:"large",bordered:!0,src:T})))),P&&x&&r.a.createElement(Bi.a.Column,{width:6},r.a.createElement(Gi.a,{style:{marginRight:30,position:"fixed"}},r.a.createElement(eo.a,null,r.a.createElement(go.a,{as:"h2"},w.name),r.a.createElement(g.a,{size:"large",bordered:!0,src:w.photoUrl}))))):r.a.createElement(ol,{content:u("Loading values...")})});class ls{constructor(e){this.id="",this.name="",this.brandId="",this.brandName="",this.model="",this.cubicCentimeters="",this.photoUrl="",this.description="",this.yearOfProduction="",this.datePublished="",this.city="",this.countryName="",this.countryId="",this.pricePaid="",this.estimatedValue="",this.numberOfKilometers="",Object.assign(this,e)}}var cs=Object(m.a)(({match:e,history:t})=>{const a=Object(n.useContext)(Ti),{createMotofy:i,editMotofy:o,submitting:l,loadMotofy:c}=a.motofyStore,s=Math.floor(Math.random()*ns.length),m=ns[s],{loadBrandsToSelect:u,brands:d}=a.brandStore,{loadCountriesToSelect:b,countries:p}=a.countryStore,{addFeedItem:y}=a.feedStore,{t:E}=Object(Li.a)(["forms"]),f=Object(fo.combineValidators)({name:Object(fo.isRequired)({message:"Name is required"}),description:Object(fo.composeValidators)(Object(fo.isRequired)({message:E("Description is required")}),Object(fo.hasLengthGreaterThan)(4)({message:E("Description needs to be at least 5 characters")}))(),city:Object(fo.isRequired)({message:E("City is required")}),countryName:Object(fo.isRequired)({message:E("Country is required")}),model:Object(fo.isRequired)({message:E("Model is required")}),cubicCentimeters:Object(fo.composeValidators)(Object(fo.isNumeric)({message:E("Power of engine must be numeric value")}),Object(fo.isRequired)({message:E("Power of engine is required")}))(),yearOfProduction:Object(fo.isRequired)({message:E("Year of production is required")}),numberOfKilometers:Object(fo.composeValidators)(Object(fo.isNumeric)({message:E("Number of kilometers must be numeric value")}),Object(fo.isRequired)({message:E("Number of kilometers is required")}))()}),[O,j]=Object(n.useState)(new ls),[w,C]=Object(n.useState)(!1),[S,k]=Object(n.useState)(!1),[P,I]=Object(n.useState)(!1),[x,M]=Object(n.useState)(!1),[z,R]=Object(n.useState)(!1),[A,F]=Object(n.useState)(null);let N;const[D,U]=Object(n.useState)();Object(n.useEffect)(()=>()=>{t.goForward()},[t]),Object(n.useEffect)(()=>{u(),b(),e.params.id&&(k(!0),I(!0),C(!0),M(!0),c(e.params.id).then(e=>j(new ls(e))).finally(()=>C(!1))),R(!0)},[u,b,c,e.params.id]);return z?r.a.createElement(Bi.a,null,!P&&!S&&r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(eo.a,null,r.a.createElement(Ll,{uploadPhoto:e=>{var t;F(e),N=e,t=e,Object.assign(N,{preview:URL.createObjectURL(t)}),U(N.preview),I(!0),v.b.info(E("Your image is uploaded, please give us more details"))},loading:P}))),P&&r.a.createElement(Bi.a.Column,{computer:10,mobile:16},r.a.createElement(eo.a,{clearing:!0},r.a.createElement(Eo.b,{validate:f,initialValues:O,onSubmit:e=>{const{...t}=e;let a=Object(yn.a)();if(t.id)o(t);else{let e={...t,id:a,datePublished:(new Date).toISOString(),file:A,photoUrl:D,isOwner:!0,motofyScores:[]};i(e),y(a,"Added Motofy")}},render:({handleSubmit:e,invalid:a,pristine:n})=>r.a.createElement(Oo.a,{onSubmit:e,loading:w},S&&r.a.createElement(h.a,{content:E("Motorcycle name")}),r.a.createElement(Eo.a,{name:"name",placeholder:E("Motorcycle name"),value:O.name,component:wo}),S&&r.a.createElement(h.a,{content:E("Description")}),r.a.createElement(Eo.a,{placeholder:E("Description"),name:"description",rows:3,value:O.description,component:Mo}),S&&r.a.createElement(h.a,{content:E("City")}),r.a.createElement(Eo.a,{placeholder:E("City"),name:"city",value:O.city,component:wo}),S&&r.a.createElement(h.a,{content:E("Country")}),r.a.createElement(Eo.a,{placeholder:E("Country"),name:"countryName",options:p,component:Ro}),!S&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Eo.a,{name:"brandName",placeholder:E("Brand"),options:d,component:Ro}),r.a.createElement(Eo.a,{name:"model",placeholder:E("Model"),value:O.model,component:wo}),r.a.createElement(Eo.a,{name:"cubicCentimeters",placeholder:E("Cubics"),value:O.cubicCentimeters,component:wo}),r.a.createElement(Eo.a,{name:"yearOfProduction",placeholder:E("Year of production"),options:as,value:O.yearOfProduction,component:Ro})),S&&r.a.createElement(h.a,{content:E("Number of kilometers")}),r.a.createElement(Eo.a,{placeholder:E("Number of kilometers"),name:"numberOfKilometers",value:O.numberOfKilometers,component:wo}),S&&r.a.createElement(h.a,{content:E("Price paid")}),r.a.createElement(Eo.a,{placeholder:E("Price paid"),name:"pricePaid",value:O.pricePaid,component:wo}),S&&r.a.createElement(h.a,{content:E("Estimated value")}),r.a.createElement(Eo.a,{placeholder:E("Estimated value"),name:"estimatedValue",value:O.estimatedValue,component:wo}),x&&r.a.createElement(to.a,{loading:l,disabled:w||a,positive:!0,floated:"right",type:"submit",content:E("Submit")}),!x&&r.a.createElement(to.a,{loading:l,disabled:w||a||n,positive:!0,floated:"right",type:"submit",content:E("Submit")}),r.a.createElement(to.a,{onClick:O.id?()=>t.push("/gallery/".concat(O.id)):()=>t.push("/galleryForm"),disabled:w,floated:"right",type:"button",content:E("Cancel")}))}))),P&&!x&&r.a.createElement(Bi.a.Column,{width:6},r.a.createElement(Gi.a,{style:{marginRight:30,position:"fixed"}},r.a.createElement(eo.a,null,r.a.createElement(go.a,{as:"h2"},m),r.a.createElement(g.a,{size:"large",bordered:!0,src:D})))),P&&x&&r.a.createElement(Bi.a.Column,{width:6},r.a.createElement(Gi.a,{style:{marginRight:30,position:"fixed"}},r.a.createElement(eo.a,null,r.a.createElement(go.a,{as:"h2"},O.name),r.a.createElement(g.a,{size:"large",bordered:!0,src:O.photoUrl}))))):r.a.createElement(ol,{content:E("Loading values...")})}),ss=Object(m.a)((function(e){var t=e.component,a=Object(Fo.a)(e,["component"]),i=Object(n.useContext)(Ti).userStore.isLoggedIn;return r.a.createElement(l.b,Object.assign({},a,{render:function(e){return i?r.a.createElement(t,e):r.a.createElement(l.a,{to:"/"})}}))}));var ms=Object(m.a)(({product:e})=>{const t=Object(n.useContext)(Ti),{toogleActivate:a}=t.productStore,{t:i}=Object(Li.a)(["shop"]);let o;e.description&&(o=e.description.substring(0,20));return r.a.createElement(zl.a,{raised:!0},r.a.createElement(zl.a.Content,null,r.a.createElement(zl.a.Header,{style:{textAlign:"center"}},e.title.substring(0,15)),e.isSold&&r.a.createElement(h.a,{style:{position:"absolute"},color:"red",corner:"right"},i("SOLD")),!e.isActive&&r.a.createElement(h.a,{color:"red",attached:"top",style:{textAlign:"center"}},i("INACTIVE")),r.a.createElement("div",{className:"ui segment"},r.a.createElement("img",{className:"ui centered medium image",src:e.photoUrl,alt:"Product"})),r.a.createElement(zl.a.Content,{extra:!0},r.a.createElement("span",null,o||"Description N/A")," ",r.a.createElement("span",null,"...")),e.isActive?r.a.createElement(to.a,{as:u.a,to:"/product/".concat(e.id),fluid:!0,content:i("View product"),color:"instagram"}):r.a.createElement(to.a,{onClick:()=>{a(e.id,e)},fluid:!0,content:i("Activate"),color:"instagram"})))});var us=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{productsByDate:t}=e.productStore;return r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(zl.a.Group,{itemsPerRow:4,stackable:!0,doubling:!0,centered:!0},t.map(e=>r.a.createElement(ms,{product:e,key:e.id})))))});const ds=[{key:"clothing",text:"Clothing",value:"Clothing"},{key:"equipment",text:"Equipment",value:"Equipment"},{key:"gear",text:"Gear",value:"Gear"},{key:"vehicle",text:"Vehicle",value:"Vehicle"},{key:"tools",text:"Tools",value:"Tools"},{key:"other",text:"Other",value:"Other"}];var bs=()=>{const e=Object(n.useContext)(Ti),{predicate:t,setPredicate:a}=e.productStore,{countries:i,loadCountriesToSelect:o}=e.countryStore,{t:l}=Object(Li.a)(["shop"]);Object(n.useEffect)(()=>{o()},[o]);const c={textAlign:"center"};return r.a.createElement(n.Fragment,null,r.a.createElement(d.a,{vertical:!0,size:"large",style:{width:"100%"}},r.a.createElement(d.a.Item,{active:t.has("search")},r.a.createElement(Zi.a,{icon:"search",placeholder:l("Search all"),onKeyDown:e=>(e=>{"Enter"===e.key&&(a("search",e.target.value),e.target.value="")})(e)})),r.a.createElement($i.a,{horizontal:!0,content:l("or")}),r.a.createElement(d.a.Item,{active:t.has("country")},r.a.createElement(b.a,{fluid:!0,placeholder:l("Search products by country"),selection:!0,floating:!0,search:!0,options:i,onChange:(e,t)=>{a("country",t.value)},clearable:!0})),r.a.createElement($i.a,{horizontal:!0,content:l("or")}),r.a.createElement(d.a.Item,null,r.a.createElement(b.a,{fluid:!0,placeholder:l("Search products by category"),selection:!0,floating:!0,search:!0,options:ds,onChange:(e,t)=>{a("category",t.value)},clearable:!0})),r.a.createElement($i.a,{horizontal:!0,content:l("or choose from built in filters")}),r.a.createElement(d.a.Item,{active:0===t.size,onClick:()=>a("all","true"),color:"blue",name:"all",style:c,content:l("All Products")}),r.a.createElement(d.a.Item,{active:t.has("iView"),onClick:()=>a("iView","true"),color:"blue",name:"iView",style:{textAlign:"center"},content:l("Favorites")}),r.a.createElement(d.a.Item,{active:t.has("myProducts"),onClick:()=>a("myProducts","true"),color:"blue",name:"myProducts",style:{textAlign:"center"},content:l("My products")}),r.a.createElement(d.a.Item,{active:t.has("iFollow"),onClick:()=>a("iFollow","true"),color:"blue",name:"iFollow",style:c,content:l("By people I follow")}),r.a.createElement(d.a.Item,{active:t.has("inActive"),onClick:()=>a("inActive","true"),color:"blue",name:"inActive",style:c,content:l("My inactive products")})))};var hs=()=>r.a.createElement(Bi.a,{columns:4,stackable:!0},r.a.createElement(Bi.a.Column,null,r.a.createElement(eo.a,{raised:!0},r.a.createElement(Xi.a,{style:{height:100,width:100}},r.a.createElement(Xi.a.Line,null),r.a.createElement(Xi.a.Image,null)))),r.a.createElement(Bi.a.Column,null,r.a.createElement(eo.a,{raised:!0},r.a.createElement(Xi.a,{style:{height:100,width:100}},r.a.createElement(Xi.a.Line,null),r.a.createElement(Xi.a.Image,null)))),r.a.createElement(Bi.a.Column,null,r.a.createElement(eo.a,{raised:!0},r.a.createElement(Xi.a,{style:{height:100,width:100}},r.a.createElement(Xi.a.Line,null),r.a.createElement(Xi.a.Image,null)))),r.a.createElement(Bi.a.Column,null,r.a.createElement(eo.a,{raised:!0},r.a.createElement(Xi.a,{style:{height:100,width:100}},r.a.createElement(Xi.a.Line,null),r.a.createElement(Xi.a.Image,null)))));var ps=()=>{const e=Object(n.useContext)(Ti),{setPredicate:t}=e.productStore,{closeModal:a}=e.modalStore,{t:i}=Object(Li.a)(["modals"]);return r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(Zi.a,{style:{width:"100%"},icon:"search",placeholder:i("Search all"),onKeyDown:e=>(e=>{"Enter"===e.key&&(t("search",e.target.value),e.target.value="",a())})(e)})))};var gs=()=>{const e=Object(n.useContext)(Ti),{setPredicate:t}=e.productStore,{closeModal:a}=e.modalStore,{t:i}=Object(Li.a)(["modals"]);return r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(b.a,{placeholder:i("Filter by category"),selection:!0,fluid:!0,search:!0,options:ds,onChange:(e,n)=>{t("category",n.value),a()},clearable:!0})))};var ys=()=>{const e=Object(n.useContext)(Ti),{setPredicate:t}=e.productStore,{countries:a,loadCountriesToSelect:i}=e.countryStore,{closeModal:o}=e.modalStore;Object(n.useEffect)(()=>{i()},[i]);return r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(b.a,{placeholder:"Filter by country",selection:!0,fluid:!0,search:!0,options:a,onChange:(e,a)=>{t("country",a.value),o()},clearable:!0})))};var Es=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{info:t}=e.productStore;return r.a.createElement("div",{className:"mobileInfo"},t.toUpperCase())});var fs=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{predicate:t,setPredicate:a,setInfo:i}=e.productStore,{t:o}=Object(Li.a)(["mobile-info"]);Object(n.useEffect)(()=>{i(o("All products"))},[i,o]);const{openModal:l}=e.modalStore,c=()=>{switch(t.keys().next().value){case"iView":i(o("Favorites"));break;case"myProducts":i(o("My products"));break;case"iFollow":i(o("By people I follow"));break;case"inActive":i(o("My inactive products"));break;case"search":i(o("Search products"));break;case"category":i(o("Search by category"));break;case"country":i(o("Search by country"));break;default:i(o("All products"))}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{fluid:!0,widths:8},r.a.createElement(d.a.Item,{active:0===t.size,onClick:()=>{a("all","true"),c()},color:"blue",icon:"home"}),r.a.createElement(d.a.Item,{active:t.has("iView"),onClick:()=>{a("iView","true"),c()},color:"blue",icon:"heart outline"}),r.a.createElement(d.a.Item,{active:t.has("myProducts"),onClick:()=>{a("myProducts","true"),c()},color:"blue",icon:"user circle"}),r.a.createElement(d.a.Item,{active:t.has("iFollow"),onClick:()=>{a("iFollow","true"),c()},color:"blue",icon:"eye"}),r.a.createElement(d.a.Item,{active:t.has("inActive"),onClick:()=>{a("inActive","true"),c()},color:"blue",icon:"hourglass end"}),r.a.createElement(d.a.Item,{active:t.has("search"),onClick:()=>{a("search","true"),l(r.a.createElement(ps,null)),c()},color:"blue",icon:"search"}),r.a.createElement(d.a.Item,{active:t.has("country"),onClick:()=>{a("country","true"),l(r.a.createElement(ys,null)),c()},color:"blue",icon:"globe"}),r.a.createElement(d.a.Item,{active:t.has("category"),onClick:()=>{a("category","true"),l(r.a.createElement(gs,null)),c()},color:"blue",icon:"filter"})),r.a.createElement(Es,null))});var Os=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{loadProducts:t,loadingInitial:a,setPage:i,page:o,totalPages:l}=e.productStore,[c,s]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{t()},[t]),r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{mobile:16,tablet:16,className:"mobile only"},r.a.createElement(fs,null)),r.a.createElement(Bi.a.Column,{computer:11,mobile:16},a&&0===o?r.a.createElement(hs,null):r.a.createElement(Wi.a,{pageStart:0,loadMore:()=>{s(!0),i(o+1),t().then(()=>{s(!1)})},hasMore:!c&&o+1<l,initialLoad:!1},r.a.createElement(us,null))),r.a.createElement(Bi.a.Column,{width:5},r.a.createElement(Gi.a,{className:"mobile hidden",style:{marginRight:30,position:"fixed"}},r.a.createElement(bs,null))),r.a.createElement(Bi.a.Column,{computer:9,mobile:16},r.a.createElement(Vi.a,{active:c})))});class js{constructor(e){this.id=void 0,this.sellerId="",this.sellerUsername="",this.title="",this.model="",this.description="",this.price="",this.brand="",this.category="",this.countryName=void 0,this.countryId=void 0,this.city="",this.phoneNumber="",this.isActive=void 0,this.isAdvertised=void 0,this.datePublished="",this.dateActivated=void 0,this.dateAdvertised=void 0,this.photoUrl="",this.file=void 0,e&&Object.assign(this,e)}}var vs=Object(m.a)(({history:e,match:t})=>{const a=Object(n.useContext)(Ti),{createProduct:i,editProduct:o,submitting:l,loadProduct:c}=a.productStore,{addFeedItem:s}=a.feedStore,{loadCountriesToSelect:m,countries:u}=a.countryStore,{user:d}=a.userStore,b=Math.floor(Math.random()*ns.length),p=ns[b],{t:y}=Object(Li.a)(["forms"]),E=Object(fo.combineValidators)({title:Object(fo.isRequired)({message:y("Title is required")}),category:Object(fo.isRequired)({message:y("Category is required")}),description:Object(fo.composeValidators)(Object(fo.isRequired)({message:y("Description is required")}),Object(fo.hasLengthGreaterThan)(4)({message:y("Description needs to be at least 5 characters")}))(),countryName:Object(fo.isRequired)({message:y("Country is required")}),city:Object(fo.isRequired)({message:y("City is required")}),phoneNumber:Object(fo.composeValidators)(Object(fo.isNumeric)({message:y("Phone must be numeric value")}),Object(fo.hasLengthGreaterThan)(8)({message:y("Phone needs to be at least 9 characters")}))(),price:Object(fo.composeValidators)(Object(fo.isNumeric)({message:y("Price must be numeric value")}),Object(fo.isRequired)({message:y("Price is required")}))()}),[f,O]=Object(n.useState)(new js),[j,w]=Object(n.useState)(!1),[C,S]=Object(n.useState)(!1),[k,P]=Object(n.useState)(!1),[I,x]=Object(n.useState)(!1),[M,z]=Object(n.useState)(!1),[R,A]=Object(n.useState)(null);let F;const[N,D]=Object(n.useState)();Object(n.useEffect)(()=>{m(),t.params.id&&(x(!0),w(!0),S(!0),P(!0),c(t.params.id).then(e=>{O(new js(e))}).finally(()=>w(!1))),z(!0)},[m,c,t.params.id]);return M?r.a.createElement(Bi.a,null,!C&&!I&&r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(eo.a,null,r.a.createElement(Ll,{uploadPhoto:e=>{var t;A(e),F=e,t=e,Object.assign(F,{preview:URL.createObjectURL(t)}),D(F.preview),S(!0),v.b.info(y("Your image is uploaded, please give us more details"))},loading:C}))),C&&r.a.createElement(Bi.a.Column,{computer:10,mobile:16},r.a.createElement(eo.a,{clearing:!0},r.a.createElement(Eo.b,{validate:E,initialValues:f,onSubmit:e=>{let t=Object(yn.a)();const{...a}=e;if(""===a.brand&&(a.brand="Brand not asigned"),""===a.model&&(a.model="Model not asigned"),a.id)o(a);else{let e={...a,id:t,datePublished:(new Date).toISOString(),inactivityExpirationDate:new Date(Date.now()+2592e6),file:R,photoUrl:N,sellerUsername:null===d||void 0===d?void 0:d.userName};i(e),s(t,"Added Product")}},render:({handleSubmit:t,invalid:a,pristine:n})=>r.a.createElement(Oo.a,{onSubmit:t,loading:j},I&&r.a.createElement(h.a,{content:y("Title")}),r.a.createElement(Eo.a,{placeholder:y("Title"),name:"title",value:f.title,component:wo}),I&&r.a.createElement(h.a,{content:y("Price")}),r.a.createElement(Eo.a,{placeholder:y("Price"),name:"price",value:f.price,component:wo}),I&&r.a.createElement(h.a,{content:y("Description")}),r.a.createElement(Eo.a,{placeholder:y("Description"),name:"description",rows:3,value:f.description,component:Mo}),I&&r.a.createElement(h.a,{content:y("Category")}),r.a.createElement(Eo.a,{placeholder:y("Category"),name:"category",options:ds,value:f.category,component:Ro}),I&&r.a.createElement(h.a,{content:y("Country")}),r.a.createElement(Eo.a,{placeholder:y("Country"),name:"countryName",options:u,component:Ro}),I&&r.a.createElement(h.a,{content:y("City")}),r.a.createElement(Eo.a,{placeholder:y("City"),name:"city",value:f.city,component:wo}),I&&r.a.createElement(h.a,{content:y("Phone")}),r.a.createElement(Eo.a,{placeholder:y("Phone"),name:"phoneNumber",value:f.phoneNumber,component:wo}),I&&r.a.createElement(h.a,{content:y("Model")}),r.a.createElement(Eo.a,{placeholder:y("Model"),name:"model",value:f.model,component:wo}),I&&r.a.createElement(h.a,{content:y("Brand")}),r.a.createElement(Eo.a,{placeholder:y("Brand"),name:"brand",value:f.brand,component:wo}),r.a.createElement(to.a,{loading:l,disabled:j||a||n,positive:!0,floated:"right",type:"submit",content:y("Submit")}),r.a.createElement(to.a,{onClick:f.id?()=>e.push("/product/".concat(f.id)):()=>e.push("/productForm"),disabled:j,floated:"right",type:"button",content:y("Cancel")}))}))),C&&!k&&r.a.createElement(Bi.a.Column,{width:6},r.a.createElement(Gi.a,{style:{marginRight:30,position:"fixed"}},r.a.createElement(eo.a,null,r.a.createElement(go.a,{as:"h2"},p),r.a.createElement(g.a,{size:"large",bordered:!0,src:N})))),C&&k&&r.a.createElement(Bi.a.Column,{width:6},r.a.createElement(Gi.a,{style:{marginRight:30,position:"fixed"}},r.a.createElement(eo.a,null,r.a.createElement(go.a,{as:"h2"},f.title),r.a.createElement(g.a,{size:"large",bordered:!0,src:f.photoUrl}))))):r.a.createElement(ol,{content:y("Loading values...")})}),ws=a(816);var Cs=({feed:e})=>r.a.createElement(eo.a.Group,{raised:!0},r.a.createElement(ws.a,null,r.a.createElement(ws.a.Event,{style:{backgroundColor:"white"}},r.a.createElement(ws.a.Label,null,r.a.createElement("img",{src:e.notifierPhotoUrl||"/assets/user.png",alt:"userPoto"})),r.a.createElement(ws.a.Content,null,r.a.createElement(ws.a.Summary,null,r.a.createElement(ws.a.User,{as:u.a,to:"/profile/".concat(e.notifierUsername)},e.notifierDisplayname)," ",r.a.createElement(ws.a.Meta,{style:e.isSeen?{color:"instagram"}:{color:"brown"}},e.info))))));var Ss=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{feedByDate:t,markSeenInDB:a,setFeedMounted:i,setFeedUnmounted:o}=e.feedStore;return Object(n.useEffect)(()=>{i();return(async()=>{let e=[];for(var n=0,r=t.length;n<r;n++)!1===t[n][1][0].isSeen&&e.push(t[n][1][0].id);a(e)})(),()=>{o()}},[a,t,i,o]),r.a.createElement(n.Fragment,null,t.map(([e,t])=>r.a.createElement(n.Fragment,{key:e},r.a.createElement(oo.a.Group,{divided:!0},t.map(e=>r.a.createElement(Cs,{feed:e,key:e.id}))))))});var ks=()=>r.a.createElement(eo.a.Group,{raised:!0},r.a.createElement(eo.a,null,r.a.createElement(Xi.a,{fluid:!0},r.a.createElement(Xi.a.Header,{image:!0},r.a.createElement(Xi.a.Line,null),r.a.createElement(Xi.a.Line,null)),r.a.createElement(Xi.a.Paragraph,null,r.a.createElement(Xi.a.Line,null),r.a.createElement(Xi.a.Line,null),r.a.createElement(Xi.a.Line,null)))));var Ps=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{loadFeed:t,loadingInitial:a,setPage:i,page:o,totalPages:l}=e.feedStore,[c,s]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{t()},[t]),r.a.createElement(n.Fragment,null,r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{mobile:16,computer:15},a&&0===o?r.a.createElement(ks,null):r.a.createElement(Wi.a,{pageStart:0,loadMore:()=>{s(!0),i(o+1),t().then(()=>s(!1))},hasMore:!c&&o+1<l,initialLoad:!1},r.a.createElement(Ss,null))),r.a.createElement(Bi.a.Column,{mobile:16,computer:15},r.a.createElement(Vi.a,{active:c}))))});var Is=Object(m.a)(({member:e})=>{const t=Object(n.useContext)(Ti),{onlineUsers:a}=t.presenceStore,{t:i}=Object(Li.a)(["social"]);return r.a.createElement(zl.a,{as:u.a,to:"/profile/".concat(e.username),raised:!0},r.a.createElement(zl.a.Content,null,r.a.createElement(g.a,{floated:"right",size:"mini",src:e.image||"/assets/user.png",circular:!0,bordered:!0}),r.a.createElement(zl.a.Header,null,a.includes(e.username)&&r.a.createElement(_i.a,{name:"check circle",className:"isOnline",bordered:!0,circular:!0,size:"tiny"}),e.displayName||"display name"),r.a.createElement(zl.a.Meta,null,1===e.followersCount?e.followersCount+i("Folower"):i("Followers")," "),e.following&&r.a.createElement(zl.a.Description,{style:{color:"green"}},i("Following"))))});var xs=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{displayPeople:t,setPredicate:a}=e.peopleStore,{t:i}=Object(Li.a)(["social"]),[o,l]=Object(n.useState)("");return r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:8},r.a.createElement(Zi.a,{name:"search",fluid:!0,placeholder:i("Search all"),value:o,onInput:e=>l(e.target.value),onKeyDown:e=>(e=>{"Enter"===e.key&&(a("search",e.target.value),e.target.value="")})(e)})),r.a.createElement(Bi.a.Column,{width:8},r.a.createElement(to.a,{content:i("See all"),fluid:!0,floated:"right",onClick:()=>a("all","true")})),r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(zl.a.Group,{itemsPerRow:4,stackable:!0,doubling:!0},t.map(e=>r.a.createElement(Is,{member:e,key:e.id})))))});var Ms=()=>r.a.createElement(Bi.a,{columns:4,stackable:!0},r.a.createElement(Bi.a.Column,null,r.a.createElement(eo.a,{raised:!0},r.a.createElement(Xi.a,null,r.a.createElement(Xi.a.Header,{image:!0},r.a.createElement(Xi.a.Line,null),r.a.createElement(Xi.a.Line,null)),r.a.createElement(Xi.a.Paragraph,null,r.a.createElement(Xi.a.Line,{length:"medium"}),r.a.createElement(Xi.a.Line,{length:"short"}))))),r.a.createElement(Bi.a.Column,null,r.a.createElement(eo.a,{raised:!0},r.a.createElement(Xi.a,null,r.a.createElement(Xi.a.Header,{image:!0},r.a.createElement(Xi.a.Line,null),r.a.createElement(Xi.a.Line,null)),r.a.createElement(Xi.a.Paragraph,null,r.a.createElement(Xi.a.Line,{length:"medium"}),r.a.createElement(Xi.a.Line,{length:"short"}))))),r.a.createElement(Bi.a.Column,null,r.a.createElement(eo.a,{raised:!0},r.a.createElement(Xi.a,null,r.a.createElement(Xi.a.Header,{image:!0},r.a.createElement(Xi.a.Line,null),r.a.createElement(Xi.a.Line,null)),r.a.createElement(Xi.a.Paragraph,null,r.a.createElement(Xi.a.Line,{length:"medium"}),r.a.createElement(Xi.a.Line,{length:"short"}))))),r.a.createElement(Bi.a.Column,null,r.a.createElement(eo.a,{raised:!0},r.a.createElement(Xi.a,null,r.a.createElement(Xi.a.Header,{image:!0},r.a.createElement(Xi.a.Line,null),r.a.createElement(Xi.a.Line,null)),r.a.createElement(Xi.a.Paragraph,null,r.a.createElement(Xi.a.Line,{length:"medium"}),r.a.createElement(Xi.a.Line,{length:"short"}))))));var zs=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{loadPeople:t,loadingPeople:a,setPage:i,page:o,totalPages:l,cleanPeople:c}=e.peopleStore,[s,m]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{t()},[t]),Object(n.useEffect)(()=>()=>{c()},[c]),r.a.createElement(n.Fragment,null,r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{mobile:16,computer:16},a&&0===o?r.a.createElement(Ms,null):r.a.createElement(Wi.a,{pageStart:0,loadMore:()=>{m(!0),i(o+1),t().then(()=>m(!1))},hasMore:!s&&o+1<l,initialLoad:!1},r.a.createElement(xs,null))),r.a.createElement(Bi.a.Column,{mobile:16,computer:15},r.a.createElement(Vi.a,{active:s}))))});const Rs=[{key:"Enthusiastic",text:"Enthusiastic",value:"Enthusiastic"},{key:"Happy",text:"Happy",value:"Happy"},{key:"Relaxed",text:"Relaxed",value:"Relaxed"},{key:"Concerned",text:"Concerned",value:"Concerned"},{key:"Tired",text:"Tired",value:"Tired"}],As=[{key:"Partly Cloudy",text:"Partly Cloudy",value:"Partly Cloudy"},{key:"Cloudy",text:"Cloudy",value:"Cloudy"},{key:"Rainy",text:"Rainy",value:"Rainy"},{key:"Stormy",text:"Stormy",value:"Stormy"},{key:"Sunny",text:"Sunny",value:"Sunny"}],Fs=[{key:"Poor",text:"Poor",value:"Poor"},{key:"Not bad",text:"Not bad",value:"Not bad"},{key:"Decent",text:"Decent",value:"Decent"},{key:"Very good",text:"Very good",value:"Very good"},{key:"Excellent",text:"Excellent",value:"Excellent"}];var Ns=Object(m.a)(({match:e,history:t})=>{const a=Object(n.useContext)(Ti),{submitting:i,loadActivity:o,createDiaryEntry:l,loadDiaryEntry:c,editDiaryEntry:s}=a.activityStore,{loadCountriesToSelect:m,countries:u}=a.countryStore,d=Math.floor(Math.random()*ns.length),b=ns[d],{t:h}=Object(Li.a)(["forms"]),p=Object(fo.combineValidators)({locationCity:Object(fo.isRequired)({message:h("The location city is required")}),locationCountry:Object(fo.isRequired)({message:h("The location country is required")}),body:Object(fo.composeValidators)(Object(fo.isRequired)({message:h("Description is required")}),Object(fo.hasLengthGreaterThan)(4)({message:h("Description needs to be at least 5 characters")}))(),mood:Object(fo.isRequired)({message:"The mood is required"})}),[y,E]=Object(n.useState)(new xo),[f,O]=Object(n.useState)(!1);let j;const[w,C]=Object(n.useState)(),[S,k]=Object(n.useState)(null),[P,I]=Object(n.useState)(!1),[x,M]=Object(n.useState)(!1),[z,R]=Object(n.useState)();Object(n.useEffect)(()=>{m(),o(e.params.activityId).then(e=>R(e)).finally(()=>O(!1)),"/manageDiaryEntry/:id/:activityId"===e.path&&(c(e.params.id).then(e=>E(e)).finally(()=>O(!1)),M(!0),I(!0))},[o,e,e.path,e.params.id,m,c]);return r.a.createElement(Bi.a,null,!P&&r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(eo.a,null,r.a.createElement(Ll,{uploadPhoto:e=>{var t;k(e),j=e,t=e,Object.assign(j,{preview:URL.createObjectURL(t)}),C(j.preview),I(!0),v.b.info(h("Your image is uploaded, please give us more details"))},loading:P}))),P&&r.a.createElement(Bi.a.Column,{computer:10,mobile:16},r.a.createElement(eo.a,{clearing:!0},r.a.createElement(Eo.b,{validate:p,initialValues:y,onSubmit:t=>{let a=Object(yn.a)();if("/createDiaryEntry/:activityId"===e.path){let e={...t,id:a,entryDate:new Date,file:S,photoUrl:w};l(e,z)}else{let a={...t,activityId:e.params.activityId};s(a,z)}},render:({handleSubmit:a,invalid:n,pristine:o})=>r.a.createElement(Oo.a,{onSubmit:a,loading:f},r.a.createElement(Eo.a,{name:"body",placeholder:h("What happened today?"),rows:5,component:Mo}),r.a.createElement(Eo.a,{name:"mood",placeholder:h("What is your mood today?"),options:Rs,component:Ro}),r.a.createElement(Eo.a,{name:"weather",placeholder:h("What is weather like today?"),options:As,component:Ro}),r.a.createElement(Eo.a,{name:"road",placeholder:h("What is road like"),options:Fs,component:Ro}),r.a.createElement(Eo.a,{name:"locationCountry",placeholder:h("Country you are in"),options:u,component:Ro}),r.a.createElement(Eo.a,{name:"locationCity",placeholder:h("City you are in"),component:wo}),r.a.createElement(Eo.a,{name:"numberOfKilometers",placeholder:h("Number of kilometers"),component:wo}),r.a.createElement(to.a,{loading:i,disabled:f||n||o,floated:"right",positive:!0,type:"submit",content:h("Submit")}),r.a.createElement(to.a,{onClick:()=>t.push("/activities/".concat(e.params.activityId)),disabled:f,floated:"right",type:"button",content:h("Cancel")}))}))),P&&!x&&r.a.createElement(Bi.a.Column,{width:6},r.a.createElement(Gi.a,{style:{marginRight:30,position:"fixed"}},r.a.createElement(eo.a,null,r.a.createElement(go.a,{as:"h2"},b),r.a.createElement(g.a,{size:"large",bordered:!0,src:w})))),P&&x&&r.a.createElement(Bi.a.Column,{width:6},r.a.createElement(Gi.a,{style:{marginRight:30,position:"fixed"}},r.a.createElement(eo.a,null,r.a.createElement(go.a,{as:"h2"},y.locationCity),r.a.createElement(g.a,{size:"large",bordered:!0,src:y.photoUrl})))))});var Ds=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{user:t}=e.userStore,{messagesByThreadId:a,markReadInDB:i,setInitialView:o,setView:l}=e.privateMessageStore;Object(n.useEffect)(()=>{o()},[o]);return r.a.createElement(n.Fragment,null,r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},a.map(([e,a])=>r.a.createElement(s.a,{key:e,style:{backgroundColor:"lightblue",paddingTop:"3em"}},r.a.createElement(Bi.a,{onClick:()=>{(e=>{e.forEach(e=>{e.senderUsername!==(null===t||void 0===t?void 0:t.userName)&&null===e.dateRead&&i(e.id)})})(a),l(a[0].privateMessageThreadId)},divided:!0,style:{cursor:"pointer"}},r.a.createElement(Bi.a.Column,{mobile:16,className:"mobile only",style:{padding:"0px",margin:"0px"}},r.a.createElement("img",{className:"ui centered medium image",style:{borderRadius:"50%"},width:"40px",src:(a[0].senderUsername===(null===t||void 0===t?void 0:t.userName)?a[0].recipientPhotoUrl:a[0].senderPhotoUrl)||"/assets/user.png",alt:"sender"})),r.a.createElement(Bi.a.Column,{computer:4,className:"mobile hidden"},r.a.createElement(g.a,{size:"mini",circular:!0,verticalAlign:"middle",src:(a[0].senderUsername===(null===t||void 0===t?void 0:t.userName)?a[0].recipientPhotoUrl:a[0].senderPhotoUrl)||"/assets/user.png"}),r.a.createElement("span",null," ",a[0].senderUsername===(null===t||void 0===t?void 0:t.userName)?a[0].recipientUsername:a[0].senderDisplayName)),r.a.createElement(Bi.a.Column,{width:12,className:"mobile hidden"},r.a.createElement(Bi.a.Row,{style:null===a[0].dateRead&&a[0].senderUsername!==(null===t||void 0===t?void 0:t.userName)?{fontWeight:"bold",color:"rgb(211, 81, 21)"}:{fontWeight:"normal"}},r.a.createElement("span",null,Object(cl.a)(new Date(a[0].dateSent),new Date,{addSuffix:!0})),r.a.createElement(Bi.a.Row,null,a[0].content.substring(0,18),"...")))))))))});var Us=({messageId:e,privateMessageThreadId:t,recipientUsername:a})=>{const i=Object(n.useContext)(Ti),{deleteSingleMessage:o}=i.privateMessageStore,{closeModal:l}=i.modalStore,{t:c}=Object(Li.a)(["modals"]);return r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(go.a,{as:"h2",content:c("This action is irreversible"),color:"teal",textAlign:"center"}),r.a.createElement(go.a,{sub:!0,content:c("Are you sure you want to delete this message?"),color:"teal",textAlign:"center"}),r.a.createElement("div",{className:"ui two buttons",style:{paddingTop:"2rem"}},r.a.createElement(to.a,{fluid:!0,onClick:()=>{o(e,t,a).then(()=>l())},content:c("Yes, delete it")}),r.a.createElement(to.a,{fluid:!0,positive:!0,onClick:()=>{l()},content:c("No, don't delete")}))))};class Ts{constructor(e){this.id=void 0,this.content="",this.privateMessageThreadId="",e&&Object.assign(this,e)}}var Ls=({messageId:e,privateMessageThreadId:t,content:a,recipientUsername:i,senderPhotoUrl:o})=>{const l=Object(n.useContext)(Ti),{editMessage:c}=l.privateMessageStore,{closeModal:s}=l.modalStore,{t:m}=Object(Li.a)(["modals"]),u=Object(fo.combineValidators)({content:Object(fo.isRequired)({message:m("Content is required")})}),[d,b]=Object(n.useState)(new Ts);Object(n.useEffect)(()=>{b({messageId:e,privateMessageThreadId:t,content:a,recipientUsername:i,senderPhotoUrl:o})},[a,e,t,i,o]);return r.a.createElement(Bi.a,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(go.a,{as:"h2",content:m("Edit message"),color:"teal",textAlign:"center"}),r.a.createElement(Eo.b,{validate:u,initialValues:d,onSubmit:e=>{c(e.messageId,e.privateMessageThreadId,e.content,e.recipientUsername,e.senderPhotoUrl),s()},render:({handleSubmit:e,invalid:t,pristine:a})=>r.a.createElement(Oo.a,{onSubmit:e},r.a.createElement(Eo.a,{name:"content",rows:4,value:d.content,component:Mo}),r.a.createElement("div",{className:"ui two buttons",style:{paddingTop:"2rem"}},r.a.createElement(to.a,{type:"button",content:m("Cancel"),onClick:s}),r.a.createElement(to.a,{disabled:t||a,positive:!0,type:"submit",content:m("Submit")})))})))};var Hs=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{user:t}=e.userStore,{listOfMessagesInFocus:a,markReadInDB:i,createHubConnection:o,stopHubConnection:l,setOtherUser:c,cleanOtherUser:s}=e.privateMessageStore,{markReadNavbar:m}=e.presenceStore,{openModal:u,setSize:d}=e.modalStore,b={fontWeight:"normal",borderRadius:"20px",border:"solid 1px",color:"rgb(29, 115, 152)",width:"97%",marginTop:"20px",backgroundColor:"lightblue",display:"flex",justifyContent:"flex-end",marginLeft:"1rem"},h={fontWeight:"normal",borderRadius:"20px",border:"solid 1px",color:"black",width:"97%",marginTop:"20px",backgroundColor:"inherit"},p=Object(n.useCallback)(e=>{e.forEach(e=>{e.senderUsername!==(null===t||void 0===t?void 0:t.userName)&&null===e.dateRead&&i(e.id)})},[i,t]),y=Object(n.useCallback)(e=>{m(e),p(a[1]),o(e)},[m,p,o,a]);return Object(n.useEffect)(()=>{let e=a[1].find(e=>e.recipientUsername!==(null===t||void 0===t?void 0:t.userName));return c(null===e||void 0===e?void 0:e.recipientUsername),y(null===e||void 0===e?void 0:e.recipientUsername),()=>{s();(e=>{console.log("STOPPED FOR "+e),l()})(null===e||void 0===e?void 0:e.recipientUsername)}},[t,c,s,a,y,l]),r.a.createElement(r.a.Fragment,null,r.a.createElement(eo.a,{className:"scrollRevert"},a[1].map(e=>r.a.createElement(n.Fragment,{key:e.id},e.senderUsername!==(null===t||void 0===t?void 0:t.userName)&&r.a.createElement("div",{className:"message-list-item"},r.a.createElement(Bi.a,{key:e.id,style:h,textAlign:"left",floated:"left"},r.a.createElement(dc.a,{className:"mobile hidden"},r.a.createElement(hl.a,{width:2},r.a.createElement(g.a,{size:"mini",circular:!0,verticalAlign:"middle",src:e.senderPhotoUrl||"/assets/user.png"})),r.a.createElement(hl.a,{width:14},e.content)),r.a.createElement(dc.a,{only:"mobile",style:{fontSize:"smaller",paddingTop:".3rem",paddingBottom:".3rem"}},r.a.createElement(hl.a,{width:14},e.content)))),e.senderUsername===(null===t||void 0===t?void 0:t.userName)&&r.a.createElement("div",{className:"message-list-item"},r.a.createElement(Bi.a,{style:b,textAlign:"right",floated:"right"},r.a.createElement(dc.a,{className:"mobile hidden"},r.a.createElement(hl.a,{width:1},r.a.createElement(_i.a,{name:"delete",style:{cursor:"pointer"},onClick:()=>{d("mini"),u(r.a.createElement(Us,{messageId:e.id,privateMessageThreadId:e.privateMessageThreadId,recipientUsername:e.recipientUsername}))}}),r.a.createElement(_i.a,{name:"edit",style:{cursor:"pointer"},onClick:()=>{d("mini"),u(r.a.createElement(Ls,{messageId:e.id,privateMessageThreadId:e.privateMessageThreadId,content:e.content,recipientUsername:e.recipientUsername,senderPhotoUrl:e.senderPhotoUrl}))}})),r.a.createElement(hl.a,{width:13},e.content),r.a.createElement(hl.a,{width:2},r.a.createElement(g.a,{size:"mini",circular:!0,verticalAlign:"middle",src:e.senderPhotoUrl||"/assets/user.png"}))),r.a.createElement(dc.a,{only:"mobile",style:{fontSize:"smaller",paddingTop:".3rem",paddingBottom:".3rem"}},r.a.createElement(hl.a,{width:13},e.content))))))))}),qs=a(419),Bs=a.n(qs);var Gs=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{user:t}=e.userStore,{setRecipient:a,setMessageThreadId:i,listOfMessagesInFocus:o,setUsername:l,setReply:c,addReply:s}=e.privateMessageStore,{t:m}=Object(Li.a)(["social"]),[u,d]=Object(n.useState)(!1),b=Object(n.useRef)(null),[h,g]=Object(n.useState)("");Object(n.useLayoutEffect)(()=>{b.current.style.height="inherit",b.current.style.height="".concat(Math.max(b.current.scrollHeight,12),"px")},[h]);const y=()=>{o[1][0].senderUsername===(null===t||void 0===t?void 0:t.userName)?a(o[1][0].recipientUsername,null===t||void 0===t?void 0:t.image):a(o[1][0].senderUsername,null===t||void 0===t?void 0:t.image)};return r.a.createElement(Oo.a,null,r.a.createElement(Bi.a,null,r.a.createElement(hl.a,{width:1},r.a.createElement("div",{className:"smiley-picker"},r.a.createElement(_i.a,{name:"smile outline",circular:!0,onClick:()=>d(e=>!e)}))),r.a.createElement(hl.a,{width:1},r.a.createElement("div",{className:"send-button"},r.a.createElement(p.a,{header:"SEND",trigger:r.a.createElement(_i.a,{name:"send",circular:!0,onClick:()=>{""!==h?(y(),i(o[0]),c(h),l(null===t||void 0===t?void 0:t.userName),s(),g(""),b.current.value=""):alert("Cannot send an empty message!")}}),content:"You can also hit enter to send"}))),r.a.createElement(hl.a,{computer:14,mobile:12},r.a.createElement("div",{className:"textareaRef"},r.a.createElement("textarea",{ref:b,autoFocus:!0,placeholder:m("Reply"),onKeyDown:e=>(e=>{null!==e&&"Enter"===e.key&&(e.target.value="",""===h?(e.preventDefault(),alert("Cannot send an empty message!")):(e.preventDefault(),g(""),y(),i(o[0]),c(h),l(null===t||void 0===t?void 0:t.userName),s()))})(e),onChange:e=>g(e.target.value),style:{minHeight:12,resize:"none",borderRadius:"20px"},value:h})))),u&&r.a.createElement(Bs.a,{pickerStyle:{width:"90%",left:"5rem",bottom:"330px"},onEmojiClick:(e,t)=>{g(e=>e+t.emoji),d(!1)}}))});var Vs=()=>r.a.createElement(n.Fragment,null,r.a.createElement(Xi.a,{fluid:!0},r.a.createElement(eo.a.Group,null,r.a.createElement(eo.a,{style:{minHeight:110}},r.a.createElement(Xi.a,null,r.a.createElement(Xi.a.Header,null,r.a.createElement(Xi.a.Line,null),r.a.createElement(Xi.a.Line,null)),r.a.createElement(Xi.a.Paragraph,null,r.a.createElement(Xi.a.Line,null)))),r.a.createElement(eo.a,null,r.a.createElement(Xi.a,null,r.a.createElement(Xi.a.Line,null),r.a.createElement(Xi.a.Line,null))),r.a.createElement(eo.a,{secondary:!0,style:{minHeight:70}}),r.a.createElement(eo.a,{clearing:!0}))));var Ys=Object(m.a)(()=>{const e=Object(n.useContext)(Ti),{loadMessages:t,loadingInitial:a,setPage:i,page:o,totalPages:l,listOfMessagesInFocus:c}=e.privateMessageStore,[s,m]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{t()},[t]),r.a.createElement(eo.a,{style:{backgroundColor:"lightblue"},raised:!0,id:"top"},r.a.createElement(Bi.a,{style:{margin:"0",padding:"0"}},a&&0===o?r.a.createElement(Bi.a.Row,null,r.a.createElement(Bi.a.Column,{width:16},r.a.createElement(Vs,null))):r.a.createElement(Bi.a.Row,null,r.a.createElement(Bi.a.Column,{width:4},r.a.createElement(Wi.a,{pageStart:0,loadMore:()=>{m(!0),i(o+1),t().then(()=>m(!1))},hasMore:!s&&o+1<l,initialLoad:!1},r.a.createElement(Ds,null))),r.a.createElement(Bi.a.Column,{width:12},r.a.createElement(Bi.a.Row,null,c&&r.a.createElement(Hs,null),r.a.createElement(Gs,null))))))});function Ws(){return new URLSearchParams(Object(l.h)().search)}var Ks=()=>{const e=Ws().get("email"),{t:t}=Object(Li.a)(["forms"]);return r.a.createElement(eo.a,{placeholder:!0,textAlign:"center"},r.a.createElement(go.a,{icon:!0,color:"green"},r.a.createElement(_i.a,{name:"check"}),t("Successfully registered!")),r.a.createElement("p",null,t("Please check your email (including junk email) for the verification email")),e&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,t("Didn't receive the email? Click the below button to resend")),r.a.createElement(to.a,{primary:!0,onClick:function(){N.resendVerifyEmailConfirm(e).then(()=>{v.b.success(t("Verification email resent - please check your email"))}).catch(e=>console.log(e))},content:t("Resend email"),size:"huge"})))};var Zs=()=>{const e=Ws().get("email"),t=Ws().get("token"),a=Object(n.useContext)(Ti),i="Verifying",o="Failed",l="Success",[c,s]=Object(n.useState)(i),{openModal:m}=a.modalStore,{t:u}=Object(Li.a)(["forms"]);Object(n.useEffect)(()=>{N.verifyEmail(t,e).then(()=>{s(l)}).catch(()=>{s(o)})},[o,l,t,e]);const d=()=>{N.resendVerifyEmailConfirm(e).then(()=>{v.b.success(u("Verification email resent - please check your email"))}).catch(e=>console.log(e))};return r.a.createElement(eo.a,{placeholder:!0},r.a.createElement(go.a,{icon:!0},r.a.createElement(_i.a,{name:"envelope"}),u("Email verification")),r.a.createElement(eo.a.Inline,null,(()=>{switch(c){case i:return r.a.createElement("p",null,u("Verifying..."));case o:return r.a.createElement("div",{className:"center"},r.a.createElement("p",null,u("Verication failed - you can try resending the verification email")),r.a.createElement(to.a,{onClick:d,primary:!0,size:"huge",content:u("Resend email")}));case l:return r.a.createElement("div",{className:"center"},r.a.createElement("p",null,u("Email has been verified - you can now login")),r.a.createElement(to.a,{primary:!0,onClick:()=>m(r.a.createElement(ko,null)),size:"large",content:u("Login")}))}})()))};var $s=()=>{const e=Ws().get("email"),{t:t}=Object(Li.a)(["forms"]);return r.a.createElement(eo.a,{placeholder:!0,textAlign:"center"},r.a.createElement(go.a,{icon:!0,color:"green"},r.a.createElement(_i.a,{name:"check"}),t("Password reset link sent")),r.a.createElement("p",null,t("Please check your email (including junk email) for the password reset link")),e&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,t("Didn't receive the email? Click the below button to resend")),r.a.createElement(to.a,{primary:!0,onClick:function(){N.resendPasswordRequest(e).then(()=>{v.b.success(t("Password reset link resent - please check your email"))}).catch(e=>console.log(e))},content:t("Resend request"),size:"huge"})))};var _s=()=>{const e=Ws().get("email"),t=Ws().get("token"),a=Object(n.useContext)(Ti),{resetPassword:i}=a.userStore,{t:o}=Object(Li.a)(["forms"]),l=Object(fo.combineValidators)({password:Object(fo.composeValidators)(Object(fo.isRequired)({message:o("Password is required")}),Object(fo.matchesPattern)(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/)({message:o("Password requires a minimum of eight characters, at least one uppercase letter, one lowercase letter, one number and one special character")}))(),confirmPassword:Object(fo.composeValidators)(Object(fo.isRequired)({message:o("Confirmation of password is required")}),Object(fo.matchesField)("password","confirmPassword")({message:o("Passwords do not match")}))()});return r.a.createElement(eo.a,{placeholder:!0},r.a.createElement(go.a,{icon:!0},r.a.createElement(_i.a,{name:"envelope"}),o("Forgotten password")),r.a.createElement(Eo.b,{onSubmit:a=>(async a=>{i(t,e,a.password)})(a).catch(e=>({[yo.a]:e})),validate:l,render:({handleSubmit:e,submitting:t,invalid:a,pristine:n})=>r.a.createElement(Oo.a,{onSubmit:e,autoComplete:"off",style:{paddingBottom:"8rem"}},r.a.createElement(go.a,{as:"h2",content:o("Reset password"),color:"teal",textAlign:"center"}),r.a.createElement(Eo.a,{name:"password",component:wo,placeholder:o("Password"),type:"password"}),r.a.createElement(Eo.a,{name:"confirmPassword",component:wo,placeholder:o("Confirm Password"),type:"password"}),r.a.createElement(to.a,{disabled:a||n,loading:t,color:"teal",content:o("Reset your password"),fluid:!0}))}))};var Js=Object(l.i)(Object(m.a)(({location:e})=>{const t=Object(n.useContext)(Ti),{setAppLoaded:a,token:i,appLoaded:o}=t.commonStore,{getUser:c}=t.userStore,{createHubConnection:m}=t.presenceStore,{t:u}=Object(Li.a)(["home"]);return Object(n.useEffect)(()=>{i?(c().finally(()=>a()),m()):a()},[c,a,i,m]),o?r.a.createElement(r.a.Fragment,null,r.a.createElement(xl,null),r.a.createElement(v.a,{position:"top-right"}),r.a.createElement(l.b,{exact:!0,path:"/",component:Po}),r.a.createElement(l.b,{path:"/(.+)",render:()=>r.a.createElement(n.Fragment,null,r.a.createElement(qi,null),r.a.createElement(s.a,{style:{marginTop:"7em"}},r.a.createElement(l.d,null,r.a.createElement(ss,{exact:!0,path:"/activities",component:po}),r.a.createElement(ss,{path:"/activities/:id",component:Ol}),r.a.createElement(ss,{key:e.key,path:["/createDiary","/manage/:id"],component:Do}),r.a.createElement(ss,{key:e.key,path:["/createDiaryEntry/:activityId","/manageDiaryEntry/:id/:activityId"],component:Ns}),r.a.createElement(ss,{exact:!0,path:"/gallery",component:Ko}),r.a.createElement(ss,{path:"/gallery/:id",component:hc}),r.a.createElement(ss,{path:["/galleryForm","/manageGallery/:id"],key:e.key,component:cs}),r.a.createElement(ss,{exact:!0,path:"/forum",component:kc}),r.a.createElement(ss,{exact:!0,path:"/forum/:id",component:Tc}),r.a.createElement(ss,{key:e.key,path:["/forumform","/manageForum/:id"],component:Ic}),r.a.createElement(ss,{exact:!0,path:"/mechanics",component:rl}),r.a.createElement(ss,{path:"/mechanics/:id",component:es}),r.a.createElement(ss,{key:e.key,path:["/mechanicForm","/manageMechanic/:id"],component:os}),r.a.createElement(ss,{exact:!0,path:"/shop",component:Os}),r.a.createElement(ss,{path:"/product/:id",component:kl}),r.a.createElement(ss,{key:e.key,path:["/productForm","/manageProduct/:id"],component:vs}),r.a.createElement(ss,{exact:!0,path:"/privateMessages",component:Ys}),r.a.createElement(ss,{exact:!0,path:"/feed",component:Ps}),r.a.createElement(ss,{exact:!0,path:"/people",component:zs}),r.a.createElement(ss,{path:"/profile/:username",component:tc}),r.a.createElement(l.b,{path:"/user/registerSuccess",component:Ks}),r.a.createElement(l.b,{path:"/user/verifyEmail",component:Zs}),r.a.createElement(l.b,{path:"/user/sendRequestResetPasswordSuccess",component:$s}),r.a.createElement(l.b,{path:"/user/ResetPasswordForm",component:_s}),r.a.createElement(l.b,{path:"/login",component:ko}),r.a.createElement(l.b,{path:"/confirmDelete",component:nc}),r.a.createElement(l.b,{component:Pl}))))})):r.a.createElement(ol,{content:u("Loading app...")})}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Qs=Object(l.i)((function(e){var t=e.children,a=e.location.pathname;return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[a]),t})),Xs=a(420),em=a.n(Xs),tm=a(160),am=a(421),nm=a(425);Hi.a.use(am.a).use(nm.a).use(tm.e).init({backend:{loadPath:"/assets/i18n/{{ns}}/{{lng}}.json"},fallbackLng:"en",debug:!1,ns:["home","navbar","diaries","gallery","widget","forum","comments","modals","mechanics","shop","social"],interpolation:{escapeValue:!1,formatSeparator:","},react:{useSuspense:!0}});Hi.a;em()();const rm=Object(c.a)();o.a.render(r.a.createElement(l.c,{history:rm},r.a.createElement(Qs,null,r.a.createElement(n.Suspense,{fallback:null},r.a.createElement(Js,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[435,1,2]]]);
//# sourceMappingURL=main.f06cf59d.chunk.js.map